(function(C,d){typeof exports=="object"&&typeof module<"u"?d(exports,require("vue"),require("three")):typeof define=="function"&&define.amd?define(["exports","vue","three"],d):(C=typeof globalThis<"u"?globalThis:C||self,d(C["@janvorisek/drie"]={},C.Vue,C.three))})(this,function(C,d,a){"use strict";const yt=c=>c===void 0?new a.Vector3(0,0,0):"x"in c?new a.Vector3(c.x,c.y,c.z):new a.Vector3(c[0],c[1],c[2]),_t=c=>c===void 0?new a.Vector2(0,0):"x"in c?new a.Vector2(c.x,c.y):new a.Vector2(c[0],c[1]),wt=(c,n,t)=>{t[c].isVector3?t[c].set(n.x,n.y,n.z):"isEuler"in t[c]&&t[c].setFromVector3(n)},R=(c,n,t,e=!0)=>{if(t!==null){if(c[n]!==void 0){const s=yt(c[n]);wt(n,s,t)}e&&d.watch(()=>c[n],()=>{if(c[n]!==void 0){const s=yt(c[n]);wt(n,s,t)}})}},Mt=(c,n,t)=>{t[c].isVector2&&t[c].set(n.x,n.y)},bt=(c,n,t,e=!0)=>{if(t!==null){if(c[n]!==void 0){const s=_t(c[n]);Mt(n,s,t)}e&&d.watch(()=>c[n],()=>{if(c[n]!==void 0){const s=_t(c[n]);Mt(n,s,t)}})}},M=(c,n,t)=>{d.watch(()=>c[n],()=>{t()})};function J(c,n){n.hasAttribute("position")&&(c.setAttribute("position",n.getAttribute("position")),c.attributes.position.needsUpdate=!0),n.hasAttribute("normal")&&(c.setAttribute("normal",n.getAttribute("normal")),c.attributes.normal.needsUpdate=!0),n.hasAttribute("uv")&&(c.setAttribute("uv",n.getAttribute("uv")),c.attributes.uv.needsUpdate=!0),c.setIndex(n.getIndex())}function oe(c){if(c.children.length>0)for(let n=c.children.length-1;n>=0;n--)oe(c.children[n]);if(c.geometry&&c.geometry.dispose(),c.material)if(c.material.length)for(let n=0;n<c.material.length;++n)c.material[n].map&&c.material[n].map.dispose(),c.material[n].lightMap&&c.material[n].lightMap.dispose(),c.material[n].bumpMap&&c.material[n].bumpMap.dispose(),c.material[n].normalMap&&c.material[n].normalMap.dispose(),c.material[n].specularMap&&c.material[n].specularMap.dispose(),c.material[n].envMap&&c.material[n].envMap.dispose(),c.material[n].dispose();else c.material.map&&c.material.map.dispose(),c.material.lightMap&&c.material.lightMap.dispose(),c.material.bumpMap&&c.material.bumpMap.dispose(),c.material.normalMap&&c.material.normalMap.dispose(),c.material.specularMap&&c.material.specularMap.dispose(),c.material.envMap&&c.material.envMap.dispose(),c.material.dispose();return c.removeFromParent(),!0}function ie(c){const n=d.inject("scene"),t=d.inject("parent",void 0);d.onMounted(()=>{t?t.add(c):n.add(c)}),d.onUnmounted(()=>{t?t.remove(c):n.remove(c)})}function Je(c,n){const t=d.inject("camera"),e=d.inject("canvas");d.inject("scene");const s=l=>{if(n.onClick===null)return;const u=new a.Raycaster,h=Et(l);u.setFromCamera(h,t.value);const f=u.intersectObjects(c);f.length>0&&n.onClick(f,h)};let i=!1,o=[];const r=l=>{if(n.onMouseEnter===null&&n.onMouseMove===null&&n.onMouseLeave===null)return;const u=new a.Raycaster,h=Et(l);u.setFromCamera(h,t.value);const f=u.intersectObjects(c);f.length>0?(o=f,i===!1&&n.onMouseEnter!==null&&n.onMouseEnter(f,h),i=!0,n.onMouseLeave!==null&&n.onMouseMove(f,h)):(i&&n.onMouseLeave!==null&&n.onMouseLeave(o,h),i=!1,o=[])};d.onMounted(()=>{if(n.enableRaycasting){if((e==null?void 0:e.value)==null)return;e==null||e.value.addEventListener("click",s),e==null||e.value.addEventListener("mousemove",r)}}),d.onUnmounted(()=>{if(n.enableRaycasting){if((e==null?void 0:e.value)==null)return;e==null||e.value.removeEventListener("click",s),e==null||e.value.removeEventListener("mousemove",r)}}),d.watch(()=>n.enableRaycasting,l=>{l?(e==null||e.value.addEventListener("click",s),e==null||e.value.addEventListener("mousemove",r)):(e==null||e.value.removeEventListener("click",s),e==null||e.value.removeEventListener("mousemove",r))})}function Et(c){const n=new a.Vector2,t=c.currentTarget.getBoundingClientRect();return n.x=(c.clientX-t.left)/t.width*2-1,n.y=-((c.clientY-t.top)/t.height)*2+1,n}var ce={},_e={},Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.callHandlers=Un;function St(c,n){let t=null;try{t=c(n)}catch(e){return Promise.reject(e)}return t&&t.then?t:Promise.resolve(t)}function Un(c,n){return!n||n.length===0?new Promise(t=>{}):n.length===1?St(n[0],c):Promise.all(n.map(t=>St(t,c)))}var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.DEFAULT_PARAM=void 0;const Vn="$_DEFAULT_$";Ae.DEFAULT_PARAM=Vn,Object.defineProperty(_e,"__esModule",{value:!0}),_e.slot=Xn,_e.connectSlot=Yn,_e.defaultSlotConfig=void 0;var zn=Ne,Fe=Ae;const et=()=>{throw new Error("Slot not connected")},Tt={noBuffer:!1,autoReconnect:!0};_e.defaultSlotConfig=Tt;const $n=c=>Object.assign(()=>et(),{config:c,lazy:()=>et,on:()=>et,slotName:"Not connected"}),Ce="LOCAL_TRANSPORT",Le=(c,n)=>Object.keys(n).reduce((t,e)=>t.concat(n[e][c]||[]),[]),xt=c=>Object.keys(c).reduce((n,t)=>{const e=c[t],s=Object.keys(e).filter(r=>(e[r]||[]).length>0),i=[...n,...s];return[...new Set(i)]},[]);function Xn(c=Tt){return $n(c)}function Yn(c,n,t={}){const e=n.reduce((p,y,_)=>({...p,[_]:{}}),{[Ce]:{}}),s=n.reduce((p,y,_)=>({...p,[_]:{}}),{}),i=(p,y)=>{let _=()=>{};const E=new Promise(w=>_=w);s[p][y]={registered:E,onRegister:_}},o=[],r=[],l=p=>o.forEach(y=>y(p)),u=p=>r.forEach(y=>y(p));n.forEach((p,y)=>{const _=(b=Fe.DEFAULT_PARAM,T)=>{if(!s[y])return;const A=e[y][b]||[];e[y][b]=A.concat(T),Le(b,e).length===1&&l(b),s[y][b]||i(String(y),b),s[y][b].onRegister()},E=(b=Fe.DEFAULT_PARAM,T)=>{const x=(e[y][b]||[]).indexOf(T);x>-1&&e[y][b].splice(x,1),Le(b,e).length===0&&u(b),s[y]&&i(String(y),b)},w=()=>{s[y]&&Object.keys(s[y]).forEach(b=>{s[y][b].onRegister()}),delete s[y]};p.addRemoteHandlerRegistrationCallback(c,_),p.addRemoteHandlerUnregistrationCallback(c,E),p.addRemoteEventListChangedListener(c,w)});function h(p,y){const _=arguments.length===2,E=_?y:p,w=_?p:Fe.DEFAULT_PARAM,b=()=>{const A=Le(w,e);return(0,zn.callHandlers)(E,A)};if(n.length===0)return b();const T=[];if(t.autoReconnect&&n.forEach(A=>{T.push(A.autoReconnect())}),t.noBuffer)return Promise.all(T).then(()=>b());{n.forEach((x,O)=>{s[O]&&!s[O][w]&&i(String(O),w)});const A=n.reduce((x,O,D)=>{var k;return[...x,...(k=s[D]&&[s[D][w].registered])!==null&&k!==void 0?k:[]]},[]);return Promise.all(A).then(()=>b())}}function f(p,y){return o.push(p),r.push(y),xt(e).forEach(p),()=>{xt(e).forEach(y);const _=o.indexOf(p);_>-1&&o.splice(_,1);const E=r.indexOf(y);E>-1&&r.splice(E,1)}}function m(p,y){let _="",E=()=>new Promise(b=>b());return typeof p=="string"?(_=p,E=y||E):(_=Fe.DEFAULT_PARAM,E=p),n.forEach(b=>b.registerHandler(c,_,E)),e[Ce][_]=(e[Ce][_]||[]).concat(E),Le(_,e).length===1&&l(_),()=>{n.forEach(x=>x.unregisterHandler(c,_,E));const T=(e[Ce][_]||[]).indexOf(E);T!==-1&&e[Ce][_].splice(T,1),Le(_,e).length===0&&u(_)}}return Object.assign(h,{on:m,lazy:f,config:t,slotName:c})}var Be={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.Transport=void 0;var Zn=Ne;let qn=0;const Kn=()=>`${qn++}`,Qn=c=>{throw new Error(`Should not happen: ${c}`)},tt={TIMED_OUT:"TIMED_OUT",REMOTE_CONNECTION_CLOSED:"REMOTE_CONNECTION_CLOSED",CHANNEL_NOT_READY:"CHANNEL_NOT_READY"};class Wn{constructor(n,t){this._channel=n,this._localHandlers={},this._localHandlerRegistrations={},this._remoteHandlers={},this._remoteHandlerRegistrationCallbacks={},this._remoteHandlerDeletionCallbacks={},this._remoteIgnoredEventsCallbacks={},this._pendingRequests={},this._channelReady=!1,this._channel.onData(e=>{switch(e.type){case"request":return this._requestReceived(e);case"response":return this._responseReceived(e);case"handler_registered":return this._registerRemoteHandler(e);case"handler_unregistered":return this._unregisterRemoteHandler(e);case"error":return this._errorReceived(e);case"event_list":return this._remoteIgnoredEventsReceived(e);default:Qn(e)}}),this._channel.onConnect(()=>{this._channelReady=!0,Object.keys(this._localHandlerRegistrations).forEach(e=>{this._localHandlerRegistrations[e].forEach(s=>{this._channel.send(s)})}),t&&this._channel.send({type:"event_list",ignoredEvents:t})}),this._channel.onDisconnect(()=>{this._channelReady=!1,this._unregisterAllRemoteHandlers(),this._rejectAllPendingRequests(new Error(`${tt.REMOTE_CONNECTION_CLOSED}`))}),this._channel.onError(e=>this._rejectAllPendingRequests(e))}_remoteIgnoredEventsReceived({ignoredEvents:n}){Object.keys(this._remoteIgnoredEventsCallbacks).forEach(t=>{n.includes(t)&&this._remoteIgnoredEventsCallbacks[t]()})}_requestReceived({slotName:n,data:t,id:e,param:s}){const i=this._localHandlers[n];if(!i)return;const o=i[s];o&&(0,Zn.callHandlers)(t,o).then(r=>this._channel.send({type:"response",slotName:n,id:e,data:r,param:s})).catch(r=>this._channel.send({id:e,message:`${r}`,param:s,slotName:n,stack:r.stack||"",type:"error"}))}_responseReceived({slotName:n,data:t,id:e,param:s}){const i=this._pendingRequests[n];!i||!i[s]||!i[s][e]||(i[s][e].resolve(t),delete i[s][e])}_errorReceived({slotName:n,id:t,message:e,stack:s,param:i}){const o=this._pendingRequests[n];if(!o||!o[i]||!o[i][t])return;const r=new Error(`${e} on ${n} with param ${i}`);r.stack=s||r.stack,this._pendingRequests[n][i][t].reject(r),delete this._pendingRequests[n][i][t]}_registerRemoteHandler({slotName:n,param:t}){const e=this._remoteHandlerRegistrationCallbacks[n];if(!e)return;const s=this._remoteHandlers[n];if(s&&s[t])return;const i=o=>new Promise((r,l)=>{if(!this._channelReady)return l(new Error(`${tt.CHANNEL_NOT_READY} on ${n}`));const u=Kn();this._pendingRequests[n]=this._pendingRequests[n]||{},this._pendingRequests[n][t]=this._pendingRequests[n][t]||{},this._pendingRequests[n][t][u]={resolve:r,reject:l},this._channel.send({type:"request",id:u,slotName:n,param:t,data:o}),setTimeout(()=>{const m=((this._pendingRequests[n]||{})[t]||{})[u];if(m){const p=new Error(`${tt.TIMED_OUT} on ${n} with param ${t}`);m.reject(p),delete this._pendingRequests[n][t][u]}},this._channel.timeout)});this._remoteHandlers[n]=this._remoteHandlers[n]||{},this._remoteHandlers[n][t]=i,e(t,i)}_unregisterRemoteHandler({slotName:n,param:t}){const e=this._remoteHandlerDeletionCallbacks[n],s=this._remoteHandlers[n];if(!s)return;const i=s[t];i&&e&&(e(t,i),delete this._remoteHandlers[n][t])}_unregisterAllRemoteHandlers(){Object.keys(this._remoteHandlerDeletionCallbacks).forEach(n=>{const t=this._remoteHandlers[n];if(!t)return;Object.keys(t).filter(s=>t[s]).forEach(s=>this._unregisterRemoteHandler({slotName:n,param:s}))})}_rejectAllPendingRequests(n){Object.keys(this._pendingRequests).forEach(t=>{Object.keys(this._pendingRequests[t]).forEach(e=>{Object.keys(this._pendingRequests[t][e]).forEach(s=>{this._pendingRequests[t][e][s].reject(n)})}),this._pendingRequests[t]={}})}addRemoteHandlerRegistrationCallback(n,t){this._remoteHandlerRegistrationCallbacks[n]||(this._remoteHandlerRegistrationCallbacks[n]=t)}addRemoteHandlerUnregistrationCallback(n,t){this._remoteHandlerDeletionCallbacks[n]||(this._remoteHandlerDeletionCallbacks[n]=t)}addRemoteEventListChangedListener(n,t){this._remoteIgnoredEventsCallbacks[n]||(this._remoteIgnoredEventsCallbacks[n]=t)}registerHandler(n,t,e){if(this._localHandlers[n]=this._localHandlers[n]||{},this._localHandlers[n][t]=this._localHandlers[n][t]||[],this._localHandlers[n][t].push(e),this._localHandlers[n][t].length===1){const s={type:"handler_registered",param:t,slotName:n};this._localHandlerRegistrations[t]=this._localHandlerRegistrations[t]||[],this._localHandlerRegistrations[t].push(s),this._channelReady&&this._channel.send(s)}}unregisterHandler(n,t,e){const s=this._localHandlers[n];if(s&&s[t]){const i=s[t].indexOf(e);if(i>-1&&(s[t].splice(i,1),s[t].length===0)){const o={type:"handler_unregistered",param:t,slotName:n};this._channelReady&&this._channel.send(o)}}}isDisconnected(){return!this._channelReady}autoReconnect(){if(this.isDisconnected()&&this._channel.autoReconnect){const n=new Promise(t=>{this._channel.onConnect(()=>t())});return this._channel.autoReconnect(),n}return Promise.resolve()}}Ue.Transport=Wn,Object.defineProperty(Be,"__esModule",{value:!0}),Be.combineEvents=ts,Be.createEventBus=ns;var Jn=_e,es=Ue;function ts(...c){const n=c.reduce((e,s)=>(e.push.apply(e,Object.keys(s)),e),[]),t=[...new Set(n)];if(n.length>t.length)throw new Error("ts-event-bus: duplicate slots encountered in combineEvents.");return Object.assign({},...c)}function ns(c){const n=(c.channels||[]).map(e=>new es.Transport(e,c.ignoredEvents)),t={};for(const e in c.events)c.events.hasOwnProperty(e)&&(!c.ignoredEvents||c.ignoredEvents&&!c.ignoredEvents.includes(e))&&(t[e]=(0,Jn.connectSlot)(e,n,c.events[e].config));return t}var ss={},Re={};Object.defineProperty(Re,"__esModule",{value:!0}),Re.GenericChannel=void 0;const os=5e3;class is{constructor(n=os){this._timeout=n,this._onMessageCallbacks=[],this._onConnectCallbacks=[],this._onDisconnectCallbacks=[],this._onErrorCallbacks=[],this._ready=!1}get timeout(){return this._timeout}onData(n){this._onMessageCallbacks.indexOf(n)===-1&&this._onMessageCallbacks.push(n)}onConnect(n){this._ready&&n(),this._onConnectCallbacks.push(n)}onDisconnect(n){this._onDisconnectCallbacks.push(n)}onError(n){this._onErrorCallbacks.push(n)}_messageReceived(n){this._onMessageCallbacks.forEach(t=>t(n))}_error(n){this._onErrorCallbacks.forEach(t=>t(n))}_connected(){this._ready=!0,this._onConnectCallbacks.forEach(n=>n())}_disconnected(){this._ready=!1,this._onDisconnectCallbacks.forEach(n=>n())}}Re.GenericChannel=is;var Ve={},ze={};Object.defineProperty(ze,"__esModule",{value:!0}),ze.isTransportMessage=as;function as(c){switch(c.type){case"request":case"response":case"error":case"handler_unregistered":case"handler_registered":case"event_list":return!0;default:return!1}}Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.ChunkedChannel=void 0;var rs=Re,cs=ze;const Se={getRandomId:()=>[...Array(30)].map(()=>Math.random().toString(36)[3]).join(""),str2byteArray:c=>{const n=new Uint16Array(c.length);for(let t=0,e=c.length;t<e;t++)n[t]=c.charCodeAt(t);return n},convertUintArrayToString:(c,n)=>{if(n===-1)return String.fromCharCode.apply(null,c);{let t="";for(let e=0;e<c.length;e+=n)e+n>c.length?t+=String.fromCharCode.apply(null,c.subarray(e)):t+=String.fromCharCode.apply(null,c.subarray(e,e+n));return t}},checkForChunkId:c=>{if(!c.chunkId)throw new Error(`ChunkedMessage did not have a chunkId: ${JSON.stringify(c)}`)}};class ls extends rs.GenericChannel{constructor(n){super(n.timeout),this._chunkSize=void 0,this._maxStringAlloc=void 0,this._sender=void 0,this._buffer={},this._chunkSize=n.chunkSize,this._sender=n.sender,this._maxStringAlloc=n.maxStringAlloc||-1}send(n){const t=JSON.stringify(n);if(t.length<=this._chunkSize){this._sender(n);return}const e=Se.str2byteArray(t),s=Se.getRandomId();this._sender({type:"chunk_start",chunkId:s,size:t.length});const i=(o=0)=>{let r=e.slice(o,o+this._chunkSize);r.length&&(this._sender({type:"chunk_data",chunkId:s,data:Array.from(r)}),i(o+this._chunkSize))};i(),this._sender({type:"chunk_end",chunkId:s})}_messageReceived(n){switch(n.type){case"chunk_start":this._receiveNewChunk(n);break;case"chunk_data":this._receiveChunkData(n);break;case"chunk_end":const t=this._mergeChunks(n);super._messageReceived(t);break;default:super._messageReceived(n)}}_receiveNewChunk(n){if(Se.checkForChunkId(n),this._buffer[n.chunkId])throw new Error(`There was already an entry in the buffer for chunkId ${n.chunkId}`);this._buffer[n.chunkId]={id:n.chunkId,chunks:[],size:n.size}}_receiveChunkData(n){if(Se.checkForChunkId(n),!this._buffer[n.chunkId])throw new Error(`ChunkId ${n.chunkId} was not found in the buffer`);this._buffer[n.chunkId].chunks.push(n.data)}_mergeChunks(n){if(Se.checkForChunkId(n),!this._buffer[n.chunkId])throw new Error(`ChunkId ${n.chunkId} was not found in the buffer`);const t=this._buffer[n.chunkId].chunks.reduce((i,o,r)=>(o.forEach((l,u)=>i.uintArray[i.currentIx+u]=l),i.currentIx+=o.length,i),{uintArray:new Uint16Array(this._buffer[n.chunkId].size),currentIx:0});let e;const s=Se.convertUintArrayToString(t.uintArray,this._maxStringAlloc);try{e=JSON.parse(s)}catch{throw new Error(`Not a valid JSON string: ${s}`)}if(!(0,cs.isTransportMessage)(e))throw new Error(`Not a transport message: ${JSON.stringify(e)}`);return e}}Ve.ChunkedChannel=ls,function(c){Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"slot",{enumerable:!0,get:function(){return n.slot}}),Object.defineProperty(c,"Slot",{enumerable:!0,get:function(){return n.Slot}}),Object.defineProperty(c,"EventDeclaration",{enumerable:!0,get:function(){return t.EventDeclaration}}),Object.defineProperty(c,"combineEvents",{enumerable:!0,get:function(){return t.combineEvents}}),Object.defineProperty(c,"createEventBus",{enumerable:!0,get:function(){return t.createEventBus}}),Object.defineProperty(c,"Channel",{enumerable:!0,get:function(){return e.Channel}}),Object.defineProperty(c,"GenericChannel",{enumerable:!0,get:function(){return s.GenericChannel}}),Object.defineProperty(c,"ChunkedChannel",{enumerable:!0,get:function(){return i.ChunkedChannel}}),Object.defineProperty(c,"TransportMessage",{enumerable:!0,get:function(){return o.TransportMessage}}),Object.defineProperty(c,"DEFAULT_PARAM",{enumerable:!0,get:function(){return r.DEFAULT_PARAM}});var n=_e,t=Be,e=ss,s=Re,i=Ve,o=ze,r=Ae}(ce);const us={geometryChanged:ce.slot(),object3DChanged:ce.slot(),object3DTranslated:ce.slot(),sayHello:ce.slot(),getTime:ce.slot(),multiply:ce.slot(),ping:ce.slot()},I=ce.createEventBus({events:us}),At=d.defineComponent({__name:"Renderer",props:{alpha:{type:Boolean,default:!1},antialias:{type:Boolean,default:!1},autoResize:{type:Boolean,default:!0},camera:null,height:{default:0},frameLimit:{default:60},onBeforeRender:{type:Function,default:()=>{}},shadowMapEnabled:{type:Boolean,default:!1},width:{default:0}},setup(c,{expose:n}){const t=c;let e=d.ref(null);const s=[],i=d.reactive([]),o=d.reactive([]);let r=d.ref(null);const l=d.ref([]),u=d.ref([]),h=d.ref();d.provide("canvas",h);let f=!0,m=Date.now(),p=1e3/t.frameLimit;d.watch(()=>t.camera,w=>y(w));const y=w=>{if(w){const b=l.value.find(T=>T.name===w);b===void 0&&(r.value=null),r.value=b}else r.value=l.value[0]};function _(){e.value!==null&&(e.value.shadowMap.enabled=t.shadowMapEnabled,p=1e3/t.frameLimit,t.autoResize||e.value.setSize(t.width,t.height))}d.onMounted(()=>{e.value=new a.WebGLRenderer({canvas:h.value,antialias:t.antialias,alpha:t.alpha}),e.value.setSize(1,1),_(),y(t.camera),new ResizeObserver(b=>{b.forEach(T=>{e.value&&t.autoResize&&e.value.setSize(T.contentRect.width,T.contentRect.height)})}).observe(h.value.parentElement),E()}),d.onUnmounted(()=>{for(let w of s)oe(w)});function E(){if(requestAnimationFrame(E),e.value===null)return;const w=Date.now(),b=w-m;if(!(p>-1&&b<p)){if(m=w-b%p,t.onBeforeRender&&t.onBeforeRender(),u.value.length>0&&r.value)for(const T of u.value)T.value!==null&&(T.value.object.uuid===r.value.uuid?(T.value.enabled=f,T.value.update()):T.value.enabled=!1);if(r.value&&e)for(const T of s)e.value.render(T,r.value)}}return _(),d.watch(()=>t.shadowMapEnabled,()=>_()),d.watch(()=>t.frameLimit,()=>_()),d.watch(()=>t.width,()=>_()),d.watch(()=>t.height,()=>_()),d.provide("addCamera",w=>l.value.push(w)),d.provide("addScene",w=>s.push(w)),d.provide("addGeometry",w=>i.push(w)),d.provide("getGeometry",w=>i.find(b=>b.name===w)),d.provide("addMaterial",w=>o.push(w)),d.provide("getMaterial",w=>o.find(b=>b.name===w)),d.provide("addControls",w=>u.value.push(w)),d.provide("enableAllControls",()=>{f=!0}),d.provide("disableAllControls",()=>{f=!1}),d.provide("camera",r),n({three:e,eventBus:I}),(w,b)=>(d.openBlock(),d.createElementBlock(d.Fragment,null,[d.createElementVNode("canvas",{ref_key:"canvas",ref:h},null,512),d.renderSlot(w.$slots,"default")],64))}}),Ct=d.defineComponent({__name:"Scene",props:{background:{default:16777215}},setup(c,{expose:n}){const t=c,e=new a.Scene;d.provide("scene",e),d.inject("addScene")(e);function s(i){i.background&&(e.background=new a.Color(i.background))}return s(t),d.watch(()=>t.background,()=>s(t)),n({three:e}),(i,o)=>d.renderSlot(i.$slots,"default")}}),ds={name:"PerspectiveCamera"},Lt=d.defineComponent({...ds,props:{aspect:{default:1},autoResize:{type:Boolean,default:!0},far:{default:2e3},lookAt:{default:()=>[0,0,0]},name:{default:""},near:{default:.1},position:{default:()=>[0,0,0]},up:{default:()=>[0,1,0]}},setup(c,{expose:n}){const t=c,e=new a.PerspectiveCamera(75,window.innerWidth/window.innerHeight*1e3,.1,1e3);d.inject("addCamera")(e);const s=d.inject("canvas");d.watch(s,()=>{new ResizeObserver(r=>{r.forEach(l=>{t.autoResize&&(e.aspect=l.contentRect.width/l.contentRect.height,e.updateProjectionMatrix())})}).observe(s.value)}),R(t,"position",e),R(t,"up",e),R(t,"lookAt",e);function i(){e.name=t.name,t.autoResize||(e.aspect=t.aspect),e.near=t.near,e.far=t.far,e.updateProjectionMatrix()}return i(),M(t,"name",i),M(t,"aspect",i),M(t,"near",i),M(t,"far",i),d.provide("parentCamera",e),n({three:e}),(o,r)=>d.renderSlot(o.$slots,"default")}}),fs={name:"OrthographicCamera"},Rt=d.defineComponent({...fs,props:{far:{default:2e3},lookAt:{default:()=>[0,0,0]},name:{default:""},near:{default:.1},position:{default:()=>[0,0,0]},up:{default:()=>[0,1,0]}},setup(c,{expose:n}){const t=c,e=new a.OrthographicCamera(-10,10,10,-10,.1,1e3);e.lookAt(0,0,0),e.updateProjectionMatrix(),d.inject("addCamera")(e);const s=d.inject("canvas");d.watch(s,()=>{new ResizeObserver(r=>{r.forEach(l=>{const u=l.contentRect.width/l.contentRect.height;e.left=e.bottom*u,e.right=e.top*u,e.updateProjectionMatrix()})}).observe(s.value)}),R(t,"position",e),R(t,"up",e),R(t,"lookAt",e);function i(){e.name=t.name,e.near=t.near,e.far=t.far,e.updateProjectionMatrix()}return i(),M(t,"name",i),M(t,"near",i),M(t,"far",i),d.provide("parentCamera",e),n({three:e}),(o,r)=>d.renderSlot(o.$slots,"default")}}),Pt={type:"change"},nt={type:"start"},vt={type:"end"};class hs extends a.EventDispatcher{constructor(n,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=n,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new a.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:a.MOUSE.ROTATE,MIDDLE:a.MOUSE.DOLLY,RIGHT:a.MOUSE.PAN},this.touches={ONE:a.TOUCH.ROTATE,TWO:a.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return r.phi},this.getAzimuthalAngle=function(){return r.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(g){g.addEventListener("keydown",Gn),this._domElementKeyEvents=g},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(Pt),e.update(),i=s.NONE},this.update=function(){const g=new a.Vector3,L=new a.Quaternion().setFromUnitVectors(n.up,new a.Vector3(0,1,0)),X=L.clone().invert(),q=new a.Vector3,se=new a.Quaternion,xe=2*Math.PI;return function(){const Bn=e.object.position;g.copy(Bn).sub(e.target),g.applyQuaternion(L),r.setFromVector3(g),e.autoRotate&&i===s.NONE&&z(D()),e.enableDamping?(r.theta+=l.theta*e.dampingFactor,r.phi+=l.phi*e.dampingFactor):(r.theta+=l.theta,r.phi+=l.phi);let de=e.minAzimuthAngle,fe=e.maxAzimuthAngle;return isFinite(de)&&isFinite(fe)&&(de<-Math.PI?de+=xe:de>Math.PI&&(de-=xe),fe<-Math.PI?fe+=xe:fe>Math.PI&&(fe-=xe),de<=fe?r.theta=Math.max(de,Math.min(fe,r.theta)):r.theta=r.theta>(de+fe)/2?Math.max(de,r.theta):Math.min(fe,r.theta)),r.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,r.phi)),r.makeSafe(),r.radius*=u,r.radius=Math.max(e.minDistance,Math.min(e.maxDistance,r.radius)),e.enableDamping===!0?e.target.addScaledVector(h,e.dampingFactor):e.target.add(h),g.setFromSpherical(r),g.applyQuaternion(X),Bn.copy(e.target).add(g),e.object.lookAt(e.target),e.enableDamping===!0?(l.theta*=1-e.dampingFactor,l.phi*=1-e.dampingFactor,h.multiplyScalar(1-e.dampingFactor)):(l.set(0,0,0),h.set(0,0,0)),u=1,f||q.distanceToSquared(e.object.position)>o||8*(1-se.dot(e.object.quaternion))>o?(e.dispatchEvent(Pt),q.copy(e.object.position),se.copy(e.object.quaternion),f=!1,!0):!1}}(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",Hn),e.domElement.removeEventListener("pointerdown",Ee),e.domElement.removeEventListener("pointercancel",jn),e.domElement.removeEventListener("wheel",Dn),e.domElement.removeEventListener("pointermove",pt),e.domElement.removeEventListener("pointerup",mt),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",Gn)};const e=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=s.NONE;const o=1e-6,r=new a.Spherical,l=new a.Spherical;let u=1;const h=new a.Vector3;let f=!1;const m=new a.Vector2,p=new a.Vector2,y=new a.Vector2,_=new a.Vector2,E=new a.Vector2,w=new a.Vector2,b=new a.Vector2,T=new a.Vector2,A=new a.Vector2,x=[],O={};function D(){return 2*Math.PI/60/60*e.autoRotateSpeed}function k(){return Math.pow(.95,e.zoomSpeed)}function z(g){l.theta-=g}function j(g){l.phi-=g}const B=function(){const g=new a.Vector3;return function(X,q){g.setFromMatrixColumn(q,0),g.multiplyScalar(-X),h.add(g)}}(),Q=function(){const g=new a.Vector3;return function(X,q){e.screenSpacePanning===!0?g.setFromMatrixColumn(q,1):(g.setFromMatrixColumn(q,0),g.crossVectors(e.object.up,g)),g.multiplyScalar(X),h.add(g)}}(),F=function(){const g=new a.Vector3;return function(X,q){const se=e.domElement;if(e.object.isPerspectiveCamera){const xe=e.object.position;g.copy(xe).sub(e.target);let We=g.length();We*=Math.tan(e.object.fov/2*Math.PI/180),B(2*X*We/se.clientHeight,e.object.matrix),Q(2*q*We/se.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?(B(X*(e.object.right-e.object.left)/e.object.zoom/se.clientWidth,e.object.matrix),Q(q*(e.object.top-e.object.bottom)/e.object.zoom/se.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}}();function U(g){e.object.isPerspectiveCamera?u/=g:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom*g)),e.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function H(g){e.object.isPerspectiveCamera?u*=g:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/g)),e.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function te(g){m.set(g.clientX,g.clientY)}function Y(g){b.set(g.clientX,g.clientY)}function W(g){_.set(g.clientX,g.clientY)}function $(g){p.set(g.clientX,g.clientY),y.subVectors(p,m).multiplyScalar(e.rotateSpeed);const L=e.domElement;z(2*Math.PI*y.x/L.clientHeight),j(2*Math.PI*y.y/L.clientHeight),m.copy(p),e.update()}function me(g){T.set(g.clientX,g.clientY),A.subVectors(T,b),A.y>0?U(k()):A.y<0&&H(k()),b.copy(T),e.update()}function ge(g){E.set(g.clientX,g.clientY),w.subVectors(E,_).multiplyScalar(e.panSpeed),F(w.x,w.y),_.copy(E),e.update()}function ue(g){g.deltaY<0?H(k()):g.deltaY>0&&U(k()),e.update()}function Ge(g){let L=!1;switch(g.code){case e.keys.UP:F(0,e.keyPanSpeed),L=!0;break;case e.keys.BOTTOM:F(0,-e.keyPanSpeed),L=!0;break;case e.keys.LEFT:F(e.keyPanSpeed,0),L=!0;break;case e.keys.RIGHT:F(-e.keyPanSpeed,0),L=!0;break}L&&(g.preventDefault(),e.update())}function ye(){if(x.length===1)m.set(x[0].pageX,x[0].pageY);else{const g=.5*(x[0].pageX+x[1].pageX),L=.5*(x[0].pageY+x[1].pageY);m.set(g,L)}}function He(){if(x.length===1)_.set(x[0].pageX,x[0].pageY);else{const g=.5*(x[0].pageX+x[1].pageX),L=.5*(x[0].pageY+x[1].pageY);_.set(g,L)}}function Qe(){const g=x[0].pageX-x[1].pageX,L=x[0].pageY-x[1].pageY,X=Math.sqrt(g*g+L*L);b.set(0,X)}function S(){e.enableZoom&&Qe(),e.enablePan&&He()}function P(){e.enableZoom&&Qe(),e.enableRotate&&ye()}function V(g){if(x.length==1)p.set(g.pageX,g.pageY);else{const X=gt(g),q=.5*(g.pageX+X.x),se=.5*(g.pageY+X.y);p.set(q,se)}y.subVectors(p,m).multiplyScalar(e.rotateSpeed);const L=e.domElement;z(2*Math.PI*y.x/L.clientHeight),j(2*Math.PI*y.y/L.clientHeight),m.copy(p)}function Z(g){if(x.length===1)E.set(g.pageX,g.pageY);else{const L=gt(g),X=.5*(g.pageX+L.x),q=.5*(g.pageY+L.y);E.set(X,q)}w.subVectors(E,_).multiplyScalar(e.panSpeed),F(w.x,w.y),_.copy(E)}function ne(g){const L=gt(g),X=g.pageX-L.x,q=g.pageY-L.y,se=Math.sqrt(X*X+q*q);T.set(0,se),A.set(0,Math.pow(T.y/b.y,e.zoomSpeed)),U(A.y),b.copy(T)}function re(g){e.enableZoom&&ne(g),e.enablePan&&Z(g)}function kn(g){e.enableZoom&&ne(g),e.enableRotate&&V(g)}function Ee(g){e.enabled!==!1&&(x.length===0&&(e.domElement.setPointerCapture(g.pointerId),e.domElement.addEventListener("pointermove",pt),e.domElement.addEventListener("pointerup",mt)),Do(g),g.pointerType==="touch"?ko(g):Oo(g))}function pt(g){e.enabled!==!1&&(g.pointerType==="touch"?jo(g):Io(g))}function mt(g){Nn(g),x.length===0&&(e.domElement.releasePointerCapture(g.pointerId),e.domElement.removeEventListener("pointermove",pt),e.domElement.removeEventListener("pointerup",mt)),e.dispatchEvent(vt),i=s.NONE}function jn(g){Nn(g)}function Oo(g){let L;switch(g.button){case 0:L=e.mouseButtons.LEFT;break;case 1:L=e.mouseButtons.MIDDLE;break;case 2:L=e.mouseButtons.RIGHT;break;default:L=-1}switch(L){case a.MOUSE.DOLLY:if(e.enableZoom===!1)return;Y(g),i=s.DOLLY;break;case a.MOUSE.ROTATE:if(g.ctrlKey||g.metaKey||g.shiftKey){if(e.enablePan===!1)return;W(g),i=s.PAN}else{if(e.enableRotate===!1)return;te(g),i=s.ROTATE}break;case a.MOUSE.PAN:if(g.ctrlKey||g.metaKey||g.shiftKey){if(e.enableRotate===!1)return;te(g),i=s.ROTATE}else{if(e.enablePan===!1)return;W(g),i=s.PAN}break;default:i=s.NONE}i!==s.NONE&&e.dispatchEvent(nt)}function Io(g){if(e.enabled!==!1)switch(i){case s.ROTATE:if(e.enableRotate===!1)return;$(g);break;case s.DOLLY:if(e.enableZoom===!1)return;me(g);break;case s.PAN:if(e.enablePan===!1)return;ge(g);break}}function Dn(g){e.enabled===!1||e.enableZoom===!1||i!==s.NONE||(g.preventDefault(),e.dispatchEvent(nt),ue(g),e.dispatchEvent(vt))}function Gn(g){e.enabled===!1||e.enablePan===!1||Ge(g)}function ko(g){switch(Fn(g),x.length){case 1:switch(e.touches.ONE){case a.TOUCH.ROTATE:if(e.enableRotate===!1)return;ye(),i=s.TOUCH_ROTATE;break;case a.TOUCH.PAN:if(e.enablePan===!1)return;He(),i=s.TOUCH_PAN;break;default:i=s.NONE}break;case 2:switch(e.touches.TWO){case a.TOUCH.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;S(),i=s.TOUCH_DOLLY_PAN;break;case a.TOUCH.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;P(),i=s.TOUCH_DOLLY_ROTATE;break;default:i=s.NONE}break;default:i=s.NONE}i!==s.NONE&&e.dispatchEvent(nt)}function jo(g){switch(Fn(g),i){case s.TOUCH_ROTATE:if(e.enableRotate===!1)return;V(g),e.update();break;case s.TOUCH_PAN:if(e.enablePan===!1)return;Z(g),e.update();break;case s.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;re(g),e.update();break;case s.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;kn(g),e.update();break;default:i=s.NONE}}function Hn(g){e.enabled!==!1&&g.preventDefault()}function Do(g){x.push(g)}function Nn(g){delete O[g.pointerId];for(let L=0;L<x.length;L++)if(x[L].pointerId==g.pointerId){x.splice(L,1);return}}function Fn(g){let L=O[g.pointerId];L===void 0&&(L=new a.Vector2,O[g.pointerId]=L),L.set(g.pageX,g.pageY)}function gt(g){const L=g.pointerId===x[0].pointerId?x[1]:x[0];return O[L.pointerId]}e.domElement.addEventListener("contextmenu",Hn),e.domElement.addEventListener("pointerdown",Ee),e.domElement.addEventListener("pointercancel",jn),e.domElement.addEventListener("wheel",Dn,{passive:!1}),this.update()}}const ps={name:"OrbitControls",render:()=>null},Ot=d.defineComponent({...ps,props:{enablePan:{type:Boolean,default:!0},enableRotate:{type:Boolean,default:!0},enableZoom:{type:Boolean,default:!0},minZoom:{default:0},maxZoom:{default:1/0},minDistance:{default:0},maxDistance:{default:1/0},minPolarAngle:{default:0},maxPolarAngle:{default:Math.PI},minAzimuthAngle:{default:1/0},maxAzimuthAngle:{default:1/0},target:{default:()=>[0,0,0]}},setup(c,{expose:n}){const t=c,e=d.ref(null);d.inject("addControls")(e);const s=d.inject("parentCamera"),i=d.inject("canvas");function o(){e.value!=null&&(e.value.enablePan=t.enablePan,e.value.enableRotate=t.enableRotate,e.value.enableZoom=t.enableZoom,e.value.minZoom=t.minZoom,e.value.maxZoom=t.maxZoom,e.value.minDistance=t.minDistance,e.value.maxDistance=t.maxDistance,e.value.minPolarAngle=t.minPolarAngle,e.value.maxPolarAngle=t.maxPolarAngle,e.value.minAzimuthAngle=t.minAzimuthAngle,e.value.maxAzimuthAngle=t.maxAzimuthAngle)}let r=!1;const l=()=>{i.value&&(r||(e.value=new hs(s,i.value),o(),R(t,"target",e.value),r=!0))};return d.watch(i,()=>{l()}),o(),M(t,"enablePan",o),M(t,"enableRotate",o),M(t,"enableZoom",o),M(t,"minZoom",o),M(t,"maxZoom",o),M(t,"minDistance",o),M(t,"maxDistance",o),M(t,"minPolarAngle",o),M(t,"maxPolarAngle",o),M(t,"minAzimuthAngle",o),M(t,"maxAzimuthAngle",o),n({three:e}),{props:t,three:e,camera:s,canvas:i,applyProps:o,get boundCamera(){return r},set boundCamera(u){r=u},tryBindCamera:l}}}),st={type:"change"},ot={type:"start"},it={type:"end"};class ms extends a.EventDispatcher{constructor(n,t){super(),t===void 0&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');const e=this,s={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=n,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:a.MOUSE.ROTATE,MIDDLE:a.MOUSE.DOLLY,RIGHT:a.MOUSE.PAN},this.target=new a.Vector3;const i=1e-6,o=new a.Vector3;let r=1,l=s.NONE,u=s.NONE,h=0,f=0,m=0;const p=new a.Vector3,y=new a.Vector2,_=new a.Vector2,E=new a.Vector3,w=new a.Vector2,b=new a.Vector2,T=new a.Vector2,A=new a.Vector2,x=[],O={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const S=e.domElement.getBoundingClientRect(),P=e.domElement.ownerDocument.documentElement;e.screen.left=S.left+window.pageXOffset-P.clientLeft,e.screen.top=S.top+window.pageYOffset-P.clientTop,e.screen.width=S.width,e.screen.height=S.height};const D=function(){const S=new a.Vector2;return function(V,Z){return S.set((V-e.screen.left)/e.screen.width,(Z-e.screen.top)/e.screen.height),S}}(),k=function(){const S=new a.Vector2;return function(V,Z){return S.set((V-e.screen.width*.5-e.screen.left)/(e.screen.width*.5),(e.screen.height+2*(e.screen.top-Z))/e.screen.width),S}}();this.rotateCamera=function(){const S=new a.Vector3,P=new a.Quaternion,V=new a.Vector3,Z=new a.Vector3,ne=new a.Vector3,re=new a.Vector3;return function(){re.set(_.x-y.x,_.y-y.y,0);let Ee=re.length();Ee?(p.copy(e.object.position).sub(e.target),V.copy(p).normalize(),Z.copy(e.object.up).normalize(),ne.crossVectors(Z,V).normalize(),Z.setLength(_.y-y.y),ne.setLength(_.x-y.x),re.copy(Z.add(ne)),S.crossVectors(re,p).normalize(),Ee*=e.rotateSpeed,P.setFromAxisAngle(S,Ee),p.applyQuaternion(P),e.object.up.applyQuaternion(P),E.copy(S),m=Ee):!e.staticMoving&&m&&(m*=Math.sqrt(1-e.dynamicDampingFactor),p.copy(e.object.position).sub(e.target),P.setFromAxisAngle(E,m),p.applyQuaternion(P),e.object.up.applyQuaternion(P)),y.copy(_)}}(),this.zoomCamera=function(){let S;l===s.TOUCH_ZOOM_PAN?(S=h/f,h=f,e.object.isPerspectiveCamera?p.multiplyScalar(S):e.object.isOrthographicCamera?(e.object.zoom/=S,e.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(S=1+(b.y-w.y)*e.zoomSpeed,S!==1&&S>0&&(e.object.isPerspectiveCamera?p.multiplyScalar(S):e.object.isOrthographicCamera?(e.object.zoom/=S,e.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),e.staticMoving?w.copy(b):w.y+=(b.y-w.y)*this.dynamicDampingFactor)},this.panCamera=function(){const S=new a.Vector2,P=new a.Vector3,V=new a.Vector3;return function(){if(S.copy(A).sub(T),S.lengthSq()){if(e.object.isOrthographicCamera){const ne=(e.object.right-e.object.left)/e.object.zoom/e.domElement.clientWidth,re=(e.object.top-e.object.bottom)/e.object.zoom/e.domElement.clientWidth;S.x*=ne,S.y*=re}S.multiplyScalar(p.length()*e.panSpeed),V.copy(p).cross(e.object.up).setLength(S.x),V.add(P.copy(e.object.up).setLength(S.y)),e.object.position.add(V),e.target.add(V),e.staticMoving?T.copy(A):T.add(S.subVectors(A,T).multiplyScalar(e.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!e.noZoom||!e.noPan)&&(p.lengthSq()>e.maxDistance*e.maxDistance&&(e.object.position.addVectors(e.target,p.setLength(e.maxDistance)),w.copy(b)),p.lengthSq()<e.minDistance*e.minDistance&&(e.object.position.addVectors(e.target,p.setLength(e.minDistance)),w.copy(b)))},this.update=function(){p.subVectors(e.object.position,e.target),e.noRotate||e.rotateCamera(),e.noZoom||e.zoomCamera(),e.noPan||e.panCamera(),e.object.position.addVectors(e.target,p),e.object.isPerspectiveCamera?(e.checkDistances(),e.object.lookAt(e.target),o.distanceToSquared(e.object.position)>i&&(e.dispatchEvent(st),o.copy(e.object.position))):e.object.isOrthographicCamera?(e.object.lookAt(e.target),(o.distanceToSquared(e.object.position)>i||r!==e.object.zoom)&&(e.dispatchEvent(st),o.copy(e.object.position),r=e.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){l=s.NONE,u=s.NONE,e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.up.copy(e.up0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),p.subVectors(e.object.position,e.target),e.object.lookAt(e.target),e.dispatchEvent(st),o.copy(e.object.position),r=e.object.zoom};function z(S){e.enabled!==!1&&(x.length===0&&(e.domElement.setPointerCapture(S.pointerId),e.domElement.addEventListener("pointermove",j),e.domElement.addEventListener("pointerup",B)),Ge(S),S.pointerType==="touch"?$(S):H(S))}function j(S){e.enabled!==!1&&(S.pointerType==="touch"?me(S):te(S))}function B(S){e.enabled!==!1&&(S.pointerType==="touch"?ge(S):Y(),ye(S),x.length===0&&(e.domElement.releasePointerCapture(S.pointerId),e.domElement.removeEventListener("pointermove",j),e.domElement.removeEventListener("pointerup",B)))}function Q(S){ye(S)}function F(S){e.enabled!==!1&&(window.removeEventListener("keydown",F),u===s.NONE&&(S.code===e.keys[s.ROTATE]&&!e.noRotate?u=s.ROTATE:S.code===e.keys[s.ZOOM]&&!e.noZoom?u=s.ZOOM:S.code===e.keys[s.PAN]&&!e.noPan&&(u=s.PAN)))}function U(){e.enabled!==!1&&(u=s.NONE,window.addEventListener("keydown",F))}function H(S){if(l===s.NONE)switch(S.button){case e.mouseButtons.LEFT:l=s.ROTATE;break;case e.mouseButtons.MIDDLE:l=s.ZOOM;break;case e.mouseButtons.RIGHT:l=s.PAN;break}const P=u!==s.NONE?u:l;P===s.ROTATE&&!e.noRotate?(_.copy(k(S.pageX,S.pageY)),y.copy(_)):P===s.ZOOM&&!e.noZoom?(w.copy(D(S.pageX,S.pageY)),b.copy(w)):P===s.PAN&&!e.noPan&&(T.copy(D(S.pageX,S.pageY)),A.copy(T)),e.dispatchEvent(ot)}function te(S){const P=u!==s.NONE?u:l;P===s.ROTATE&&!e.noRotate?(y.copy(_),_.copy(k(S.pageX,S.pageY))):P===s.ZOOM&&!e.noZoom?b.copy(D(S.pageX,S.pageY)):P===s.PAN&&!e.noPan&&A.copy(D(S.pageX,S.pageY))}function Y(){l=s.NONE,e.dispatchEvent(it)}function W(S){if(e.enabled!==!1&&e.noZoom!==!0){switch(S.preventDefault(),S.deltaMode){case 2:w.y-=S.deltaY*.025;break;case 1:w.y-=S.deltaY*.01;break;default:w.y-=S.deltaY*25e-5;break}e.dispatchEvent(ot),e.dispatchEvent(it)}}function $(S){switch(He(S),x.length){case 1:l=s.TOUCH_ROTATE,_.copy(k(x[0].pageX,x[0].pageY)),y.copy(_);break;default:l=s.TOUCH_ZOOM_PAN;const P=x[0].pageX-x[1].pageX,V=x[0].pageY-x[1].pageY;f=h=Math.sqrt(P*P+V*V);const Z=(x[0].pageX+x[1].pageX)/2,ne=(x[0].pageY+x[1].pageY)/2;T.copy(D(Z,ne)),A.copy(T);break}e.dispatchEvent(ot)}function me(S){switch(He(S),x.length){case 1:y.copy(_),_.copy(k(S.pageX,S.pageY));break;default:const P=Qe(S),V=S.pageX-P.x,Z=S.pageY-P.y;f=Math.sqrt(V*V+Z*Z);const ne=(S.pageX+P.x)/2,re=(S.pageY+P.y)/2;A.copy(D(ne,re));break}}function ge(S){switch(x.length){case 0:l=s.NONE;break;case 1:l=s.TOUCH_ROTATE,_.copy(k(S.pageX,S.pageY)),y.copy(_);break;case 2:l=s.TOUCH_ZOOM_PAN,_.copy(k(S.pageX-y.x,S.pageY-y.y)),y.copy(_);break}e.dispatchEvent(it)}function ue(S){e.enabled!==!1&&S.preventDefault()}function Ge(S){x.push(S)}function ye(S){delete O[S.pointerId];for(let P=0;P<x.length;P++)if(x[P].pointerId==S.pointerId){x.splice(P,1);return}}function He(S){let P=O[S.pointerId];P===void 0&&(P=new a.Vector2,O[S.pointerId]=P),P.set(S.pageX,S.pageY)}function Qe(S){const P=S.pointerId===x[0].pointerId?x[1]:x[0];return O[P.pointerId]}this.dispose=function(){e.domElement.removeEventListener("contextmenu",ue),e.domElement.removeEventListener("pointerdown",z),e.domElement.removeEventListener("pointercancel",Q),e.domElement.removeEventListener("wheel",W),e.domElement.removeEventListener("pointermove",j),e.domElement.removeEventListener("pointerup",B),window.removeEventListener("keydown",F),window.removeEventListener("keyup",U)},this.domElement.addEventListener("contextmenu",ue),this.domElement.addEventListener("pointerdown",z),this.domElement.addEventListener("pointercancel",Q),this.domElement.addEventListener("wheel",W,{passive:!1}),window.addEventListener("keydown",F),window.addEventListener("keyup",U),this.handleResize(),this.update()}}const gs={name:"TrackballControls",render:()=>null},It=d.defineComponent({...gs,props:{minDistance:{default:0},maxDistance:{default:1/0},panSpeed:{default:.3},rotateSpeed:{default:1},zoomSpeed:{default:1.2}},setup(c,{expose:n}){const t=c,e=d.ref(null);d.inject("addControls")(e);const s=d.inject("parentCamera"),i=d.inject("canvas");function o(){e.value!=null&&(e.value.rotateSpeed=t.rotateSpeed,e.value.zoomSpeed=t.zoomSpeed,e.value.panSpeed=t.panSpeed,e.value.minDistance=t.minDistance,e.value.maxDistance=t.maxDistance)}let r=!1;const l=()=>{if(!i.value||r)return;e.value=new ms(s,i.value),new ResizeObserver(h=>{h.forEach(f=>{var m;(m=e.value)==null||m.handleResize()})}).observe(i.value),o(),r=!0};return d.watch(i,()=>{l()}),o(),M(t,"panSpeed",o),M(t,"rotateSpeed",o),M(t,"zoomSpeed",o),M(t,"minDistance",o),M(t,"maxDistance",o),n({three:e}),{props:t,three:e,camera:s,canvas:i,applyProps:o,get boundCamera(){return r},set boundCamera(u){r=u},tryBindCamera:l}}}),we=new a.Raycaster,K=new a.Vector3,he=new a.Vector3,N=new a.Quaternion,kt={X:new a.Vector3(1,0,0),Y:new a.Vector3(0,1,0),Z:new a.Vector3(0,0,1)},at={type:"change"},jt={type:"mouseDown"},Dt={type:"mouseUp",mode:null},Gt={type:"objectChange"};class ys extends a.Object3D{constructor(n,t){super(),t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const e=new Ss;this._gizmo=e,this.add(e);const s=new Ts;this._plane=s,this.add(s);const i=this;function o(b,T){let A=T;Object.defineProperty(i,b,{get:function(){return A!==void 0?A:T},set:function(x){A!==x&&(A=x,s[b]=x,e[b]=x,i.dispatchEvent({type:b+"-changed",value:x}),i.dispatchEvent(at))}}),i[b]=T,s[b]=T,e[b]=T}o("camera",n),o("object",void 0),o("enabled",!0),o("axis",null),o("mode","translate"),o("translationSnap",null),o("rotationSnap",null),o("scaleSnap",null),o("space","world"),o("size",1),o("dragging",!1),o("showX",!0),o("showY",!0),o("showZ",!0);const r=new a.Vector3,l=new a.Vector3,u=new a.Quaternion,h=new a.Quaternion,f=new a.Vector3,m=new a.Quaternion,p=new a.Vector3,y=new a.Vector3,_=new a.Vector3,E=0,w=new a.Vector3;o("worldPosition",r),o("worldPositionStart",l),o("worldQuaternion",u),o("worldQuaternionStart",h),o("cameraPosition",f),o("cameraQuaternion",m),o("pointStart",p),o("pointEnd",y),o("rotationAxis",_),o("rotationAngle",E),o("eye",w),this._offset=new a.Vector3,this._startNorm=new a.Vector3,this._endNorm=new a.Vector3,this._cameraScale=new a.Vector3,this._parentPosition=new a.Vector3,this._parentQuaternion=new a.Quaternion,this._parentQuaternionInv=new a.Quaternion,this._parentScale=new a.Vector3,this._worldScaleStart=new a.Vector3,this._worldQuaternionInv=new a.Quaternion,this._worldScale=new a.Vector3,this._positionStart=new a.Vector3,this._quaternionStart=new a.Quaternion,this._scaleStart=new a.Vector3,this._getPointer=_s.bind(this),this._onPointerDown=Ms.bind(this),this._onPointerHover=ws.bind(this),this._onPointerMove=bs.bind(this),this._onPointerUp=Es.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(n){if(this.object===void 0||this.dragging===!0)return;we.setFromCamera(n,this.camera);const t=rt(this._gizmo.picker[this.mode],we);t?this.axis=t.object.name:this.axis=null}pointerDown(n){if(!(this.object===void 0||this.dragging===!0||n.button!==0)&&this.axis!==null){we.setFromCamera(n,this.camera);const t=rt(this._plane,we,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,jt.mode=this.mode,this.dispatchEvent(jt)}}pointerMove(n){const t=this.axis,e=this.mode,s=this.object;let i=this.space;if(e==="scale"?i="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(i="world"),s===void 0||t===null||this.dragging===!1||n.button!==-1)return;we.setFromCamera(n,this.camera);const o=rt(this._plane,we,!0);if(o){if(this.pointEnd.copy(o.point).sub(this.worldPositionStart),e==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),i==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),i==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),s.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(i==="local"&&(s.position.applyQuaternion(N.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.position.applyQuaternion(this._quaternionStart)),i==="world"&&(s.parent&&s.position.add(K.setFromMatrixPosition(s.parent.matrixWorld)),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.parent&&s.position.sub(K.setFromMatrixPosition(s.parent.matrixWorld))));else if(e==="scale"){if(t.search("XYZ")!==-1){let r=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(r*=-1),he.set(r,r,r)}else K.copy(this.pointStart),he.copy(this.pointEnd),K.applyQuaternion(this._worldQuaternionInv),he.applyQuaternion(this._worldQuaternionInv),he.divide(K),t.search("X")===-1&&(he.x=1),t.search("Y")===-1&&(he.y=1),t.search("Z")===-1&&(he.z=1);s.scale.copy(this._scaleStart).multiply(he),this.scaleSnap&&(t.search("X")!==-1&&(s.scale.x=Math.round(s.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(s.scale.y=Math.round(s.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(s.scale.z=Math.round(s.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(e==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const r=20/this.worldPosition.distanceTo(K.setFromMatrixPosition(this.camera.matrixWorld));t==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(K.copy(this.rotationAxis).cross(this.eye))*r):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(kt[t]),K.copy(kt[t]),i==="local"&&K.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(K.cross(this.eye).normalize())*r),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),i==="local"&&t!=="E"&&t!=="XYZE"?(s.quaternion.copy(this._quaternionStart),s.quaternion.multiply(N.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),s.quaternion.copy(N.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),s.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(at),this.dispatchEvent(Gt)}}pointerUp(n){n.button===0&&(this.dragging&&this.axis!==null&&(Dt.mode=this.mode,this.dispatchEvent(Dt)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(n){n.geometry&&n.geometry.dispose(),n.material&&n.material.dispose()})}attach(n){return this.object=n,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(at),this.dispatchEvent(Gt),this.pointStart.copy(this.pointEnd))}getRaycaster(){return we}getMode(){return this.mode}setMode(n){this.mode=n}setTranslationSnap(n){this.translationSnap=n}setRotationSnap(n){this.rotationSnap=n}setScaleSnap(n){this.scaleSnap=n}setSize(n){this.size=n}setSpace(n){this.space=n}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function _s(c){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:c.button};{const n=this.domElement.getBoundingClientRect();return{x:(c.clientX-n.left)/n.width*2-1,y:-(c.clientY-n.top)/n.height*2+1,button:c.button}}}function ws(c){if(this.enabled)switch(c.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(c));break}}function Ms(c){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(c.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(c)),this.pointerDown(this._getPointer(c)))}function bs(c){this.enabled&&this.pointerMove(this._getPointer(c))}function Es(c){this.enabled&&(this.domElement.releasePointerCapture(c.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(c)))}function rt(c,n,t){const e=n.intersectObject(c,!0);for(let s=0;s<e.length;s++)if(e[s].object.visible||t)return e[s];return!1}const $e=new a.Euler,G=new a.Vector3(0,1,0),Ht=new a.Vector3(0,0,0),Nt=new a.Matrix4,Xe=new a.Quaternion,Ye=new a.Quaternion,ae=new a.Vector3,Ft=new a.Matrix4,Pe=new a.Vector3(1,0,0),Me=new a.Vector3(0,1,0),ve=new a.Vector3(0,0,1),Ze=new a.Vector3,Oe=new a.Vector3,Ie=new a.Vector3;class Ss extends a.Object3D{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const n=new a.MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new a.LineBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=n.clone();e.opacity=.15;const s=t.clone();s.opacity=.5;const i=n.clone();i.color.setHex(16711680);const o=n.clone();o.color.setHex(65280);const r=n.clone();r.color.setHex(255);const l=n.clone();l.color.setHex(16711680),l.opacity=.5;const u=n.clone();u.color.setHex(65280),u.opacity=.5;const h=n.clone();h.color.setHex(255),h.opacity=.5;const f=n.clone();f.opacity=.25;const m=n.clone();m.color.setHex(16776960),m.opacity=.25,n.clone().color.setHex(16776960);const y=n.clone();y.color.setHex(7895160);const _=new a.CylinderGeometry(0,.04,.1,12);_.translate(0,.05,0);const E=new a.BoxGeometry(.08,.08,.08);E.translate(0,.04,0);const w=new a.BufferGeometry;w.setAttribute("position",new a.Float32BufferAttribute([0,0,0,1,0,0],3));const b=new a.CylinderGeometry(.0075,.0075,.5,3);b.translate(0,.25,0);function T(H,te){const Y=new a.TorusGeometry(H,.0075,3,64,te*Math.PI*2);return Y.rotateY(Math.PI/2),Y.rotateX(Math.PI/2),Y}function A(){const H=new a.BufferGeometry;return H.setAttribute("position",new a.Float32BufferAttribute([0,0,0,1,1,1],3)),H}const x={X:[[new a.Mesh(_,i),[.5,0,0],[0,0,-Math.PI/2]],[new a.Mesh(_,i),[-.5,0,0],[0,0,Math.PI/2]],[new a.Mesh(b,i),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new a.Mesh(_,o),[0,.5,0]],[new a.Mesh(_,o),[0,-.5,0],[Math.PI,0,0]],[new a.Mesh(b,o)]],Z:[[new a.Mesh(_,r),[0,0,.5],[Math.PI/2,0,0]],[new a.Mesh(_,r),[0,0,-.5],[-Math.PI/2,0,0]],[new a.Mesh(b,r),null,[Math.PI/2,0,0]]],XYZ:[[new a.Mesh(new a.OctahedronGeometry(.1,0),f.clone()),[0,0,0]]],XY:[[new a.Mesh(new a.BoxGeometry(.15,.15,.01),h.clone()),[.15,.15,0]]],YZ:[[new a.Mesh(new a.BoxGeometry(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new a.Mesh(new a.BoxGeometry(.15,.15,.01),u.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},O={X:[[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[.3,0,0],[0,0,-Math.PI/2]],[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,.3,0]],[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,-.3,0],[0,0,Math.PI]]],Z:[[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,0,.3],[Math.PI/2,0,0]],[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new a.Mesh(new a.OctahedronGeometry(.2,0),e)]],XY:[[new a.Mesh(new a.BoxGeometry(.2,.2,.01),e),[.15,.15,0]]],YZ:[[new a.Mesh(new a.BoxGeometry(.2,.2,.01),e),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new a.Mesh(new a.BoxGeometry(.2,.2,.01),e),[.15,0,.15],[-Math.PI/2,0,0]]]},D={START:[[new a.Mesh(new a.OctahedronGeometry(.01,2),s),null,null,null,"helper"]],END:[[new a.Mesh(new a.OctahedronGeometry(.01,2),s),null,null,null,"helper"]],DELTA:[[new a.Line(A(),s),null,null,null,"helper"]],X:[[new a.Line(w,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new a.Line(w,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new a.Line(w,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},k={XYZE:[[new a.Mesh(T(.5,1),y),null,[0,Math.PI/2,0]]],X:[[new a.Mesh(T(.5,.5),i)]],Y:[[new a.Mesh(T(.5,.5),o),null,[0,0,-Math.PI/2]]],Z:[[new a.Mesh(T(.5,.5),r),null,[0,Math.PI/2,0]]],E:[[new a.Mesh(T(.75,1),m),null,[0,Math.PI/2,0]]]},z={AXIS:[[new a.Line(w,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},j={XYZE:[[new a.Mesh(new a.SphereGeometry(.25,10,8),e)]],X:[[new a.Mesh(new a.TorusGeometry(.5,.1,4,24),e),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new a.Mesh(new a.TorusGeometry(.5,.1,4,24),e),[0,0,0],[Math.PI/2,0,0]]],Z:[[new a.Mesh(new a.TorusGeometry(.5,.1,4,24),e),[0,0,0],[0,0,-Math.PI/2]]],E:[[new a.Mesh(new a.TorusGeometry(.75,.1,2,24),e)]]},B={X:[[new a.Mesh(E,i),[.5,0,0],[0,0,-Math.PI/2]],[new a.Mesh(b,i),[0,0,0],[0,0,-Math.PI/2]],[new a.Mesh(E,i),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new a.Mesh(E,o),[0,.5,0]],[new a.Mesh(b,o)],[new a.Mesh(E,o),[0,-.5,0],[0,0,Math.PI]]],Z:[[new a.Mesh(E,r),[0,0,.5],[Math.PI/2,0,0]],[new a.Mesh(b,r),[0,0,0],[Math.PI/2,0,0]],[new a.Mesh(E,r),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new a.Mesh(new a.BoxGeometry(.15,.15,.01),h),[.15,.15,0]]],YZ:[[new a.Mesh(new a.BoxGeometry(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new a.Mesh(new a.BoxGeometry(.15,.15,.01),u),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new a.Mesh(new a.BoxGeometry(.1,.1,.1),f.clone())]]},Q={X:[[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[.3,0,0],[0,0,-Math.PI/2]],[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,.3,0]],[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,-.3,0],[0,0,Math.PI]]],Z:[[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,0,.3],[Math.PI/2,0,0]],[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new a.Mesh(new a.BoxGeometry(.2,.2,.01),e),[.15,.15,0]]],YZ:[[new a.Mesh(new a.BoxGeometry(.2,.2,.01),e),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new a.Mesh(new a.BoxGeometry(.2,.2,.01),e),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new a.Mesh(new a.BoxGeometry(.2,.2,.2),e),[0,0,0]]]},F={X:[[new a.Line(w,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new a.Line(w,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new a.Line(w,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function U(H){const te=new a.Object3D;for(const Y in H)for(let W=H[Y].length;W--;){const $=H[Y][W][0].clone(),me=H[Y][W][1],ge=H[Y][W][2],ue=H[Y][W][3],Ge=H[Y][W][4];$.name=Y,$.tag=Ge,me&&$.position.set(me[0],me[1],me[2]),ge&&$.rotation.set(ge[0],ge[1],ge[2]),ue&&$.scale.set(ue[0],ue[1],ue[2]),$.updateMatrix();const ye=$.geometry.clone();ye.applyMatrix4($.matrix),$.geometry=ye,$.renderOrder=1/0,$.position.set(0,0,0),$.rotation.set(0,0,0),$.scale.set(1,1,1),te.add($)}return te}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=U(x)),this.add(this.gizmo.rotate=U(k)),this.add(this.gizmo.scale=U(B)),this.add(this.picker.translate=U(O)),this.add(this.picker.rotate=U(j)),this.add(this.picker.scale=U(Q)),this.add(this.helper.translate=U(D)),this.add(this.helper.rotate=U(z)),this.add(this.helper.scale=U(F)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(n){const e=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:Ye;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let s=[];s=s.concat(this.picker[this.mode].children),s=s.concat(this.gizmo[this.mode].children),s=s.concat(this.helper[this.mode].children);for(let i=0;i<s.length;i++){const o=s[i];o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition);let r;if(this.camera.isOrthographicCamera?r=(this.camera.top-this.camera.bottom)/this.camera.zoom:r=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(r*this.size/4),o.tag==="helper"){o.visible=!1,o.name==="AXIS"?(o.position.copy(this.worldPositionStart),o.visible=!!this.axis,this.axis==="X"&&(N.setFromEuler($e.set(0,0,0)),o.quaternion.copy(e).multiply(N),Math.abs(G.copy(Pe).applyQuaternion(e).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Y"&&(N.setFromEuler($e.set(0,0,Math.PI/2)),o.quaternion.copy(e).multiply(N),Math.abs(G.copy(Me).applyQuaternion(e).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Z"&&(N.setFromEuler($e.set(0,Math.PI/2,0)),o.quaternion.copy(e).multiply(N),Math.abs(G.copy(ve).applyQuaternion(e).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="XYZE"&&(N.setFromEuler($e.set(0,Math.PI/2,0)),G.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(Nt.lookAt(Ht,G,Me)),o.quaternion.multiply(N),o.visible=this.dragging),this.axis==="E"&&(o.visible=!1)):o.name==="START"?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):o.name==="END"?(o.position.copy(this.worldPosition),o.visible=this.dragging):o.name==="DELTA"?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),K.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),K.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(K),o.visible=this.dragging):(o.quaternion.copy(e),this.dragging?o.position.copy(this.worldPositionStart):o.position.copy(this.worldPosition),this.axis&&(o.visible=this.axis.search(o.name)!==-1));continue}o.quaternion.copy(e),this.mode==="translate"||this.mode==="scale"?(o.name==="X"&&Math.abs(G.copy(Pe).applyQuaternion(e).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Y"&&Math.abs(G.copy(Me).applyQuaternion(e).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Z"&&Math.abs(G.copy(ve).applyQuaternion(e).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XY"&&Math.abs(G.copy(ve).applyQuaternion(e).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="YZ"&&Math.abs(G.copy(Pe).applyQuaternion(e).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XZ"&&Math.abs(G.copy(Me).applyQuaternion(e).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):this.mode==="rotate"&&(Xe.copy(e),G.copy(this.eye).applyQuaternion(N.copy(e).invert()),o.name.search("E")!==-1&&o.quaternion.setFromRotationMatrix(Nt.lookAt(this.eye,Ht,Me)),o.name==="X"&&(N.setFromAxisAngle(Pe,Math.atan2(-G.y,G.z)),N.multiplyQuaternions(Xe,N),o.quaternion.copy(N)),o.name==="Y"&&(N.setFromAxisAngle(Me,Math.atan2(G.x,G.z)),N.multiplyQuaternions(Xe,N),o.quaternion.copy(N)),o.name==="Z"&&(N.setFromAxisAngle(ve,Math.atan2(G.y,G.x)),N.multiplyQuaternions(Xe,N),o.quaternion.copy(N))),o.visible=o.visible&&(o.name.indexOf("X")===-1||this.showX),o.visible=o.visible&&(o.name.indexOf("Y")===-1||this.showY),o.visible=o.visible&&(o.name.indexOf("Z")===-1||this.showZ),o.visible=o.visible&&(o.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis||this.axis.split("").some(function(l){return o.name===l}))&&(o.material.color.setHex(16776960),o.material.opacity=1)}super.updateMatrixWorld(n)}}class Ts extends a.Mesh{constructor(){super(new a.PlaneGeometry(1e5,1e5,2,2),new a.MeshBasicMaterial({visible:!1,wireframe:!0,side:a.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(n){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),Ze.copy(Pe).applyQuaternion(t==="local"?this.worldQuaternion:Ye),Oe.copy(Me).applyQuaternion(t==="local"?this.worldQuaternion:Ye),Ie.copy(ve).applyQuaternion(t==="local"?this.worldQuaternion:Ye),G.copy(Oe),this.mode){case"translate":case"scale":switch(this.axis){case"X":G.copy(this.eye).cross(Ze),ae.copy(Ze).cross(G);break;case"Y":G.copy(this.eye).cross(Oe),ae.copy(Oe).cross(G);break;case"Z":G.copy(this.eye).cross(Ie),ae.copy(Ie).cross(G);break;case"XY":ae.copy(Ie);break;case"YZ":ae.copy(Ze);break;case"XZ":G.copy(Ie),ae.copy(Oe);break;case"XYZ":case"E":ae.set(0,0,0);break}break;case"rotate":default:ae.set(0,0,0)}ae.length()===0?this.quaternion.copy(this.cameraQuaternion):(Ft.lookAt(K.set(0,0,0),ae,G),this.quaternion.setFromRotationMatrix(Ft)),super.updateMatrixWorld(n)}}const xs={name:"TransformControls",render:()=>null},Bt=d.defineComponent({...xs,props:{mode:{default:"translate"},position:null,rotationSnap:{default:null},showX:{type:Boolean,default:!0},showY:{type:Boolean,default:!0},showZ:{type:Boolean,default:!0},size:{default:1},translationSnap:{default:null}},setup(c,{expose:n}){const t=c,e=d.shallowRef(null),s=d.inject("scene"),i=d.inject("mesh",null),o=d.inject("parent",void 0),r=d.inject("camera"),l=d.inject("canvas"),u=d.inject("enableAllControls"),h=d.inject("disableAllControls");function f(){e.value!=null&&(e.value.mode=t.mode,e.value.size=t.size,e.value.showX=t.showX,e.value.showY=t.showY,e.value.showZ=t.showZ,e.value.translationSnap=t.translationSnap,e.value.rotationSnap=t.rotationSnap)}let m=!1;const p=()=>{!l.value&&!r.value||m||(e.value=new ys(r.value,l.value),R(t,"position",e.value),i?e.value.attach(i):o&&e.value.attach(o),e.value.addEventListener("dragging-changed",function(y){y.value?h():u()}),s.add(e.value),f(),m=!0)};return d.watch(l,()=>{p()},{immediate:!0}),f(),M(t,"mode",f),M(t,"size",f),M(t,"showX",f),M(t,"showY",f),M(t,"showZ",f),M(t,"rotationSnap",f),M(t,"translationSnap",f),d.onUnmounted(()=>{s.remove(e.value),oe(e.value)}),n({three:e}),{props:t,three:e,scene:s,mesh:i,parent:o,camera:r,canvas:l,enableAllControls:u,disableAllControls:h,applyProps:f,get boundCamera(){return m},set boundCamera(y){m=y},tryBindCamera:p}}}),Ut=d.defineComponent({__name:"Group",props:{enableRaycasting:{type:Boolean,default:!1},onClick:{type:Function,default:()=>null},onMouseMove:{type:Function,default:()=>null},onMouseEnter:{type:Function,default:()=>null},onMouseLeave:{type:Function,default:()=>null},position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=new a.Group;return ie(e),R(t,"position",e),R(t,"rotation",e),R(t,"scale",e),Je(e.children,t),d.provide("parent",e),n({three:e}),(s,i)=>d.renderSlot(s.$slots,"default")}}),Vt=d.defineComponent({__name:"InstancedMesh",props:{castShadow:{type:Boolean,default:!1},count:null,geometry:{default:null},material:{default:null},receiveShadow:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=d.inject("scene"),s=new a.BufferGeometry,i=new a.MeshBasicMaterial,o=new a.InstancedMesh(s,i,t.count);o.castShadow=!0,o.receiveShadow=!0,ie(o);function r(){o.castShadow=t.castShadow,o.receiveShadow=t.receiveShadow}r(),M(t,"castShadow",r),M(t,"receiveShadow",r);const l=d.inject("getGeometry"),u=d.inject("getMaterial");return d.onMounted(()=>{if(t.geometry){const h=l(t.geometry);o.geometry=h}if(t.material){const h=u(t.material);o.material=h}}),d.onUnmounted(()=>{e.remove(o),oe(o)}),d.provide("mesh",o),n({three:o}),(h,f)=>d.renderSlot(h.$slots,"default")}}),zt=d.defineComponent({__name:"Line",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=d.inject("scene"),s=new a.BufferGeometry,i=new a.LineBasicMaterial({color:"black"}),o=new a.Line(s,i);return ie(o),R(t,"position",o),R(t,"rotation",o),R(t,"scale",o),d.onUnmounted(()=>{e.remove(o),oe(o)}),d.provide("mesh",o),n({three:o}),(r,l)=>d.renderSlot(r.$slots,"default")}}),$t=d.defineComponent({__name:"LineLoop",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=d.inject("scene"),s=new a.BufferGeometry,i=new a.LineBasicMaterial({color:"black"}),o=new a.LineLoop(s,i);return ie(o),R(t,"position",o),R(t,"rotation",o),R(t,"scale",o),d.onUnmounted(()=>{e.remove(o),oe(o)}),d.provide("mesh",o),n({three:o}),(r,l)=>d.renderSlot(r.$slots,"default")}}),Xt=d.defineComponent({__name:"LineSegments",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=d.inject("scene"),s=new a.BufferGeometry,i=new a.LineBasicMaterial({color:"black"}),o=new a.LineSegments(s,i);return ie(o),R(t,"position",o),R(t,"rotation",o),R(t,"scale",o),d.onUnmounted(()=>{e.remove(o),oe(o)}),d.provide("mesh",o),n({three:o}),(r,l)=>d.renderSlot(r.$slots,"default")}}),Yt=d.defineComponent({__name:"Mesh",props:{castShadow:{type:Boolean,default:!1},geometry:{default:null},material:{default:null},name:{default:""},position:{default:()=>[0,0,0]},receiveShadow:{type:Boolean,default:!1},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=d.inject("scene"),s=new a.BufferGeometry,i=new a.MeshBasicMaterial,o=new a.Mesh(s,i);o.castShadow=!0,o.receiveShadow=!0,ie(o),R(t,"position",o),R(t,"rotation",o),R(t,"scale",o),M(t,"position",()=>{I.object3DTranslated(t.name,o)}),M(t,"rotation",()=>{I.object3DTranslated(t.name,o)}),M(t,"scale",()=>{I.object3DTranslated(t.name,o)});function r(){o.name=t.name,o.castShadow=t.castShadow,o.receiveShadow=t.receiveShadow}r(),M(t,"castShadow",r),M(t,"receiveShadow",r);const l=d.inject("getGeometry"),u=d.inject("getMaterial");return d.onMounted(()=>{if(t.geometry){const h=l(t.geometry);o.geometry=h}if(t.material){const h=u(t.material);o.material=h}I.object3DChanged(t.name,o)}),d.onUnmounted(()=>{e.remove(o),oe(o)}),d.provide("mesh",o),n({three:o}),(h,f)=>d.renderSlot(h.$slots,"default")}}),Zt=d.defineComponent({__name:"Points",props:{name:{default:""},position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=d.inject("scene"),s=new a.BufferGeometry,i=new a.PointsMaterial({color:"red",sizeAttenuation:!1,size:2}),o=new a.Points(s,i);ie(o),R(t,"position",o),R(t,"rotation",o),R(t,"scale",o),M(t,"position",()=>{I.object3DTranslated(t.name,o)}),M(t,"rotation",()=>{I.object3DTranslated(t.name,o)}),M(t,"scale",()=>{I.object3DTranslated(t.name,o)});function r(){o.name=t.name}return r(),d.onMounted(()=>{I.object3DChanged(t.name,o)}),d.onUnmounted(()=>{e.remove(o),oe(o)}),d.provide("mesh",o),n({three:o}),(l,u)=>d.renderSlot(l.$slots,"default")}});class As extends a.Loader{constructor(n){super(n),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new vs(t)}),this.register(function(t){return new Hs(t)}),this.register(function(t){return new Ns(t)}),this.register(function(t){return new Is(t)}),this.register(function(t){return new ks(t)}),this.register(function(t){return new js(t)}),this.register(function(t){return new Ds(t)}),this.register(function(t){return new Ps(t)}),this.register(function(t){return new Gs(t)}),this.register(function(t){return new Os(t)}),this.register(function(t){return new Ls(t)}),this.register(function(t){return new Fs(t)})}load(n,t,e,s){const i=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=a.LoaderUtils.extractUrlBase(n),this.manager.itemStart(n);const r=function(u){s?s(u):console.error(u),i.manager.itemError(n),i.manager.itemEnd(n)},l=new a.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(n,function(u){try{i.parse(u,o,function(h){t(h),i.manager.itemEnd(n)},r)}catch(h){r(h)}},e,r)}setDRACOLoader(n){return this.dracoLoader=n,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(n){return this.ktx2Loader=n,this}setMeshoptDecoder(n){return this.meshoptDecoder=n,this}register(n){return this.pluginCallbacks.indexOf(n)===-1&&this.pluginCallbacks.push(n),this}unregister(n){return this.pluginCallbacks.indexOf(n)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(n),1),this}parse(n,t,e,s){let i;const o={},r={};if(typeof n=="string")i=n;else if(a.LoaderUtils.decodeText(new Uint8Array(n,0,4))===qt){try{o[v.KHR_BINARY_GLTF]=new Bs(n)}catch(f){s&&s(f);return}i=o[v.KHR_BINARY_GLTF].content}else i=a.LoaderUtils.decodeText(new Uint8Array(n));const l=JSON.parse(i);if(l.asset===void 0||l.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new eo(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const f=this.pluginCallbacks[h](u);r[f.name]=f,o[f.name]=!0}if(l.extensionsUsed)for(let h=0;h<l.extensionsUsed.length;++h){const f=l.extensionsUsed[h],m=l.extensionsRequired||[];switch(f){case v.KHR_MATERIALS_UNLIT:o[f]=new Rs;break;case v.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[f]=new zs;break;case v.KHR_DRACO_MESH_COMPRESSION:o[f]=new Us(l,this.dracoLoader);break;case v.KHR_TEXTURE_TRANSFORM:o[f]=new Vs;break;case v.KHR_MESH_QUANTIZATION:o[f]=new $s;break;default:m.indexOf(f)>=0&&r[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}u.setExtensions(o),u.setPlugins(r),u.parse(e,s)}parseAsync(n,t){const e=this;return new Promise(function(s,i){e.parse(n,t,s,i)})}}function Cs(){let c={};return{get:function(n){return c[n]},add:function(n,t){c[n]=t},remove:function(n){delete c[n]},removeAll:function(){c={}}}}const v={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class Ls{constructor(n){this.parser=n,this.name=v.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const n=this.parser,t=this.parser.json.nodes||[];for(let e=0,s=t.length;e<s;e++){const i=t[e];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&n._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(n){const t=this.parser,e="light:"+n;let s=t.cache.get(e);if(s)return s;const i=t.json,l=((i.extensions&&i.extensions[this.name]||{}).lights||[])[n];let u;const h=new a.Color(16777215);l.color!==void 0&&h.fromArray(l.color);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new a.DirectionalLight(h),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new a.PointLight(h),u.distance=f;break;case"spot":u=new a.SpotLight(h),u.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+n),s=Promise.resolve(u),t.cache.add(e,s),s}createNodeAttachment(n){const t=this,e=this.parser,i=e.json.nodes[n],r=(i.extensions&&i.extensions[this.name]||{}).light;return r===void 0?null:this._loadLight(r).then(function(l){return e._getNodeRef(t.cache,r,l)})}}class Rs{constructor(){this.name=v.KHR_MATERIALS_UNLIT}getMaterialType(){return a.MeshBasicMaterial}extendParams(n,t,e){const s=[];n.color=new a.Color(1,1,1),n.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const o=i.baseColorFactor;n.color.fromArray(o),n.opacity=o[3]}i.baseColorTexture!==void 0&&s.push(e.assignTexture(n,"map",i.baseColorTexture,a.sRGBEncoding))}return Promise.all(s)}}class Ps{constructor(n){this.parser=n,this.name=v.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(n,t){const s=this.parser.json.materials[n];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=s.extensions[this.name].emissiveStrength;return i!==void 0&&(t.emissiveIntensity=i),Promise.resolve()}}class vs{constructor(n){this.parser=n,this.name=v.KHR_MATERIALS_CLEARCOAT}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:a.MeshPhysicalMaterial}extendMaterialParams(n,t){const e=this.parser,s=e.json.materials[n];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&i.push(e.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&i.push(e.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(i.push(e.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const r=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new a.Vector2(r,r)}return Promise.all(i)}}class Os{constructor(n){this.parser=n,this.name=v.KHR_MATERIALS_IRIDESCENCE}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:a.MeshPhysicalMaterial}extendMaterialParams(n,t){const e=this.parser,s=e.json.materials[n];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&i.push(e.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&i.push(e.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(i)}}class Is{constructor(n){this.parser=n,this.name=v.KHR_MATERIALS_SHEEN}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:a.MeshPhysicalMaterial}extendMaterialParams(n,t){const e=this.parser,s=e.json.materials[n];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new a.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&i.push(e.assignTexture(t,"sheenColorMap",o.sheenColorTexture,a.sRGBEncoding)),o.sheenRoughnessTexture!==void 0&&i.push(e.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(i)}}class ks{constructor(n){this.parser=n,this.name=v.KHR_MATERIALS_TRANSMISSION}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:a.MeshPhysicalMaterial}extendMaterialParams(n,t){const e=this.parser,s=e.json.materials[n];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&i.push(e.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class js{constructor(n){this.parser=n,this.name=v.KHR_MATERIALS_VOLUME}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:a.MeshPhysicalMaterial}extendMaterialParams(n,t){const e=this.parser,s=e.json.materials[n];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],o=s.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&i.push(e.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const r=o.attenuationColor||[1,1,1];return t.attenuationColor=new a.Color(r[0],r[1],r[2]),Promise.all(i)}}class Ds{constructor(n){this.parser=n,this.name=v.KHR_MATERIALS_IOR}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:a.MeshPhysicalMaterial}extendMaterialParams(n,t){const s=this.parser.json.materials[n];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=s.extensions[this.name];return t.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class Gs{constructor(n){this.parser=n,this.name=v.KHR_MATERIALS_SPECULAR}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:a.MeshPhysicalMaterial}extendMaterialParams(n,t){const e=this.parser,s=e.json.materials[n];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],o=s.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&i.push(e.assignTexture(t,"specularIntensityMap",o.specularTexture));const r=o.specularColorFactor||[1,1,1];return t.specularColor=new a.Color(r[0],r[1],r[2]),o.specularColorTexture!==void 0&&i.push(e.assignTexture(t,"specularColorMap",o.specularColorTexture,a.sRGBEncoding)),Promise.all(i)}}class Hs{constructor(n){this.parser=n,this.name=v.KHR_TEXTURE_BASISU}loadTexture(n){const t=this.parser,e=t.json,s=e.textures[n];if(!s.extensions||!s.extensions[this.name])return null;const i=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(n,i.source,o)}}class Ns{constructor(n){this.parser=n,this.name=v.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(n){const t=this.name,e=this.parser,s=e.json,i=s.textures[n];if(!i.extensions||!i.extensions[t])return null;const o=i.extensions[t],r=s.images[o.source];let l=e.textureLoader;if(r.uri){const u=e.options.manager.getHandler(r.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return e.loadTextureImage(n,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return e.loadTexture(n)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(n){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){n(t.height===1)}})),this.isSupported}}class Fs{constructor(n){this.name=v.EXT_MESHOPT_COMPRESSION,this.parser=n}loadBufferView(n){const t=this.parser.json,e=t.bufferViews[n];if(e.extensions&&e.extensions[this.name]){const s=e.extensions[this.name],i=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,o.ready]).then(function(r){const l=s.byteOffset||0,u=s.byteLength||0,h=s.count,f=s.byteStride,m=new ArrayBuffer(h*f),p=new Uint8Array(r[0],l,u);return o.decodeGltfBuffer(new Uint8Array(m),h,f,p,s.mode,s.filter),m})}else return null}}const qt="glTF",ke=12,Kt={JSON:1313821514,BIN:5130562};class Bs{constructor(n){this.name=v.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(n,0,ke);if(this.header={magic:a.LoaderUtils.decodeText(new Uint8Array(n.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==qt)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const e=this.header.length-ke,s=new DataView(n,ke);let i=0;for(;i<e;){const o=s.getUint32(i,!0);i+=4;const r=s.getUint32(i,!0);if(i+=4,r===Kt.JSON){const l=new Uint8Array(n,ke+i,o);this.content=a.LoaderUtils.decodeText(l)}else if(r===Kt.BIN){const l=ke+i;this.body=n.slice(l,l+o)}i+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Us{constructor(n,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=v.KHR_DRACO_MESH_COMPRESSION,this.json=n,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(n,t){const e=this.json,s=this.dracoLoader,i=n.extensions[this.name].bufferView,o=n.extensions[this.name].attributes,r={},l={},u={};for(const h in o){const f=ut[h]||h.toLowerCase();r[f]=o[h]}for(const h in n.attributes){const f=ut[h]||h.toLowerCase();if(o[h]!==void 0){const m=e.accessors[n.attributes[h]],p=je[m.componentType];u[f]=p,l[f]=m.normalized===!0}}return t.getDependency("bufferView",i).then(function(h){return new Promise(function(f){s.decodeDracoFile(h,function(m){for(const p in m.attributes){const y=m.attributes[p],_=l[p];_!==void 0&&(y.normalized=_)}f(m)},r,u)})})}}class Vs{constructor(){this.name=v.KHR_TEXTURE_TRANSFORM}extendTexture(n,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(n=n.clone(),t.offset!==void 0&&n.offset.fromArray(t.offset),t.rotation!==void 0&&(n.rotation=t.rotation),t.scale!==void 0&&n.repeat.fromArray(t.scale),n.needsUpdate=!0),n}}class ct extends a.MeshStandardMaterial{constructor(n){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),e=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),s=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),r={specular:{value:new a.Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=r,this.onBeforeCompile=function(l){for(const u in r)l.uniforms[u]=r[u];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",e).replace("#include <roughnessmap_fragment>",s).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return r.specular.value},set:function(l){r.specular.value=l}},specularMap:{get:function(){return r.specularMap.value},set:function(l){r.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return r.glossiness.value},set:function(l){r.glossiness.value=l}},glossinessMap:{get:function(){return r.glossinessMap.value},set:function(l){r.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(n)}copy(n){return super.copy(n),this.specularMap=n.specularMap,this.specular.copy(n.specular),this.glossinessMap=n.glossinessMap,this.glossiness=n.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class zs{constructor(){this.name=v.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return ct}extendParams(n,t,e){const s=t.extensions[this.name];n.color=new a.Color(1,1,1),n.opacity=1;const i=[];if(Array.isArray(s.diffuseFactor)){const o=s.diffuseFactor;n.color.fromArray(o),n.opacity=o[3]}if(s.diffuseTexture!==void 0&&i.push(e.assignTexture(n,"map",s.diffuseTexture,a.sRGBEncoding)),n.emissive=new a.Color(0,0,0),n.glossiness=s.glossinessFactor!==void 0?s.glossinessFactor:1,n.specular=new a.Color(1,1,1),Array.isArray(s.specularFactor)&&n.specular.fromArray(s.specularFactor),s.specularGlossinessTexture!==void 0){const o=s.specularGlossinessTexture;i.push(e.assignTexture(n,"glossinessMap",o)),i.push(e.assignTexture(n,"specularMap",o,a.sRGBEncoding))}return Promise.all(i)}createMaterial(n){const t=new ct(n);return t.fog=!0,t.color=n.color,t.map=n.map===void 0?null:n.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=n.aoMap===void 0?null:n.aoMap,t.aoMapIntensity=1,t.emissive=n.emissive,t.emissiveIntensity=n.emissiveIntensity===void 0?1:n.emissiveIntensity,t.emissiveMap=n.emissiveMap===void 0?null:n.emissiveMap,t.bumpMap=n.bumpMap===void 0?null:n.bumpMap,t.bumpScale=1,t.normalMap=n.normalMap===void 0?null:n.normalMap,t.normalMapType=a.TangentSpaceNormalMap,n.normalScale&&(t.normalScale=n.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=n.specularMap===void 0?null:n.specularMap,t.specular=n.specular,t.glossinessMap=n.glossinessMap===void 0?null:n.glossinessMap,t.glossiness=n.glossiness,t.alphaMap=null,t.envMap=n.envMap===void 0?null:n.envMap,t.envMapIntensity=1,t}}class $s{constructor(){this.name=v.KHR_MESH_QUANTIZATION}}class lt extends a.Interpolant{constructor(n,t,e,s){super(n,t,e,s)}copySampleValue_(n){const t=this.resultBuffer,e=this.sampleValues,s=this.valueSize,i=n*s*3+s;for(let o=0;o!==s;o++)t[o]=e[i+o];return t}}lt.prototype.interpolate_=function(c,n,t,e){const s=this.resultBuffer,i=this.sampleValues,o=this.valueSize,r=o*2,l=o*3,u=e-n,h=(t-n)/u,f=h*h,m=f*h,p=c*l,y=p-l,_=-2*m+3*f,E=m-f,w=1-_,b=E-f+h;for(let T=0;T!==o;T++){const A=i[y+T+o],x=i[y+T+r]*u,O=i[p+T+o],D=i[p+T]*u;s[T]=w*A+b*x+_*O+E*D}return s};const Xs=new a.Quaternion;class Ys extends lt{interpolate_(n,t,e,s){const i=super.interpolate_(n,t,e,s);return Xs.fromArray(i).normalize().toArray(i),i}}const le={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},je={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Qt={9728:a.NearestFilter,9729:a.LinearFilter,9984:a.NearestMipmapNearestFilter,9985:a.LinearMipmapNearestFilter,9986:a.NearestMipmapLinearFilter,9987:a.LinearMipmapLinearFilter},Wt={33071:a.ClampToEdgeWrapping,33648:a.MirroredRepeatWrapping,10497:a.RepeatWrapping},Jt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ut={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},pe={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Zs={CUBICSPLINE:void 0,LINEAR:a.InterpolateLinear,STEP:a.InterpolateDiscrete},dt={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function qs(c){return c.DefaultMaterial===void 0&&(c.DefaultMaterial=new a.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:a.FrontSide})),c.DefaultMaterial}function De(c,n,t){for(const e in t.extensions)c[e]===void 0&&(n.userData.gltfExtensions=n.userData.gltfExtensions||{},n.userData.gltfExtensions[e]=t.extensions[e])}function be(c,n){n.extras!==void 0&&(typeof n.extras=="object"?Object.assign(c.userData,n.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+n.extras))}function Ks(c,n,t){let e=!1,s=!1,i=!1;for(let u=0,h=n.length;u<h;u++){const f=n[u];if(f.POSITION!==void 0&&(e=!0),f.NORMAL!==void 0&&(s=!0),f.COLOR_0!==void 0&&(i=!0),e&&s&&i)break}if(!e&&!s&&!i)return Promise.resolve(c);const o=[],r=[],l=[];for(let u=0,h=n.length;u<h;u++){const f=n[u];if(e){const m=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):c.attributes.position;o.push(m)}if(s){const m=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):c.attributes.normal;r.push(m)}if(i){const m=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):c.attributes.color;l.push(m)}}return Promise.all([Promise.all(o),Promise.all(r),Promise.all(l)]).then(function(u){const h=u[0],f=u[1],m=u[2];return e&&(c.morphAttributes.position=h),s&&(c.morphAttributes.normal=f),i&&(c.morphAttributes.color=m),c.morphTargetsRelative=!0,c})}function Qs(c,n){if(c.updateMorphTargets(),n.weights!==void 0)for(let t=0,e=n.weights.length;t<e;t++)c.morphTargetInfluences[t]=n.weights[t];if(n.extras&&Array.isArray(n.extras.targetNames)){const t=n.extras.targetNames;if(c.morphTargetInfluences.length===t.length){c.morphTargetDictionary={};for(let e=0,s=t.length;e<s;e++)c.morphTargetDictionary[t[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Ws(c){const n=c.extensions&&c.extensions[v.KHR_DRACO_MESH_COMPRESSION];let t;return n?t="draco:"+n.bufferView+":"+n.indices+":"+en(n.attributes):t=c.indices+":"+en(c.attributes)+":"+c.mode,t}function en(c){let n="";const t=Object.keys(c).sort();for(let e=0,s=t.length;e<s;e++)n+=t[e]+":"+c[t[e]]+";";return n}function ft(c){switch(c){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Js(c){return c.search(/\.jpe?g($|\?)/i)>0||c.search(/^data\:image\/jpeg/)===0?"image/jpeg":c.search(/\.webp($|\?)/i)>0||c.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class eo{constructor(n={},t={}){this.json=n,this.extensions={},this.plugins={},this.options=t,this.cache=new Cs,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,i=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||e||s&&i<98?this.textureLoader=new a.TextureLoader(this.options.manager):this.textureLoader=new a.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new a.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(n){this.extensions=n}setPlugins(n){this.plugins=n}parse(n,t){const e=this,s=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([e.getDependencies("scene"),e.getDependencies("animation"),e.getDependencies("camera")])}).then(function(o){const r={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:e,userData:{}};De(i,r,s),be(r,s),Promise.all(e._invokeAll(function(l){return l.afterRoot&&l.afterRoot(r)})).then(function(){n(r)})}).catch(t)}_markDefs(){const n=this.json.nodes||[],t=this.json.skins||[],e=this.json.meshes||[];for(let s=0,i=t.length;s<i;s++){const o=t[s].joints;for(let r=0,l=o.length;r<l;r++)n[o[r]].isBone=!0}for(let s=0,i=n.length;s<i;s++){const o=n[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(e[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(n,t){t!==void 0&&(n.refs[t]===void 0&&(n.refs[t]=n.uses[t]=0),n.refs[t]++)}_getNodeRef(n,t,e){if(n.refs[t]<=1)return e;const s=e.clone(),i=(o,r)=>{const l=this.associations.get(o);l!=null&&this.associations.set(r,l);for(const[u,h]of o.children.entries())i(h,r.children[u])};return i(e,s),s.name+="_instance_"+n.uses[t]++,s}_invokeOne(n){const t=Object.values(this.plugins);t.push(this);for(let e=0;e<t.length;e++){const s=n(t[e]);if(s)return s}return null}_invokeAll(n){const t=Object.values(this.plugins);t.unshift(this);const e=[];for(let s=0;s<t.length;s++){const i=n(t[s]);i&&e.push(i)}return e}getDependency(n,t){const e=n+":"+t;let s=this.cache.get(e);if(!s){switch(n){case"scene":s=this.loadScene(t);break;case"node":s=this.loadNode(t);break;case"mesh":s=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:throw new Error("Unknown type: "+n)}this.cache.add(e,s)}return s}getDependencies(n){let t=this.cache.get(n);if(!t){const e=this,s=this.json[n+(n==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(i,o){return e.getDependency(n,o)})),this.cache.add(n,t)}return t}loadBuffer(n){const t=this.json.buffers[n],e=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&n===0)return Promise.resolve(this.extensions[v.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(i,o){e.load(a.LoaderUtils.resolveURL(t.uri,s.path),i,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(n){const t=this.json.bufferViews[n];return this.getDependency("buffer",t.buffer).then(function(e){const s=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+s)})}loadAccessor(n){const t=this,e=this.json,s=this.json.accessors[n];if(s.bufferView===void 0&&s.sparse===void 0)return Promise.resolve(null);const i=[];return s.bufferView!==void 0?i.push(this.getDependency("bufferView",s.bufferView)):i.push(null),s.sparse!==void 0&&(i.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(i).then(function(o){const r=o[0],l=Jt[s.type],u=je[s.componentType],h=u.BYTES_PER_ELEMENT,f=h*l,m=s.byteOffset||0,p=s.bufferView!==void 0?e.bufferViews[s.bufferView].byteStride:void 0,y=s.normalized===!0;let _,E;if(p&&p!==f){const w=Math.floor(m/p),b="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+w+":"+s.count;let T=t.cache.get(b);T||(_=new u(r,w*p,s.count*p/h),T=new a.InterleavedBuffer(_,p/h),t.cache.add(b,T)),E=new a.InterleavedBufferAttribute(T,l,m%p/h,y)}else r===null?_=new u(s.count*l):_=new u(r,m,s.count*l),E=new a.BufferAttribute(_,l,y);if(s.sparse!==void 0){const w=Jt.SCALAR,b=je[s.sparse.indices.componentType],T=s.sparse.indices.byteOffset||0,A=s.sparse.values.byteOffset||0,x=new b(o[1],T,s.sparse.count*w),O=new u(o[2],A,s.sparse.count*l);r!==null&&(E=new a.BufferAttribute(E.array.slice(),E.itemSize,E.normalized));for(let D=0,k=x.length;D<k;D++){const z=x[D];if(E.setX(z,O[D*l]),l>=2&&E.setY(z,O[D*l+1]),l>=3&&E.setZ(z,O[D*l+2]),l>=4&&E.setW(z,O[D*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return E})}loadTexture(n){const t=this.json,e=this.options,i=t.textures[n].source,o=t.images[i];let r=this.textureLoader;if(o.uri){const l=e.manager.getHandler(o.uri);l!==null&&(r=l)}return this.loadTextureImage(n,i,r)}loadTextureImage(n,t,e){const s=this,i=this.json,o=i.textures[n],r=i.images[t],l=(r.uri||r.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,e).then(function(h){h.flipY=!1,o.name&&(h.name=o.name);const m=(i.samplers||{})[o.sampler]||{};return h.magFilter=Qt[m.magFilter]||a.LinearFilter,h.minFilter=Qt[m.minFilter]||a.LinearMipmapLinearFilter,h.wrapS=Wt[m.wrapS]||a.RepeatWrapping,h.wrapT=Wt[m.wrapT]||a.RepeatWrapping,s.associations.set(h,{textures:n}),h}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(n,t){const e=this,s=this.json,i=this.options;if(this.sourceCache[n]!==void 0)return this.sourceCache[n].then(f=>f.clone());const o=s.images[n],r=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=e.getDependency("bufferView",o.bufferView).then(function(f){u=!0;const m=new Blob([f],{type:o.mimeType});return l=r.createObjectURL(m),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+n+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(f){return new Promise(function(m,p){let y=m;t.isImageBitmapLoader===!0&&(y=function(_){const E=new a.Texture(_);E.needsUpdate=!0,m(E)}),t.load(a.LoaderUtils.resolveURL(f,i.path),y,void 0,p)})}).then(function(f){return u===!0&&r.revokeObjectURL(l),f.userData.mimeType=o.mimeType||Js(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[n]=h,h}assignTexture(n,t,e,s){const i=this;return this.getDependency("texture",e.index).then(function(o){if(e.texCoord!==void 0&&e.texCoord!=0&&!(t==="aoMap"&&e.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+e.texCoord+" for texture "+t+" not yet supported."),i.extensions[v.KHR_TEXTURE_TRANSFORM]){const r=e.extensions!==void 0?e.extensions[v.KHR_TEXTURE_TRANSFORM]:void 0;if(r){const l=i.associations.get(o);o=i.extensions[v.KHR_TEXTURE_TRANSFORM].extendTexture(o,r),i.associations.set(o,l)}}return s!==void 0&&(o.encoding=s),n[t]=o,o})}assignFinalMaterial(n){const t=n.geometry;let e=n.material;const s=t.attributes.tangent===void 0,i=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(n.isPoints){const r="PointsMaterial:"+e.uuid;let l=this.cache.get(r);l||(l=new a.PointsMaterial,a.Material.prototype.copy.call(l,e),l.color.copy(e.color),l.map=e.map,l.sizeAttenuation=!1,this.cache.add(r,l)),e=l}else if(n.isLine){const r="LineBasicMaterial:"+e.uuid;let l=this.cache.get(r);l||(l=new a.LineBasicMaterial,a.Material.prototype.copy.call(l,e),l.color.copy(e.color),this.cache.add(r,l)),e=l}if(s||i||o){let r="ClonedMaterial:"+e.uuid+":";e.isGLTFSpecularGlossinessMaterial&&(r+="specular-glossiness:"),s&&(r+="derivative-tangents:"),i&&(r+="vertex-colors:"),o&&(r+="flat-shading:");let l=this.cache.get(r);l||(l=e.clone(),i&&(l.vertexColors=!0),o&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(r,l),this.associations.set(l,this.associations.get(e))),e=l}e.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),n.material=e}getMaterialType(){return a.MeshStandardMaterial}loadMaterial(n){const t=this,e=this.json,s=this.extensions,i=e.materials[n];let o;const r={},l=i.extensions||{},u=[];if(l[v.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const f=s[v.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=f.getMaterialType(),u.push(f.extendParams(r,i,t))}else if(l[v.KHR_MATERIALS_UNLIT]){const f=s[v.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),u.push(f.extendParams(r,i,t))}else{const f=i.pbrMetallicRoughness||{};if(r.color=new a.Color(1,1,1),r.opacity=1,Array.isArray(f.baseColorFactor)){const m=f.baseColorFactor;r.color.fromArray(m),r.opacity=m[3]}f.baseColorTexture!==void 0&&u.push(t.assignTexture(r,"map",f.baseColorTexture,a.sRGBEncoding)),r.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,r.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(r,"metalnessMap",f.metallicRoughnessTexture)),u.push(t.assignTexture(r,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(m){return m.getMaterialType&&m.getMaterialType(n)}),u.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&&m.extendMaterialParams(n,r)})))}i.doubleSided===!0&&(r.side=a.DoubleSide);const h=i.alphaMode||dt.OPAQUE;if(h===dt.BLEND?(r.transparent=!0,r.depthWrite=!1):(r.transparent=!1,h===dt.MASK&&(r.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&o!==a.MeshBasicMaterial&&(u.push(t.assignTexture(r,"normalMap",i.normalTexture)),r.normalScale=new a.Vector2(1,1),i.normalTexture.scale!==void 0)){const f=i.normalTexture.scale;r.normalScale.set(f,f)}return i.occlusionTexture!==void 0&&o!==a.MeshBasicMaterial&&(u.push(t.assignTexture(r,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(r.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&o!==a.MeshBasicMaterial&&(r.emissive=new a.Color().fromArray(i.emissiveFactor)),i.emissiveTexture!==void 0&&o!==a.MeshBasicMaterial&&u.push(t.assignTexture(r,"emissiveMap",i.emissiveTexture,a.sRGBEncoding)),Promise.all(u).then(function(){let f;return o===ct?f=s[v.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(r):f=new o(r),i.name&&(f.name=i.name),be(f,i),t.associations.set(f,{materials:n}),i.extensions&&De(s,f,i),f})}createUniqueName(n){const t=a.PropertyBinding.sanitizeNodeName(n||"");let e=t;for(let s=1;this.nodeNamesUsed[e];++s)e=t+"_"+s;return this.nodeNamesUsed[e]=!0,e}loadGeometries(n){const t=this,e=this.extensions,s=this.primitiveCache;function i(r){return e[v.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(r,t).then(function(l){return nn(l,r,t)})}const o=[];for(let r=0,l=n.length;r<l;r++){const u=n[r],h=Ws(u),f=s[h];if(f)o.push(f.promise);else{let m;u.extensions&&u.extensions[v.KHR_DRACO_MESH_COMPRESSION]?m=i(u):m=nn(new a.BufferGeometry,u,t),s[h]={primitive:u,promise:m},o.push(m)}}return Promise.all(o)}loadMesh(n){const t=this,e=this.json,s=this.extensions,i=e.meshes[n],o=i.primitives,r=[];for(let l=0,u=o.length;l<u;l++){const h=o[l].material===void 0?qs(this.cache):this.getDependency("material",o[l].material);r.push(h)}return r.push(t.loadGeometries(o)),Promise.all(r).then(function(l){const u=l.slice(0,l.length-1),h=l[l.length-1],f=[];for(let p=0,y=h.length;p<y;p++){const _=h[p],E=o[p];let w;const b=u[p];if(E.mode===le.TRIANGLES||E.mode===le.TRIANGLE_STRIP||E.mode===le.TRIANGLE_FAN||E.mode===void 0)w=i.isSkinnedMesh===!0?new a.SkinnedMesh(_,b):new a.Mesh(_,b),w.isSkinnedMesh===!0&&!w.geometry.attributes.skinWeight.normalized&&w.normalizeSkinWeights(),E.mode===le.TRIANGLE_STRIP?w.geometry=sn(w.geometry,a.TriangleStripDrawMode):E.mode===le.TRIANGLE_FAN&&(w.geometry=sn(w.geometry,a.TriangleFanDrawMode));else if(E.mode===le.LINES)w=new a.LineSegments(_,b);else if(E.mode===le.LINE_STRIP)w=new a.Line(_,b);else if(E.mode===le.LINE_LOOP)w=new a.LineLoop(_,b);else if(E.mode===le.POINTS)w=new a.Points(_,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+E.mode);Object.keys(w.geometry.morphAttributes).length>0&&Qs(w,i),w.name=t.createUniqueName(i.name||"mesh_"+n),be(w,i),E.extensions&&De(s,w,E),t.assignFinalMaterial(w),f.push(w)}for(let p=0,y=f.length;p<y;p++)t.associations.set(f[p],{meshes:n,primitives:p});if(f.length===1)return f[0];const m=new a.Group;t.associations.set(m,{meshes:n});for(let p=0,y=f.length;p<y;p++)m.add(f[p]);return m})}loadCamera(n){let t;const e=this.json.cameras[n],s=e[e.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return e.type==="perspective"?t=new a.PerspectiveCamera(a.MathUtils.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):e.type==="orthographic"&&(t=new a.OrthographicCamera(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),e.name&&(t.name=this.createUniqueName(e.name)),be(t,e),Promise.resolve(t)}loadSkin(n){const t=this.json.skins[n],e={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(e):this.getDependency("accessor",t.inverseBindMatrices).then(function(s){return e.inverseBindMatrices=s,e})}loadAnimation(n){const e=this.json.animations[n],s=[],i=[],o=[],r=[],l=[];for(let u=0,h=e.channels.length;u<h;u++){const f=e.channels[u],m=e.samplers[f.sampler],p=f.target,y=p.node!==void 0?p.node:p.id,_=e.parameters!==void 0?e.parameters[m.input]:m.input,E=e.parameters!==void 0?e.parameters[m.output]:m.output;s.push(this.getDependency("node",y)),i.push(this.getDependency("accessor",_)),o.push(this.getDependency("accessor",E)),r.push(m),l.push(p)}return Promise.all([Promise.all(s),Promise.all(i),Promise.all(o),Promise.all(r),Promise.all(l)]).then(function(u){const h=u[0],f=u[1],m=u[2],p=u[3],y=u[4],_=[];for(let w=0,b=h.length;w<b;w++){const T=h[w],A=f[w],x=m[w],O=p[w],D=y[w];if(T===void 0)continue;T.updateMatrix(),T.matrixAutoUpdate=!0;let k;switch(pe[D.path]){case pe.weights:k=a.NumberKeyframeTrack;break;case pe.rotation:k=a.QuaternionKeyframeTrack;break;case pe.position:case pe.scale:default:k=a.VectorKeyframeTrack;break}const z=T.name?T.name:T.uuid,j=O.interpolation!==void 0?Zs[O.interpolation]:a.InterpolateLinear,B=[];pe[D.path]===pe.weights?T.traverse(function(F){F.morphTargetInfluences&&B.push(F.name?F.name:F.uuid)}):B.push(z);let Q=x.array;if(x.normalized){const F=ft(Q.constructor),U=new Float32Array(Q.length);for(let H=0,te=Q.length;H<te;H++)U[H]=Q[H]*F;Q=U}for(let F=0,U=B.length;F<U;F++){const H=new k(B[F]+"."+pe[D.path],A.array,Q,j);O.interpolation==="CUBICSPLINE"&&(H.createInterpolant=function(Y){const W=this instanceof a.QuaternionKeyframeTrack?Ys:lt;return new W(this.times,this.values,this.getValueSize()/3,Y)},H.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),_.push(H)}}const E=e.name?e.name:"animation_"+n;return new a.AnimationClip(E,void 0,_)})}createNodeMesh(n){const t=this.json,e=this,s=t.nodes[n];return s.mesh===void 0?null:e.getDependency("mesh",s.mesh).then(function(i){const o=e._getNodeRef(e.meshCache,s.mesh,i);return s.weights!==void 0&&o.traverse(function(r){if(r.isMesh)for(let l=0,u=s.weights.length;l<u;l++)r.morphTargetInfluences[l]=s.weights[l]}),o})}loadNode(n){const t=this.json,e=this.extensions,s=this,i=t.nodes[n],o=i.name?s.createUniqueName(i.name):"";return function(){const r=[],l=s._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(n)});return l&&r.push(l),i.camera!==void 0&&r.push(s.getDependency("camera",i.camera).then(function(u){return s._getNodeRef(s.cameraCache,i.camera,u)})),s._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(n)}).forEach(function(u){r.push(u)}),Promise.all(r)}().then(function(r){let l;if(i.isBone===!0?l=new a.Bone:r.length>1?l=new a.Group:r.length===1?l=r[0]:l=new a.Object3D,l!==r[0])for(let u=0,h=r.length;u<h;u++)l.add(r[u]);if(i.name&&(l.userData.name=i.name,l.name=o),be(l,i),i.extensions&&De(e,l,i),i.matrix!==void 0){const u=new a.Matrix4;u.fromArray(i.matrix),l.applyMatrix4(u)}else i.translation!==void 0&&l.position.fromArray(i.translation),i.rotation!==void 0&&l.quaternion.fromArray(i.rotation),i.scale!==void 0&&l.scale.fromArray(i.scale);return s.associations.has(l)||s.associations.set(l,{}),s.associations.get(l).nodes=n,l})}loadScene(n){const t=this.json,e=this.extensions,s=this.json.scenes[n],i=this,o=new a.Group;s.name&&(o.name=i.createUniqueName(s.name)),be(o,s),s.extensions&&De(e,o,s);const r=s.nodes||[],l=[];for(let u=0,h=r.length;u<h;u++)l.push(tn(r[u],o,t,i));return Promise.all(l).then(function(){const u=h=>{const f=new Map;for(const[m,p]of i.associations)(m instanceof a.Material||m instanceof a.Texture)&&f.set(m,p);return h.traverse(m=>{const p=i.associations.get(m);p!=null&&f.set(m,p)}),f};return i.associations=u(o),o})}}function tn(c,n,t,e){const s=t.nodes[c];return e.getDependency("node",c).then(function(i){if(s.skin===void 0)return i;let o;return e.getDependency("skin",s.skin).then(function(r){o=r;const l=[];for(let u=0,h=o.joints.length;u<h;u++)l.push(e.getDependency("node",o.joints[u]));return Promise.all(l)}).then(function(r){return i.traverse(function(l){if(!l.isMesh)return;const u=[],h=[];for(let f=0,m=r.length;f<m;f++){const p=r[f];if(p){u.push(p);const y=new a.Matrix4;o.inverseBindMatrices!==void 0&&y.fromArray(o.inverseBindMatrices.array,f*16),h.push(y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[f])}l.bind(new a.Skeleton(u,h),l.matrixWorld)}),i})}).then(function(i){n.add(i);const o=[];if(s.children){const r=s.children;for(let l=0,u=r.length;l<u;l++){const h=r[l];o.push(tn(h,i,t,e))}}return Promise.all(o)})}function to(c,n,t){const e=n.attributes,s=new a.Box3;if(e.POSITION!==void 0){const r=t.json.accessors[e.POSITION],l=r.min,u=r.max;if(l!==void 0&&u!==void 0){if(s.set(new a.Vector3(l[0],l[1],l[2]),new a.Vector3(u[0],u[1],u[2])),r.normalized){const h=ft(je[r.componentType]);s.min.multiplyScalar(h),s.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=n.targets;if(i!==void 0){const r=new a.Vector3,l=new a.Vector3;for(let u=0,h=i.length;u<h;u++){const f=i[u];if(f.POSITION!==void 0){const m=t.json.accessors[f.POSITION],p=m.min,y=m.max;if(p!==void 0&&y!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(y[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(y[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(y[2]))),m.normalized){const _=ft(je[m.componentType]);l.multiplyScalar(_)}r.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(r)}c.boundingBox=s;const o=new a.Sphere;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,c.boundingSphere=o}function nn(c,n,t){const e=n.attributes,s=[];function i(o,r){return t.getDependency("accessor",o).then(function(l){c.setAttribute(r,l)})}for(const o in e){const r=ut[o]||o.toLowerCase();r in c.attributes||s.push(i(e[o],r))}if(n.indices!==void 0&&!c.index){const o=t.getDependency("accessor",n.indices).then(function(r){c.setIndex(r)});s.push(o)}return be(c,n),to(c,n,t),Promise.all(s).then(function(){return n.targets!==void 0?Ks(c,n.targets,t):c})}function sn(c,n){let t=c.getIndex();if(t===null){const o=[],r=c.getAttribute("position");if(r!==void 0){for(let l=0;l<r.count;l++)o.push(l);c.setIndex(o),t=c.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),c}const e=t.count-2,s=[];if(n===a.TriangleFanDrawMode)for(let o=1;o<=e;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<e;o++)o%2===0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==e&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=c.clone();return i.setIndex(s),i}const on=d.defineComponent({__name:"GLTFLoader",props:{castShadow:{type:Boolean,default:!1},enableRaycasting:{type:Boolean,default:!1},name:{default:""},onClick:{type:Function,default:()=>null},onMouseMove:{type:Function,default:()=>null},onMouseEnter:{type:Function,default:()=>null},onMouseLeave:{type:Function,default:()=>null},position:{default:()=>[0,0,0]},receiveShadow:{type:Boolean,default:!1},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]},url:null},emits:["load","progress","error"],setup(c,{expose:n,emit:t}){const e=c,s=new As,i=new a.Group;i.castShadow=!0,i.receiveShadow=!0,ie(i),R(e,"position",i),R(e,"rotation",i),R(e,"scale",i);function o(){s.load(e.url,function(l){R(e,"position",i,!1),R(e,"rotation",i,!1),R(e,"scale",i,!1),i.add(l.scene),r(),t("load",l.scene),I.object3DChanged(e.name,i)},function(l){t("progress",l)},function(l){t("error",l)})}function r(){if(i.children.length!==0)for(const l of i.children[0].children)l.castShadow=e.castShadow,l.receiveShadow=e.receiveShadow}return r(),d.watch(()=>e.url,()=>o(),{immediate:!0}),Je(i.children,e),d.provide("mesh",i),n({three:i}),(l,u)=>d.renderSlot(l.$slots,"default")}}),no=/^[og]\s*(.+)?/,so=/^mtllib /,oo=/^usemtl /,io=/^usemap /,an=new a.Vector3,ht=new a.Vector3,rn=new a.Vector3,cn=new a.Vector3,ee=new a.Vector3,qe=new a.Color;function ao(){const c={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(n,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=n,this.object.fromDeclaration=t!==!1;return}const e=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:n||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(s,i){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const r={index:this.materials.length,name:s||"",mtllib:Array.isArray(i)&&i.length>0?i[i.length-1]:"",smooth:o!==void 0?o.smooth:this.smooth,groupStart:o!==void 0?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const u={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return u.clone=this.clone.bind(u),u}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(s){const i=this.currentMaterial();if(i&&i.groupEnd===-1&&(i.groupEnd=this.geometry.vertices.length/3,i.groupCount=i.groupEnd-i.groupStart,i.inherited=!1),s&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return s&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),i}},e&&e.name&&typeof e.clone=="function"){const s=e.clone(0);s.inherited=!0,this.object.materials.push(s)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(n,t){const e=parseInt(n,10);return(e>=0?e-1:e+t/3)*3},parseNormalIndex:function(n,t){const e=parseInt(n,10);return(e>=0?e-1:e+t/3)*3},parseUVIndex:function(n,t){const e=parseInt(n,10);return(e>=0?e-1:e+t/2)*2},addVertex:function(n,t,e){const s=this.vertices,i=this.object.geometry.vertices;i.push(s[n+0],s[n+1],s[n+2]),i.push(s[t+0],s[t+1],s[t+2]),i.push(s[e+0],s[e+1],s[e+2])},addVertexPoint:function(n){const t=this.vertices;this.object.geometry.vertices.push(t[n+0],t[n+1],t[n+2])},addVertexLine:function(n){const t=this.vertices;this.object.geometry.vertices.push(t[n+0],t[n+1],t[n+2])},addNormal:function(n,t,e){const s=this.normals,i=this.object.geometry.normals;i.push(s[n+0],s[n+1],s[n+2]),i.push(s[t+0],s[t+1],s[t+2]),i.push(s[e+0],s[e+1],s[e+2])},addFaceNormal:function(n,t,e){const s=this.vertices,i=this.object.geometry.normals;an.fromArray(s,n),ht.fromArray(s,t),rn.fromArray(s,e),ee.subVectors(rn,ht),cn.subVectors(an,ht),ee.cross(cn),ee.normalize(),i.push(ee.x,ee.y,ee.z),i.push(ee.x,ee.y,ee.z),i.push(ee.x,ee.y,ee.z)},addColor:function(n,t,e){const s=this.colors,i=this.object.geometry.colors;s[n]!==void 0&&i.push(s[n+0],s[n+1],s[n+2]),s[t]!==void 0&&i.push(s[t+0],s[t+1],s[t+2]),s[e]!==void 0&&i.push(s[e+0],s[e+1],s[e+2])},addUV:function(n,t,e){const s=this.uvs,i=this.object.geometry.uvs;i.push(s[n+0],s[n+1]),i.push(s[t+0],s[t+1]),i.push(s[e+0],s[e+1])},addDefaultUV:function(){const n=this.object.geometry.uvs;n.push(0,0),n.push(0,0),n.push(0,0)},addUVLine:function(n){const t=this.uvs;this.object.geometry.uvs.push(t[n+0],t[n+1])},addFace:function(n,t,e,s,i,o,r,l,u){const h=this.vertices.length;let f=this.parseVertexIndex(n,h),m=this.parseVertexIndex(t,h),p=this.parseVertexIndex(e,h);if(this.addVertex(f,m,p),this.addColor(f,m,p),r!==void 0&&r!==""){const y=this.normals.length;f=this.parseNormalIndex(r,y),m=this.parseNormalIndex(l,y),p=this.parseNormalIndex(u,y),this.addNormal(f,m,p)}else this.addFaceNormal(f,m,p);if(s!==void 0&&s!==""){const y=this.uvs.length;f=this.parseUVIndex(s,y),m=this.parseUVIndex(i,y),p=this.parseUVIndex(o,y),this.addUV(f,m,p),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(n){this.object.geometry.type="Points";const t=this.vertices.length;for(let e=0,s=n.length;e<s;e++){const i=this.parseVertexIndex(n[e],t);this.addVertexPoint(i),this.addColor(i)}},addLineGeometry:function(n,t){this.object.geometry.type="Line";const e=this.vertices.length,s=this.uvs.length;for(let i=0,o=n.length;i<o;i++)this.addVertexLine(this.parseVertexIndex(n[i],e));for(let i=0,o=t.length;i<o;i++)this.addUVLine(this.parseUVIndex(t[i],s))}};return c.startObject("",!1),c}class ro extends a.Loader{constructor(n){super(n),this.materials=null}load(n,t,e,s){const i=this,o=new a.FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(n,function(r){try{t(i.parse(r))}catch(l){s?s(l):console.error(l),i.manager.itemError(n)}},e,s)}setMaterials(n){return this.materials=n,this}parse(n){const t=new ao;n.indexOf(`\r
`)!==-1&&(n=n.replace(/\r\n/g,`
`)),n.indexOf(`\\
`)!==-1&&(n=n.replace(/\\\n/g,""));const e=n.split(`
`);let s="",i="",o=0,r=[];const l=typeof"".trimLeft=="function";for(let f=0,m=e.length;f<m;f++)if(s=e[f],s=l?s.trimLeft():s.trim(),o=s.length,o!==0&&(i=s.charAt(0),i!=="#"))if(i==="v"){const p=s.split(/\s+/);switch(p[0]){case"v":t.vertices.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),p.length>=7?(qe.setRGB(parseFloat(p[4]),parseFloat(p[5]),parseFloat(p[6])).convertSRGBToLinear(),t.colors.push(qe.r,qe.g,qe.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]));break;case"vt":t.uvs.push(parseFloat(p[1]),parseFloat(p[2]));break}}else if(i==="f"){const y=s.slice(1).trim().split(/\s+/),_=[];for(let w=0,b=y.length;w<b;w++){const T=y[w];if(T.length>0){const A=T.split("/");_.push(A)}}const E=_[0];for(let w=1,b=_.length-1;w<b;w++){const T=_[w],A=_[w+1];t.addFace(E[0],T[0],A[0],E[1],T[1],A[1],E[2],T[2],A[2])}}else if(i==="l"){const p=s.substring(1).trim().split(" ");let y=[];const _=[];if(s.indexOf("/")===-1)y=p;else for(let E=0,w=p.length;E<w;E++){const b=p[E].split("/");b[0]!==""&&y.push(b[0]),b[1]!==""&&_.push(b[1])}t.addLineGeometry(y,_)}else if(i==="p"){const y=s.slice(1).trim().split(" ");t.addPointGeometry(y)}else if((r=no.exec(s))!==null){const p=(" "+r[0].slice(1).trim()).slice(1);t.startObject(p)}else if(oo.test(s))t.object.startMaterial(s.substring(7).trim(),t.materialLibraries);else if(so.test(s))t.materialLibraries.push(s.substring(7).trim());else if(io.test(s))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(i==="s"){if(r=s.split(" "),r.length>1){const y=r[1].trim().toLowerCase();t.object.smooth=y!=="0"&&y!=="off"}else t.object.smooth=!0;const p=t.object.currentMaterial();p&&(p.smooth=t.object.smooth)}else{if(s==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+s+'"')}t.finalize();const u=new a.Group;if(u.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let f=0,m=t.objects.length;f<m;f++){const p=t.objects[f],y=p.geometry,_=p.materials,E=y.type==="Line",w=y.type==="Points";let b=!1;if(y.vertices.length===0)continue;const T=new a.BufferGeometry;T.setAttribute("position",new a.Float32BufferAttribute(y.vertices,3)),y.normals.length>0&&T.setAttribute("normal",new a.Float32BufferAttribute(y.normals,3)),y.colors.length>0&&(b=!0,T.setAttribute("color",new a.Float32BufferAttribute(y.colors,3))),y.hasUVIndices===!0&&T.setAttribute("uv",new a.Float32BufferAttribute(y.uvs,2));const A=[];for(let O=0,D=_.length;O<D;O++){const k=_[O],z=k.name+"_"+k.smooth+"_"+b;let j=t.materials[z];if(this.materials!==null){if(j=this.materials.create(k.name),E&&j&&!(j instanceof a.LineBasicMaterial)){const B=new a.LineBasicMaterial;a.Material.prototype.copy.call(B,j),B.color.copy(j.color),j=B}else if(w&&j&&!(j instanceof a.PointsMaterial)){const B=new a.PointsMaterial({size:10,sizeAttenuation:!1});a.Material.prototype.copy.call(B,j),B.color.copy(j.color),B.map=j.map,j=B}}j===void 0&&(E?j=new a.LineBasicMaterial:w?j=new a.PointsMaterial({size:1,sizeAttenuation:!1}):j=new a.MeshPhongMaterial,j.name=k.name,j.flatShading=!k.smooth,j.vertexColors=b,t.materials[z]=j),A.push(j)}let x;if(A.length>1){for(let O=0,D=_.length;O<D;O++){const k=_[O];T.addGroup(k.groupStart,k.groupCount,O)}E?x=new a.LineSegments(T,A):w?x=new a.Points(T,A):x=new a.Mesh(T,A)}else E?x=new a.LineSegments(T,A[0]):w?x=new a.Points(T,A[0]):x=new a.Mesh(T,A[0]);x.name=p.name,u.add(x)}else if(t.vertices.length>0){const f=new a.PointsMaterial({size:1,sizeAttenuation:!1}),m=new a.BufferGeometry;m.setAttribute("position",new a.Float32BufferAttribute(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(m.setAttribute("color",new a.Float32BufferAttribute(t.colors,3)),f.vertexColors=!0);const p=new a.Points(m,f);u.add(p)}return u}}const ln=d.defineComponent({__name:"OBJLoader",props:{castShadow:{type:Boolean,default:!1},enableRaycasting:{type:Boolean,default:!1},name:{default:""},onClick:{type:Function,default:()=>null},onMouseMove:{type:Function,default:()=>null},onMouseEnter:{type:Function,default:()=>null},onMouseLeave:{type:Function,default:()=>null},position:{default:()=>[0,0,0]},receiveShadow:{type:Boolean,default:!1},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]},url:null},emits:["load","progress","error"],setup(c,{expose:n,emit:t}){const e=c,s=new ro,i=new a.Group;ie(i),R(e,"position",i),R(e,"rotation",i),R(e,"scale",i);function o(){s.load(e.url,function(l){for(const u of l.children)"material"in i&&(u.material=i.material);i.add(l),r(),t("load",l),I.object3DChanged(e.name,i)},function(l){t("progress",l)},function(l){t("error",l)})}function r(){if(i.children.length!==0)for(const l of i.children[0].children)l.castShadow=e.castShadow,l.receiveShadow=e.receiveShadow}return r(),d.watch(()=>e.url,()=>o(),{immediate:!0}),Je(i.children,e),d.provide("mesh",i),n({three:i}),(l,u)=>d.renderSlot(l.$slots,"default")}}),un=d.defineComponent({__name:"AxesHelper",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},size:{default:1},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=d.inject("scene"),s=new a.AxesHelper(t.size);return e.add(s),R(t,"position",s),R(t,"rotation",s),R(t,"scale",s),d.provide("mesh",s),n({three:s}),(i,o)=>d.renderSlot(i.$slots,"default")}}),dn=d.defineComponent({__name:"BoxHelper",props:{castShadow:{type:Boolean,default:!1},material:{default:null},mesh:{default:""},name:{default:""},position:{default:()=>[0,0,0]},receiveShadow:{type:Boolean,default:!1},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=d.inject("scene"),s=new a.BufferGeometry,i=new a.MeshBasicMaterial,o=new a.Mesh(s,i);ie(o),R(t,"position",o),R(t,"rotation",o),R(t,"scale",o);function r(){o.castShadow=t.castShadow,o.receiveShadow=t.receiveShadow}r(),M(t,"castShadow",r),M(t,"receiveShadow",r);const l=d.inject("getMaterial");function u(h){const f=new a.Box3;f.setFromObject(h);const m=new a.Vector3;f.getCenter(m);const p=new a.BoxGeometry(f.max.x-f.min.x,f.max.y-f.min.y,f.max.z-f.min.z);J(o.geometry,p),o.position.set(m.x,m.y,m.z),I.geometryChanged(o.geometry.name,o.geometry)}return I.object3DChanged.on(t.mesh,h=>{h.geometry.computeBoundingBox(),u(h)}),I.object3DTranslated.on(t.mesh,h=>{u(h)}),d.onMounted(()=>{if(t.material){const h=l(t.material);o.material=h}}),d.onUnmounted(()=>{e.remove(o),oe(o)}),d.provide("mesh",o),n({three:o}),(h,f)=>d.renderSlot(h.$slots,"default")}}),co={name:"BoxGeometry",render:()=>null},fn=d.defineComponent({...co,props:{name:{default:""},width:{default:1},height:{default:1},depth:{default:1},widthSegments:{default:1},heightSegments:{default:1},depthSegments:{default:1}},setup(c,{expose:n}){const t=c;function e(l,u,h,f,m,p){return new a.BoxGeometry(l,u,h,f,m,p)}const s=d.reactive(new a.BufferGeometry);s.name=t.name;const i=d.inject("mesh",null);i&&(i.geometry=s);const o=d.inject("addGeometry");o(s);function r(){const l=e(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments);J(s,l),I.geometryChanged(t.name,s),i&&I.object3DChanged(i.name,i)}return d.onMounted(r),M(t,"name",()=>{s.name=t.name}),M(t,"width",r),M(t,"height",r),M(t,"depth",r),M(t,"widthSegments",r),M(t,"heightSegments",r),M(t,"depthSegments",r),n({three:s}),{props:t,makeBox:e,three:s,mesh:i,addGeometry:o,redoGeometry:r}}}),lo={name:"BufferGeometry",render:()=>null},hn=d.defineComponent({...lo,props:{name:{default:""},vertices:{default:()=>[]},faces:{default:()=>[]},uvs:{default:()=>[]},normals:{type:[Array,Boolean],default:!1}},setup(c,{expose:n}){const t=c;function e(){const l=new a.BufferGeometry,u=new Float32Array(t.vertices);if(l.setAttribute("position",new a.BufferAttribute(u,3)),t.uvs.length>0){const h=new Float32Array(t.uvs);l.setAttribute("uv",new a.BufferAttribute(h,2))}if(t.normals===!0&&(l.computeVertexNormals(),l.attributes.normal.needsUpdate=!0),Array.isArray(t.normals)){const h=new Float32Array(t.normals);l.setAttribute("normal",new a.BufferAttribute(h,3))}return t.faces.length>0&&l.setIndex(t.faces),l}const s=d.reactive(new a.BufferGeometry);s.name=t.name;const i=d.inject("mesh",null);i&&(i.geometry=s);const o=d.inject("addGeometry");o(s);function r(){const l=e();J(s,l),I.geometryChanged(t.name,s),i&&I.object3DChanged(i.name,i)}return d.onMounted(r),d.watch(()=>t.vertices,l=>{r()},{deep:!0}),d.watch(()=>t.faces,l=>{r()},{deep:!0}),n({three:s}),{props:t,makeGeometry:e,three:s,mesh:i,addGeometry:o,redoGeometry:r}}}),uo={name:"CircleGeometry",render:()=>null},pn=d.defineComponent({...uo,props:{name:{default:""},radius:{default:1},segments:{default:32},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(c,{expose:n}){const t=c;function e(l,u,h,f){return new a.CircleGeometry(l,u,h,f)}const s=d.reactive(new a.BufferGeometry);s.name=t.name;const i=d.inject("mesh",null);i&&(i.geometry=s);const o=d.inject("addGeometry");o(s);function r(){const l=e(t.radius,t.segments,t.thetaStart,t.thetaLength);J(s,l),I.geometryChanged(t.name,s),i&&I.object3DChanged(i.name,i)}return d.onMounted(r),M(t,"radius",r),M(t,"segments",r),M(t,"thetaStart",r),M(t,"thetaLength",r),n({three:s}),{props:t,makeCircle:e,three:s,mesh:i,addGeometry:o,redoGeometry:r}}}),fo={name:"ConeGeometry",render:()=>null},mn=d.defineComponent({...fo,props:{name:{default:""},radius:{default:1},height:{default:1},radialSegments:{default:32},heightSegments:{default:1},openEnded:{type:Boolean,default:!1},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(c,{expose:n}){const t=c;function e(l,u,h,f,m,p,y){return new a.ConeGeometry(l,u,h,f,m,p,y)}const s=d.reactive(new a.BufferGeometry);s.name=t.name;const i=d.inject("mesh",null);i&&(i.geometry=s);const o=d.inject("addGeometry");o(s);function r(){const l=e(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength);J(s,l),I.geometryChanged(t.name,s),i&&I.object3DChanged(i.name,i)}return d.onMounted(r),M(t,"radius",r),M(t,"height",r),M(t,"radialSegments",r),M(t,"heightSegments",r),M(t,"openEnded",r),M(t,"thetaStart",r),M(t,"thetaLength",r),n({three:s}),{props:t,makeCone:e,three:s,mesh:i,addGeometry:o,redoGeometry:r}}}),ho={name:"CylinderGeometry",render:()=>null},gn=d.defineComponent({...ho,props:{name:{default:""},radiusTop:{default:1},radiusBottom:{default:1},height:{default:1},radialSegments:{default:32},heightSegments:{default:1},openEnded:{type:Boolean,default:!1},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(c,{expose:n}){const t=c;function e(l,u,h,f,m,p,y,_){return new a.CylinderGeometry(l,u,h,f,m,p,y,_)}const s=d.reactive(new a.BufferGeometry);s.name=t.name;const i=d.inject("mesh",null);i&&(i.geometry=s);const o=d.inject("addGeometry");o(s);function r(){const l=e(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength);J(s,l),I.geometryChanged(t.name,s),i&&I.object3DChanged(i.name,i)}return d.onMounted(r),M(t,"radiusTop",r),M(t,"radiusBottom",r),M(t,"height",r),M(t,"radialSegments",r),M(t,"heightSegments",r),M(t,"openEnded",r),M(t,"thetaStart",r),M(t,"thetaLength",r),n({three:s}),{props:t,makeCylinder:e,three:s,mesh:i,addGeometry:o,redoGeometry:r}}}),po={name:"EdgesGeometry",render:()=>null},yn=d.defineComponent({...po,props:{geometry:null},setup(c,{expose:n}){const t=c,e=d.reactive(new a.BufferGeometry),s=d.inject("mesh",null);s&&(s.geometry=e);const i=d.inject("addGeometry");i(e);function o(r){const l=new a.EdgesGeometry(r);J(e,l);const u=s;"isLine"in u&&u.computeLineDistances()}return I.geometryChanged.on(t.geometry,r=>{o(r)}),n({three:e}),{props:t,three:e,mesh:s,addGeometry:i,redoGeometry:o}}});class Ke extends a.BufferGeometry{constructor(n=(s,i,o)=>o.set(s,i,Math.cos(s)*Math.sin(i)),t=8,e=8){super(),this.type="ParametricGeometry",this.parameters={func:n,slices:t,stacks:e};const s=[],i=[],o=[],r=[],l=1e-5,u=new a.Vector3,h=new a.Vector3,f=new a.Vector3,m=new a.Vector3,p=new a.Vector3;n.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const y=t+1;for(let _=0;_<=e;_++){const E=_/e;for(let w=0;w<=t;w++){const b=w/t;n(b,E,h),i.push(h.x,h.y,h.z),b-l>=0?(n(b-l,E,f),m.subVectors(h,f)):(n(b+l,E,f),m.subVectors(f,h)),E-l>=0?(n(b,E-l,f),p.subVectors(h,f)):(n(b,E+l,f),p.subVectors(f,h)),u.crossVectors(m,p).normalize(),o.push(u.x,u.y,u.z),r.push(b,E)}}for(let _=0;_<e;_++)for(let E=0;E<t;E++){const w=_*y+E,b=_*y+E+1,T=(_+1)*y+E+1,A=(_+1)*y+E;s.push(w,b,A),s.push(b,T,A)}this.setIndex(s),this.setAttribute("position",new a.Float32BufferAttribute(i,3)),this.setAttribute("normal",new a.Float32BufferAttribute(o,3)),this.setAttribute("uv",new a.Float32BufferAttribute(r,2))}}const Te={klein:function(c,n,t){n*=Math.PI,c*=2*Math.PI,n=n*2;let e,s;n<Math.PI?(e=3*Math.cos(n)*(1+Math.sin(n))+2*(1-Math.cos(n)/2)*Math.cos(n)*Math.cos(c),s=-8*Math.sin(n)-2*(1-Math.cos(n)/2)*Math.sin(n)*Math.cos(c)):(e=3*Math.cos(n)*(1+Math.sin(n))+2*(1-Math.cos(n)/2)*Math.cos(c+Math.PI),s=-8*Math.sin(n));const i=-2*(1-Math.cos(n)/2)*Math.sin(c);t.set(e,i,s)},plane:function(c,n){return function(t,e,s){const i=t*c,o=0,r=e*n;s.set(i,o,r)}},mobius:function(c,n,t){c=c-.5;const e=2*Math.PI*n,s=2,i=Math.cos(e)*(s+c*Math.cos(e/2)),o=Math.sin(e)*(s+c*Math.cos(e/2)),r=c*Math.sin(e/2);t.set(i,o,r)},mobius3d:function(c,n,t){c*=Math.PI,n*=2*Math.PI,c=c*2;const e=c/2,s=2.25,i=.125,o=.65;let r=i*Math.cos(n)*Math.cos(e)-o*Math.sin(n)*Math.sin(e);const l=i*Math.cos(n)*Math.sin(e)+o*Math.sin(n)*Math.cos(e),u=(s+r)*Math.sin(c);r=(s+r)*Math.cos(c),t.set(r,u,l)}};Te.TubeGeometry=class extends Ke{constructor(n,t=64,e=1,s=8,i=!1){const o=t+1,r=n.computeFrenetFrames(t,i),l=r.tangents,u=r.normals,h=r.binormals,f=new a.Vector3;function m(p,y,_){y*=2*Math.PI;const E=Math.floor(p*(o-1));n.getPointAt(p,f);const w=u[E],b=h[E],T=-e*Math.cos(y),A=e*Math.sin(y);f.x+=T*w.x+A*b.x,f.y+=T*w.y+A*b.y,f.z+=T*w.z+A*b.z,_.copy(f)}super(m,t,s),this.tangents=l,this.normals=u,this.binormals=h,this.path=n,this.segments=t,this.radius=e,this.segmentsRadius=s,this.closed=i}},Te.TorusKnotGeometry=class extends Te.TubeGeometry{constructor(n=200,t=40,e=64,s=8,i=2,o=3){class r extends a.Curve{getPoint(m,p=new a.Vector3){const y=p;m*=Math.PI*2;const _=.5,E=(1+_*Math.cos(o*m))*Math.cos(i*m),w=(1+_*Math.cos(o*m))*Math.sin(i*m),b=_*Math.sin(o*m);return y.set(E,w,b).multiplyScalar(n)}}const l=e,u=s,h=new r;super(h,l,t,u,!0,!1),this.radius=n,this.tube=t,this.segmentsT=e,this.segmentsR=s,this.p=i,this.q=o}},Te.SphereGeometry=class extends Ke{constructor(n,t,e){function s(i,o,r){i*=Math.PI,o*=2*Math.PI;const l=n*Math.sin(i)*Math.cos(o),u=n*Math.sin(i)*Math.sin(o),h=n*Math.cos(i);r.set(l,u,h)}super(s,t,e)}},Te.PlaneGeometry=class extends Ke{constructor(n,t,e,s){function i(o,r,l){const u=o*n,h=0,f=r*t;l.set(u,h,f)}super(i,e,s)}};const mo={name:"Parametriceometry",render:()=>null},_n=d.defineComponent({...mo,props:{name:{default:""},function:{type:Function,default:Te.klein},slices:{default:8},stacks:{default:8}},setup(c,{expose:n}){const t=c;function e(l,u,h){return new Ke(l,u,h)}const s=d.reactive(new a.BufferGeometry);s.name=t.name;const i=d.inject("mesh",null);i&&(i.geometry=s);const o=d.inject("addGeometry");o(s);function r(){const l=e(t.function,t.slices,t.stacks);J(s,l),I.geometryChanged(t.name,s),i&&I.object3DChanged(i.name,i)}return d.onMounted(r),M(t,"function",r),M(t,"stacks",r),M(t,"slices",r),n({three:s}),{props:t,makePlane:e,three:s,mesh:i,addGeometry:o,redoGeometry:r}}}),go={name:"PlaneGeometry",render:()=>null},wn=d.defineComponent({...go,props:{name:{default:""},width:{default:1},height:{default:1},widthSegments:{default:1},heightSegments:{default:1}},setup(c,{expose:n}){const t=c;function e(l,u,h,f){return new a.PlaneGeometry(l,u,h,f)}const s=d.reactive(new a.BufferGeometry);s.name=t.name;const i=d.inject("mesh",null);i&&(i.geometry=s);const o=d.inject("addGeometry");o(s);function r(){const l=e(t.width,t.height,t.widthSegments,t.heightSegments);J(s,l),I.geometryChanged(t.name,s),i&&I.object3DChanged(i.name,i)}return d.onMounted(r),M(t,"width",r),M(t,"height",r),M(t,"widthSegments",r),M(t,"heightSegments",r),n({three:s}),{props:t,makePlane:e,three:s,mesh:i,addGeometry:o,redoGeometry:r}}}),yo={name:"RingGeometry",render:()=>null},Mn=d.defineComponent({...yo,props:{name:{default:""},innerRadius:{default:.5},outerRadius:{default:1},thetaSegments:{default:32},phiSegments:{default:1},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(c,{expose:n}){const t=c;function e(l,u,h,f,m,p){return new a.RingGeometry(l,u,h,f,m,p)}const s=d.reactive(new a.BufferGeometry);s.name=t.name;const i=d.inject("mesh",null);i&&(i.geometry=s);const o=d.inject("addGeometry");o(s);function r(){const l=e(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength);J(s,l),I.geometryChanged(t.name,s),i&&I.object3DChanged(i.name,i)}return d.onMounted(r),M(t,"innerRadius",r),M(t,"outerRadius",r),M(t,"thetaSegments",r),M(t,"phiSegments",r),M(t,"thetaStart",r),M(t,"thetaLength",r),n({three:s}),{props:t,makeRing:e,three:s,mesh:i,addGeometry:o,redoGeometry:r}}}),_o={name:"SphereGeometry",render:()=>null},bn=d.defineComponent({..._o,props:{name:{default:""},radius:{default:1},widthSegments:{default:32},heightSegments:{default:16},phiStart:{default:0},phiLength:{default:2*Math.PI},thetaStart:{default:0},thetaLength:{default:Math.PI}},setup(c,{expose:n}){const t=c;function e(l,u,h,f,m,p,y){return new a.SphereGeometry(l,u,h,f,m,p,y)}const s=new a.BufferGeometry;s.name=t.name;const i=d.inject("mesh",null);i&&(i.geometry=s);const o=d.inject("addGeometry");o(s);function r(){const l=e(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength);J(s,l),I.geometryChanged(t.name,s),i&&I.object3DChanged(i.name,i)}return d.onMounted(r),M(t,"radius",r),M(t,"widthSegments",r),M(t,"heightSegments",r),M(t,"phiStart",r),M(t,"phiLength",r),M(t,"thetaStart",r),M(t,"thetaLength",r),n({three:s}),{props:t,makeSphere:e,three:s,mesh:i,addGeometry:o,redoGeometry:r}}}),wo={name:"WireframeGeometry",render:()=>null},En=d.defineComponent({...wo,props:{geometry:null},setup(c,{expose:n}){const t=c,e=d.reactive(new a.BufferGeometry),s=d.inject("mesh",null);s&&(s.geometry=e);const i=d.inject("addGeometry");i(e);function o(r){const l=new a.WireframeGeometry(r);J(e,l);const u=s;"isLine"in u&&u.computeLineDistances()}return I.geometryChanged.on(t.geometry,r=>{o(r)}),n({three:e}),{props:t,three:e,mesh:s,addGeometry:i,redoGeometry:o}}}),Mo={name:"LineBasicMaterial",render:()=>null},Sn=d.defineComponent({...Mo,props:{color:{default:16777215},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=new a.LineBasicMaterial({color:t.color});e.name=t.name;const s=d.inject("addMaterial");s(e);const i=d.inject("mesh",null);i&&(i.material=e);function o(){t.color&&(e.color=new a.Color(t.color)),e.opacity=t.opacity,e.transparent=t.transparent,e.needsUpdate=!0}return o(),M(t,"color",o),M(t,"opacity",o),M(t,"transparent",o),d.provide("material",e),n({three:e}),{props:t,three:e,addMaterial:s,mesh:i,applyProps:o}}}),bo={name:"LineDashedMaterial",render:()=>null},Tn=d.defineComponent({...bo,props:{color:{default:16777215},scale:{default:1},dashSize:{default:3},gapSize:{default:1},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=new a.LineDashedMaterial({color:t.color});e.name=t.name;const s=d.inject("addMaterial");s(e);const i=d.inject("mesh",null);i&&(i.material=e);function o(){e.color=new a.Color(t.color),e.scale=t.scale,e.dashSize=t.dashSize,e.gapSize=t.gapSize,e.opacity=t.opacity,e.transparent=t.transparent,e.needsUpdate=!0}return o(),M(t,"color",o),M(t,"scale",o),M(t,"dashSize",o),M(t,"gapSize",o),M(t,"opacity",o),M(t,"transparent",o),d.provide("material",e),n({three:e}),{props:t,three:e,addMaterial:s,mesh:i,applyProps:o}}}),Eo={name:"MeshBasicMaterial"},xn=d.defineComponent({...Eo,props:{color:null,side:{default:a.FrontSide},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1},vertexColors:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=new a.MeshBasicMaterial;e.name=t.name,d.inject("addMaterial")(e);const i=d.inject("mesh",null);i&&(i.material=e);function o(){t.color!==void 0&&(e.color=new a.Color(t.color)),e.side=t.side,e.opacity=t.opacity,e.transparent=t.transparent,e.vertexColors=t.vertexColors,e.needsUpdate=!0}return o(),d.provide("material",e),M(t,"color",o),M(t,"side",o),M(t,"opacity",o),M(t,"transparent",o),M(t,"vertexColors",o),n({three:e}),(r,l)=>d.renderSlot(r.$slots,"default")}}),So={name:"MeshLambertMaterial"},An=d.defineComponent({...So,props:{color:{default:16777215},name:{default:""},side:{default:a.FrontSide},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=new a.MeshLambertMaterial;e.name=t.name,d.inject("addMaterial")(e);const i=d.inject("mesh",null);i&&(i.material=e);function o(r){r.color&&(e.color=new a.Color(r.color)),r.side&&(e.side=r.side)}return o(t),d.watch(()=>t.color,()=>o(t)),d.watch(()=>t.side,()=>o(t)),d.watch(()=>t.opacity,()=>{e.opacity=t.opacity},{immediate:!0}),d.watch(()=>t.transparent,()=>{e.transparent=t.transparent},{immediate:!0}),d.provide("material",e),n({three:e}),(r,l)=>d.renderSlot(r.$slots,"default")}}),To={name:"PointsMaterial",render:()=>null},Cn=d.defineComponent({...To,props:{color:{default:16777215},sizeAttenuation:{type:Boolean,default:!0},name:{default:""},size:{default:1},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=new a.PointsMaterial({color:t.color,sizeAttenuation:t.sizeAttenuation,size:t.size});e.name=t.name;const s=d.inject("mesh",null),i=d.inject("addMaterial");i(e),s&&(s.material=e);function o(){e.color=new a.Color(t.color),e.size=t.size,e.sizeAttenuation=t.sizeAttenuation,e.opacity=t.opacity,e.transparent=t.transparent,e.needsUpdate=!0}return o(),M(t,"color",o),M(t,"size",o),M(t,"sizeAttenuation",o),M(t,"opacity",o),M(t,"transparent",o),d.provide("material",e),n({three:e}),{props:t,three:e,mesh:s,addMaterial:i,applyProps:o}}}),xo={name:"MeshNormalMaterial"},Ln=d.defineComponent({...xo,props:{side:{default:a.FrontSide},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=new a.MeshNormalMaterial;e.name=t.name,d.inject("addMaterial")(e);const i=d.inject("mesh",null);return i&&(i.material=e),d.watch(()=>t.side,()=>{e.side=t.side},{immediate:!0}),d.watch(()=>t.opacity,()=>{e.opacity=t.opacity},{immediate:!0}),d.watch(()=>t.transparent,()=>{e.transparent=t.transparent},{immediate:!0}),d.provide("material",e),n({three:e}),(o,r)=>d.renderSlot(o.$slots,"default")}}),Ao={name:"AmbientLight",render:()=>null},Rn=d.defineComponent({...Ao,props:{color:{default:16777215},intensity:{default:1}},setup(c,{expose:n}){const t=c,e=d.inject("scene"),s=new a.AmbientLight;e.add(s);function i(o){s.color=new a.Color(o.color),s.intensity=o.intensity}return i(t),d.watch(()=>t.color,()=>i(t)),d.watch(()=>t.intensity,()=>i(t)),n({three:s}),{props:t,scene:e,three:s,applyProps:i}}}),Co={name:"DirectionalLight",render:()=>null},Pn=d.defineComponent({...Co,props:{color:{default:16777215},intensity:{default:1}},setup(c,{expose:n}){const t=c,e=d.inject("scene"),s=new a.DirectionalLight;e.add(s);function i(){s.color=new a.Color(t.color),s.intensity=t.intensity}return i(),M(t,"color",i),M(t,"intensity",i),n({three:s}),{props:t,scene:e,three:s,applyProps:i}}}),Lo={name:"HemisphereLight",render:()=>null},vn=d.defineComponent({...Lo,props:{groundColor:{default:16777215},intensity:{default:1},skyColor:{default:16777215}},setup(c,{expose:n}){const t=c,e=d.inject("scene"),s=new a.HemisphereLight;e.add(s);function i(){s.color=new a.Color(t.skyColor),s.groundColor=new a.Color(t.groundColor),s.intensity=t.intensity}return i(),M(t,"skyColor",i),M(t,"groundColor",i),M(t,"intensity",i),n({three:s}),{props:t,scene:e,three:s,applyProps:i}}}),Ro={name:"PointLight",render:()=>null},On=d.defineComponent({...Ro,props:{castShadow:{type:Boolean,default:!1},color:{default:16777215},intensity:{default:1},position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=d.inject("scene"),s=new a.PointLight;e.add(s),R(t,"position",s),R(t,"rotation",s),R(t,"scale",s);function i(o){s.color=new a.Color(o.color),s.intensity=o.intensity,s.castShadow=o.castShadow}return i(t),d.watch(()=>t.color,()=>i(t)),d.watch(()=>t.intensity,()=>i(t)),d.watch(()=>t.castShadow,()=>i(t)),n({three:s}),{props:t,scene:e,three:s,applyProps:i}}}),Po={name:"TextureLoader",render:()=>null},In=d.defineComponent({...Po,props:{offset:{default:()=>[0,0]},repeat:{default:()=>[1,1]},rotation:{default:0},url:null,wrapS:{default:a.ClampToEdgeWrapping},wrapT:{default:a.ClampToEdgeWrapping}},setup(c,{expose:n}){const t=c,e=d.inject("material"),s=d.ref(new a.Texture);function i(){new a.TextureLoader().loadAsync(t.url).then(r=>{s.value=r,bt(t,"offset",s.value),bt(t,"repeat",s.value),"map"in e&&(e.map=s.value,e.needsUpdate=!0),o()})}function o(){s.value.wrapS=t.wrapS,s.value.wrapT=t.wrapT,s.value.rotation=t.rotation,s.value.needsUpdate=!0}return i(),M(t,"url",i),M(t,"wrapS",o),M(t,"wrapT",o),M(t,"rotation",o),n({three:s}),{props:t,material:e,three:s,load:i,applyProps:o}}});function vo(c){c.component("Renderer",At),c.component("Scene",Ct),c.component("PerspectiveCamera",Lt),c.component("OrthographicCamera",Rt),c.component("OrbitControls",Ot),c.component("TrackballControls",It),c.component("TransformControls",Bt),c.component("Group",Ut),c.component("InstancedMesh",Vt),c.component("Line",zt),c.component("LineLoop",$t),c.component("LineSegments",Xt),c.component("Mesh",Yt),c.component("Points",Zt),c.component("GLTFLoader",on),c.component("OBJLoader",ln),c.component("AxesHelper",un),c.component("BoxHelper",dn),c.component("BoxGeometry",fn),c.component("BufferGeometry",hn),c.component("CircleGeometry",pn),c.component("ConeGeometry",mn),c.component("CylinderGeometry",gn),c.component("EdgesGeometry",yn),c.component("ParametricGeometry",_n),c.component("PlaneGeometry",wn),c.component("RingGeometry",Mn),c.component("SphereGeometry",bn),c.component("WireframeGeometry",En),c.component("LineBasicMaterial",Sn),c.component("LineDashedMaterial",Tn),c.component("MeshBasicMaterial",xn),c.component("MeshLambertMaterial",An),c.component("PointsMaterial",Cn),c.component("MeshNormalMaterial",Ln),c.component("AmbientLight",Rn),c.component("DirectionalLight",Pn),c.component("HemisphereLight",vn),c.component("PointLight",On),c.component("TextureLoader",In)}C.AmbientLight=Rn,C.AxesHelper=un,C.BoxGeometry=fn,C.BoxHelper=dn,C.BufferGeometry=hn,C.CircleGeometry=pn,C.ConeGeometry=mn,C.CylinderGeometry=gn,C.DirectionalLight=Pn,C.EdgesGeometry=yn,C.GLTFLoader=on,C.Group=Ut,C.HemisphereLight=vn,C.InstancedMesh=Vt,C.Line=zt,C.LineBasicMaterial=Sn,C.LineDashedMaterial=Tn,C.LineLoop=$t,C.LineSegments=Xt,C.Mesh=Yt,C.MeshBasicMaterial=xn,C.MeshLambertMaterial=An,C.MeshNormalMaterial=Ln,C.OBJLoader=ln,C.OrbitControls=Ot,C.OrthographicCamera=Rt,C.ParametricGeometry=_n,C.PerspectiveCamera=Lt,C.PlaneGeometry=wn,C.PointLight=On,C.Points=Zt,C.PointsMaterial=Cn,C.Renderer=At,C.RingGeometry=Mn,C.Scene=Ct,C.SphereGeometry=bn,C.TextureLoader=In,C.TrackballControls=It,C.TransformControls=Bt,C.WireframeGeometry=En,C.install=vo,Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})});
