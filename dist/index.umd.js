(function(C,f){typeof exports=="object"&&typeof module<"u"?f(exports,require("vue"),require("three")):typeof define=="function"&&define.amd?define(["exports","vue","three"],f):(C=typeof globalThis<"u"?globalThis:C||self,f(C["@janvorisek/drie"]={},C.Vue,C.three))})(this,function(C,f,a){"use strict";const gt=c=>c===void 0?new a.Vector3(0,0,0):"x"in c?new a.Vector3(c.x,c.y,c.z):new a.Vector3(c[0],c[1],c[2]),yt=c=>c===void 0?new a.Vector2(0,0):"x"in c?new a.Vector2(c.x,c.y):new a.Vector2(c[0],c[1]),_t=(c,n,t)=>{t[c].isVector3?t[c].set(n.x,n.y,n.z):"isEuler"in t[c]&&t[c].setFromVector3(n)},P=(c,n,t,e=!0,o)=>{if(t!==null){if(c[n]!==void 0){const i=gt(c[n]);_t(n,i,t),o&&o()}e&&f.watch(()=>c[n],()=>{if(c[n]!==void 0){const i=gt(c[n]);_t(n,i,t),o&&o()}})}},wt=(c,n,t)=>{t[c].isVector2&&t[c].set(n.x,n.y)},bt=(c,n,t,e=!0)=>{if(t!==null){if(c[n]!==void 0){const o=yt(c[n]);wt(n,o,t)}e&&f.watch(()=>c[n],()=>{if(c[n]!==void 0){const o=yt(c[n]);wt(n,o,t)}})}},b=(c,n,t)=>{f.watch(()=>c[n],()=>{t()})};function J(c,n){n.hasAttribute("position")&&(c.setAttribute("position",n.getAttribute("position")),c.attributes.position.needsUpdate=!0),n.hasAttribute("normal")&&(c.setAttribute("normal",n.getAttribute("normal")),c.attributes.normal.needsUpdate=!0),n.hasAttribute("uv")&&(c.setAttribute("uv",n.getAttribute("uv")),c.attributes.uv.needsUpdate=!0),c.setIndex(n.getIndex()),n.boundingBox!==null&&(c.boundingBox=n.boundingBox),n.boundingSphere&&n.boundingSphere.radius>0&&(c.boundingSphere=n.boundingSphere)}function ae(c){if(c.children.length>0)for(let n=c.children.length-1;n>=0;n--)ae(c.children[n]);if(c.geometry&&c.geometry.dispose(),c.material)if(c.material.length)for(let n=0;n<c.material.length;++n)c.material[n].map&&c.material[n].map.dispose(),c.material[n].lightMap&&c.material[n].lightMap.dispose(),c.material[n].bumpMap&&c.material[n].bumpMap.dispose(),c.material[n].normalMap&&c.material[n].normalMap.dispose(),c.material[n].specularMap&&c.material[n].specularMap.dispose(),c.material[n].envMap&&c.material[n].envMap.dispose(),c.material[n].dispose();else c.material.map&&c.material.map.dispose(),c.material.lightMap&&c.material.lightMap.dispose(),c.material.bumpMap&&c.material.bumpMap.dispose(),c.material.normalMap&&c.material.normalMap.dispose(),c.material.specularMap&&c.material.specularMap.dispose(),c.material.envMap&&c.material.envMap.dispose(),c.material.dispose();return c.removeFromParent(),!0}function Z(c){const n=f.inject("scene"),t=f.inject("parent",void 0);f.onMounted(()=>{t?t.add(c):n.add(c)}),f.onUnmounted(()=>{t?t.remove(c):n.remove(c)})}function Je(c,n){const t=f.inject("camera"),e=f.inject("canvas");f.inject("scene");const o=l=>{const u=new a.Raycaster,h=Mt(l);u.setFromCamera(h,t.value);const d=u.intersectObjects(c);d.length>0&&n.onClick(d,h)};let i=!1,s=[];const r=l=>{const u=new a.Raycaster,h=Mt(l);u.setFromCamera(h,t.value);const d=u.intersectObjects(c);d.length>0?(s=d,i===!1&&n.onMouseEnter(d,h),i=!0,n.onMouseMove(d,h)):(i&&n.onMouseLeave(s,h),i=!1,s=[])};f.onMounted(()=>{if(n.enableRaycasting){if((e==null?void 0:e.value)==null)return;const l=(()=>null).toString();n.onClick.toString()!==l&&(e==null||e.value.addEventListener("click",o)),(n.onMouseEnter.toString()!==l||n.onMouseMove.toString()!==l||n.onMouseLeave.toString()!==l)&&(e==null||e.value.addEventListener("mousemove",r))}}),f.onUnmounted(()=>{if(n.enableRaycasting){if((e==null?void 0:e.value)==null)return;e==null||e.value.removeEventListener("click",o),e==null||e.value.removeEventListener("mousemove",r)}}),f.watch(()=>n.enableRaycasting,l=>{l?(e==null||e.value.addEventListener("click",o),e==null||e.value.addEventListener("mousemove",r)):(e==null||e.value.removeEventListener("click",o),e==null||e.value.removeEventListener("mousemove",r))})}function Mt(c){const n=new a.Vector2,t=c.currentTarget.getBoundingClientRect();return n.x=(c.clientX-t.left)/t.width*2-1,n.y=-((c.clientY-t.top)/t.height)*2+1,n}var le={},we={},Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.callHandlers=Un;function Et(c,n){let t=null;try{t=c(n)}catch(e){return Promise.reject(e)}return t&&t.then?t:Promise.resolve(t)}function Un(c,n){return!n||n.length===0?new Promise(t=>{}):n.length===1?Et(n[0],c):Promise.all(n.map(t=>Et(t,c)))}var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.DEFAULT_PARAM=void 0;const $n="$_DEFAULT_$";Ce.DEFAULT_PARAM=$n,Object.defineProperty(we,"__esModule",{value:!0}),we.slot=Zn,we.connectSlot=qn,we.defaultSlotConfig=void 0;var Xn=Ne,Fe=Ce;const et=()=>{throw new Error("Slot not connected")},Tt={noBuffer:!1,autoReconnect:!0};we.defaultSlotConfig=Tt;const Yn=c=>Object.assign(()=>et(),{config:c,lazy:()=>et,on:()=>et,slotName:"Not connected"}),Le="LOCAL_TRANSPORT",Pe=(c,n)=>Object.keys(n).reduce((t,e)=>t.concat(n[e][c]||[]),[]),St=c=>Object.keys(c).reduce((n,t)=>{const e=c[t],o=Object.keys(e).filter(r=>(e[r]||[]).length>0),i=[...n,...o];return[...new Set(i)]},[]);function Zn(c=Tt){return Yn(c)}function qn(c,n,t={}){const e=n.reduce((m,w,y)=>({...m,[y]:{}}),{[Le]:{}}),o=n.reduce((m,w,y)=>({...m,[y]:{}}),{}),i=(m,w)=>{let y=()=>{};const M=new Promise(_=>y=_);o[m][w]={registered:M,onRegister:y}},s=[],r=[],l=m=>s.forEach(w=>w(m)),u=m=>r.forEach(w=>w(m));n.forEach((m,w)=>{const y=(E=Fe.DEFAULT_PARAM,A)=>{if(!o[w])return;const x=e[w][E]||[];e[w][E]=x.concat(A),Pe(E,e).length===1&&l(E),o[w][E]||i(String(w),E),o[w][E].onRegister()},M=(E=Fe.DEFAULT_PARAM,A)=>{const S=(e[w][E]||[]).indexOf(A);S>-1&&e[w][E].splice(S,1),Pe(E,e).length===0&&u(E),o[w]&&i(String(w),E)},_=()=>{o[w]&&Object.keys(o[w]).forEach(E=>{o[w][E].onRegister()}),delete o[w]};m.addRemoteHandlerRegistrationCallback(c,y),m.addRemoteHandlerUnregistrationCallback(c,M),m.addRemoteEventListChangedListener(c,_)});function h(m,w){const y=arguments.length===2,M=y?w:m,_=y?m:Fe.DEFAULT_PARAM,E=()=>{const x=Pe(_,e);return(0,Xn.callHandlers)(M,x)};if(n.length===0)return E();const A=[];if(t.autoReconnect&&n.forEach(x=>{A.push(x.autoReconnect())}),t.noBuffer)return Promise.all(A).then(()=>E());{n.forEach((S,L)=>{o[L]&&!o[L][_]&&i(String(L),_)});const x=n.reduce((S,L,I)=>{var D;return[...S,...(D=o[I]&&[o[I][_].registered])!==null&&D!==void 0?D:[]]},[]);return Promise.all(x).then(()=>E())}}function d(m,w){return s.push(m),r.push(w),St(e).forEach(m),()=>{St(e).forEach(w);const y=s.indexOf(m);y>-1&&s.splice(y,1);const M=r.indexOf(w);M>-1&&r.splice(M,1)}}function p(m,w){let y="",M=()=>new Promise(E=>E());return typeof m=="string"?(y=m,M=w||M):(y=Fe.DEFAULT_PARAM,M=m),n.forEach(E=>E.registerHandler(c,y,M)),e[Le][y]=(e[Le][y]||[]).concat(M),Pe(y,e).length===1&&l(y),()=>{n.forEach(S=>S.unregisterHandler(c,y,M));const A=(e[Le][y]||[]).indexOf(M);A!==-1&&e[Le][y].splice(A,1),Pe(y,e).length===0&&u(y)}}return Object.assign(h,{on:p,lazy:d,config:t,slotName:c})}var Be={},ze={};Object.defineProperty(ze,"__esModule",{value:!0}),ze.Transport=void 0;var Kn=Ne;let Qn=0;const Wn=()=>`${Qn++}`,Jn=c=>{throw new Error(`Should not happen: ${c}`)},tt={TIMED_OUT:"TIMED_OUT",REMOTE_CONNECTION_CLOSED:"REMOTE_CONNECTION_CLOSED",CHANNEL_NOT_READY:"CHANNEL_NOT_READY"};class eo{constructor(n,t){this._channel=n,this._localHandlers={},this._localHandlerRegistrations={},this._remoteHandlers={},this._remoteHandlerRegistrationCallbacks={},this._remoteHandlerDeletionCallbacks={},this._remoteIgnoredEventsCallbacks={},this._pendingRequests={},this._channelReady=!1,this._channel.onData(e=>{switch(e.type){case"request":return this._requestReceived(e);case"response":return this._responseReceived(e);case"handler_registered":return this._registerRemoteHandler(e);case"handler_unregistered":return this._unregisterRemoteHandler(e);case"error":return this._errorReceived(e);case"event_list":return this._remoteIgnoredEventsReceived(e);default:Jn(e)}}),this._channel.onConnect(()=>{this._channelReady=!0,Object.keys(this._localHandlerRegistrations).forEach(e=>{this._localHandlerRegistrations[e].forEach(o=>{this._channel.send(o)})}),t&&this._channel.send({type:"event_list",ignoredEvents:t})}),this._channel.onDisconnect(()=>{this._channelReady=!1,this._unregisterAllRemoteHandlers(),this._rejectAllPendingRequests(new Error(`${tt.REMOTE_CONNECTION_CLOSED}`))}),this._channel.onError(e=>this._rejectAllPendingRequests(e))}_remoteIgnoredEventsReceived({ignoredEvents:n}){Object.keys(this._remoteIgnoredEventsCallbacks).forEach(t=>{n.includes(t)&&this._remoteIgnoredEventsCallbacks[t]()})}_requestReceived({slotName:n,data:t,id:e,param:o}){const i=this._localHandlers[n];if(!i)return;const s=i[o];s&&(0,Kn.callHandlers)(t,s).then(r=>this._channel.send({type:"response",slotName:n,id:e,data:r,param:o})).catch(r=>this._channel.send({id:e,message:`${r}`,param:o,slotName:n,stack:r.stack||"",type:"error"}))}_responseReceived({slotName:n,data:t,id:e,param:o}){const i=this._pendingRequests[n];!i||!i[o]||!i[o][e]||(i[o][e].resolve(t),delete i[o][e])}_errorReceived({slotName:n,id:t,message:e,stack:o,param:i}){const s=this._pendingRequests[n];if(!s||!s[i]||!s[i][t])return;const r=new Error(`${e} on ${n} with param ${i}`);r.stack=o||r.stack,this._pendingRequests[n][i][t].reject(r),delete this._pendingRequests[n][i][t]}_registerRemoteHandler({slotName:n,param:t}){const e=this._remoteHandlerRegistrationCallbacks[n];if(!e)return;const o=this._remoteHandlers[n];if(o&&o[t])return;const i=s=>new Promise((r,l)=>{if(!this._channelReady)return l(new Error(`${tt.CHANNEL_NOT_READY} on ${n}`));const u=Wn();this._pendingRequests[n]=this._pendingRequests[n]||{},this._pendingRequests[n][t]=this._pendingRequests[n][t]||{},this._pendingRequests[n][t][u]={resolve:r,reject:l},this._channel.send({type:"request",id:u,slotName:n,param:t,data:s}),setTimeout(()=>{const p=((this._pendingRequests[n]||{})[t]||{})[u];if(p){const m=new Error(`${tt.TIMED_OUT} on ${n} with param ${t}`);p.reject(m),delete this._pendingRequests[n][t][u]}},this._channel.timeout)});this._remoteHandlers[n]=this._remoteHandlers[n]||{},this._remoteHandlers[n][t]=i,e(t,i)}_unregisterRemoteHandler({slotName:n,param:t}){const e=this._remoteHandlerDeletionCallbacks[n],o=this._remoteHandlers[n];if(!o)return;const i=o[t];i&&e&&(e(t,i),delete this._remoteHandlers[n][t])}_unregisterAllRemoteHandlers(){Object.keys(this._remoteHandlerDeletionCallbacks).forEach(n=>{const t=this._remoteHandlers[n];if(!t)return;Object.keys(t).filter(o=>t[o]).forEach(o=>this._unregisterRemoteHandler({slotName:n,param:o}))})}_rejectAllPendingRequests(n){Object.keys(this._pendingRequests).forEach(t=>{Object.keys(this._pendingRequests[t]).forEach(e=>{Object.keys(this._pendingRequests[t][e]).forEach(o=>{this._pendingRequests[t][e][o].reject(n)})}),this._pendingRequests[t]={}})}addRemoteHandlerRegistrationCallback(n,t){this._remoteHandlerRegistrationCallbacks[n]||(this._remoteHandlerRegistrationCallbacks[n]=t)}addRemoteHandlerUnregistrationCallback(n,t){this._remoteHandlerDeletionCallbacks[n]||(this._remoteHandlerDeletionCallbacks[n]=t)}addRemoteEventListChangedListener(n,t){this._remoteIgnoredEventsCallbacks[n]||(this._remoteIgnoredEventsCallbacks[n]=t)}registerHandler(n,t,e){if(this._localHandlers[n]=this._localHandlers[n]||{},this._localHandlers[n][t]=this._localHandlers[n][t]||[],this._localHandlers[n][t].push(e),this._localHandlers[n][t].length===1){const o={type:"handler_registered",param:t,slotName:n};this._localHandlerRegistrations[t]=this._localHandlerRegistrations[t]||[],this._localHandlerRegistrations[t].push(o),this._channelReady&&this._channel.send(o)}}unregisterHandler(n,t,e){const o=this._localHandlers[n];if(o&&o[t]){const i=o[t].indexOf(e);if(i>-1&&(o[t].splice(i,1),o[t].length===0)){const s={type:"handler_unregistered",param:t,slotName:n};this._channelReady&&this._channel.send(s)}}}isDisconnected(){return!this._channelReady}autoReconnect(){if(this.isDisconnected()&&this._channel.autoReconnect){const n=new Promise(t=>{this._channel.onConnect(()=>t())});return this._channel.autoReconnect(),n}return Promise.resolve()}}ze.Transport=eo,Object.defineProperty(Be,"__esModule",{value:!0}),Be.combineEvents=oo,Be.createEventBus=so;var to=we,no=ze;function oo(...c){const n=c.reduce((e,o)=>(e.push.apply(e,Object.keys(o)),e),[]),t=[...new Set(n)];if(n.length>t.length)throw new Error("ts-event-bus: duplicate slots encountered in combineEvents.");return Object.assign({},...c)}function so(c){const n=(c.channels||[]).map(e=>new no.Transport(e,c.ignoredEvents)),t={};for(const e in c.events)c.events.hasOwnProperty(e)&&(!c.ignoredEvents||c.ignoredEvents&&!c.ignoredEvents.includes(e))&&(t[e]=(0,to.connectSlot)(e,n,c.events[e].config));return t}var io={},Re={};Object.defineProperty(Re,"__esModule",{value:!0}),Re.GenericChannel=void 0;const ao=5e3;class ro{constructor(n=ao){this._timeout=n,this._onMessageCallbacks=[],this._onConnectCallbacks=[],this._onDisconnectCallbacks=[],this._onErrorCallbacks=[],this._ready=!1}get timeout(){return this._timeout}onData(n){this._onMessageCallbacks.indexOf(n)===-1&&this._onMessageCallbacks.push(n)}onConnect(n){this._ready&&n(),this._onConnectCallbacks.push(n)}onDisconnect(n){this._onDisconnectCallbacks.push(n)}onError(n){this._onErrorCallbacks.push(n)}_messageReceived(n){this._onMessageCallbacks.forEach(t=>t(n))}_error(n){this._onErrorCallbacks.forEach(t=>t(n))}_connected(){this._ready=!0,this._onConnectCallbacks.forEach(n=>n())}_disconnected(){this._ready=!1,this._onDisconnectCallbacks.forEach(n=>n())}}Re.GenericChannel=ro;var Ve={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.isTransportMessage=co;function co(c){switch(c.type){case"request":case"response":case"error":case"handler_unregistered":case"handler_registered":case"event_list":return!0;default:return!1}}Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.ChunkedChannel=void 0;var lo=Re,uo=Ue;const Te={getRandomId:()=>[...Array(30)].map(()=>Math.random().toString(36)[3]).join(""),str2byteArray:c=>{const n=new Uint16Array(c.length);for(let t=0,e=c.length;t<e;t++)n[t]=c.charCodeAt(t);return n},convertUintArrayToString:(c,n)=>{if(n===-1)return String.fromCharCode.apply(null,c);{let t="";for(let e=0;e<c.length;e+=n)e+n>c.length?t+=String.fromCharCode.apply(null,c.subarray(e)):t+=String.fromCharCode.apply(null,c.subarray(e,e+n));return t}},checkForChunkId:c=>{if(!c.chunkId)throw new Error(`ChunkedMessage did not have a chunkId: ${JSON.stringify(c)}`)}};class fo extends lo.GenericChannel{constructor(n){super(n.timeout),this._chunkSize=void 0,this._maxStringAlloc=void 0,this._sender=void 0,this._buffer={},this._chunkSize=n.chunkSize,this._sender=n.sender,this._maxStringAlloc=n.maxStringAlloc||-1}send(n){const t=JSON.stringify(n);if(t.length<=this._chunkSize){this._sender(n);return}const e=Te.str2byteArray(t),o=Te.getRandomId();this._sender({type:"chunk_start",chunkId:o,size:t.length});const i=(s=0)=>{let r=e.slice(s,s+this._chunkSize);r.length&&(this._sender({type:"chunk_data",chunkId:o,data:Array.from(r)}),i(s+this._chunkSize))};i(),this._sender({type:"chunk_end",chunkId:o})}_messageReceived(n){switch(n.type){case"chunk_start":this._receiveNewChunk(n);break;case"chunk_data":this._receiveChunkData(n);break;case"chunk_end":const t=this._mergeChunks(n);super._messageReceived(t);break;default:super._messageReceived(n)}}_receiveNewChunk(n){if(Te.checkForChunkId(n),this._buffer[n.chunkId])throw new Error(`There was already an entry in the buffer for chunkId ${n.chunkId}`);this._buffer[n.chunkId]={id:n.chunkId,chunks:[],size:n.size}}_receiveChunkData(n){if(Te.checkForChunkId(n),!this._buffer[n.chunkId])throw new Error(`ChunkId ${n.chunkId} was not found in the buffer`);this._buffer[n.chunkId].chunks.push(n.data)}_mergeChunks(n){if(Te.checkForChunkId(n),!this._buffer[n.chunkId])throw new Error(`ChunkId ${n.chunkId} was not found in the buffer`);const t=this._buffer[n.chunkId].chunks.reduce((i,s,r)=>(s.forEach((l,u)=>i.uintArray[i.currentIx+u]=l),i.currentIx+=s.length,i),{uintArray:new Uint16Array(this._buffer[n.chunkId].size),currentIx:0});let e;const o=Te.convertUintArrayToString(t.uintArray,this._maxStringAlloc);try{e=JSON.parse(o)}catch{throw new Error(`Not a valid JSON string: ${o}`)}if(!(0,uo.isTransportMessage)(e))throw new Error(`Not a transport message: ${JSON.stringify(e)}`);return e}}Ve.ChunkedChannel=fo,function(c){Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"slot",{enumerable:!0,get:function(){return n.slot}}),Object.defineProperty(c,"Slot",{enumerable:!0,get:function(){return n.Slot}}),Object.defineProperty(c,"EventDeclaration",{enumerable:!0,get:function(){return t.EventDeclaration}}),Object.defineProperty(c,"combineEvents",{enumerable:!0,get:function(){return t.combineEvents}}),Object.defineProperty(c,"createEventBus",{enumerable:!0,get:function(){return t.createEventBus}}),Object.defineProperty(c,"Channel",{enumerable:!0,get:function(){return e.Channel}}),Object.defineProperty(c,"GenericChannel",{enumerable:!0,get:function(){return o.GenericChannel}}),Object.defineProperty(c,"ChunkedChannel",{enumerable:!0,get:function(){return i.ChunkedChannel}}),Object.defineProperty(c,"TransportMessage",{enumerable:!0,get:function(){return s.TransportMessage}}),Object.defineProperty(c,"DEFAULT_PARAM",{enumerable:!0,get:function(){return r.DEFAULT_PARAM}});var n=we,t=Be,e=io,o=Re,i=Ve,s=Ue,r=Ce}(le);const ho={geometryChanged:le.slot(),object3DChanged:le.slot(),object3DTranslated:le.slot(),sayHello:le.slot(),getTime:le.slot(),multiply:le.slot(),ping:le.slot()},v=le.createEventBus({events:ho}),At=f.defineComponent({__name:"Renderer",props:{alpha:{type:Boolean,default:!1},antialias:{type:Boolean,default:!1},autoResize:{type:Boolean,default:!0},camera:null,height:{default:0},frameLimit:{default:60},onBeforeRender:{type:Function,default:()=>{}},onAfterRender:{type:Function,default:()=>{}},shadowMapEnabled:{type:Boolean,default:!1},width:{default:0}},setup(c,{expose:n}){const t=c;let e=f.ref(null);const o=[],i=f.reactive([]),s=f.reactive([]);let r=f.ref(null);const l=f.ref([]),u=f.ref([]),h=f.ref();f.provide("canvas",h);let d=!0,p=Date.now(),m=1e3/t.frameLimit;f.watch(()=>t.camera,_=>w(_));const w=_=>{if(_){const E=l.value.find(A=>A.name===_);E===void 0&&(r.value=null),r.value=E}else r.value=l.value[0]};function y(){e.value!==null&&(e.value.shadowMap.enabled=t.shadowMapEnabled,m=1e3/t.frameLimit,t.autoResize||e.value.setSize(t.width,t.height))}f.onMounted(()=>{e.value=new a.WebGLRenderer({canvas:h.value,antialias:t.antialias,alpha:t.alpha}),e.value.setSize(1,1),y(),w(t.camera),new ResizeObserver(E=>{E.forEach(A=>{e.value&&t.autoResize&&e.value.setSize(A.contentRect.width,A.contentRect.height)})}).observe(h.value.parentElement),M()}),f.onUnmounted(()=>{for(let _ of o)ae(_)});function M(){if(e.value===null)return requestAnimationFrame(M);const _=Date.now(),E=_-p;if(m>-1&&E<m)return requestAnimationFrame(M);if(p=_-E%m,t.onBeforeRender&&t.onBeforeRender(),u.value.length>0&&r.value)for(const A of u.value)A.value!==null&&(A.value.object.uuid===r.value.uuid?(A.value.enabled=d,A.value.update()):A.value.enabled=!1);if(r.value&&e)for(const A of o)e.value.render(A,r.value);t.onAfterRender&&t.onAfterRender(),requestAnimationFrame(M)}return y(),f.watch(()=>t.shadowMapEnabled,()=>y()),f.watch(()=>t.frameLimit,()=>y()),f.watch(()=>t.width,()=>y()),f.watch(()=>t.height,()=>y()),f.provide("addCamera",_=>l.value.push(_)),f.provide("addScene",_=>o.push(_)),f.provide("addGeometry",_=>i.push(_)),f.provide("getGeometry",_=>i.find(E=>E.name===_)),f.provide("addMaterial",_=>s.push(_)),f.provide("getMaterial",_=>s.find(E=>E.name===_)),f.provide("addControls",_=>u.value.push(_)),f.provide("enableAllControls",()=>{d=!0}),f.provide("disableAllControls",()=>{d=!1}),f.provide("camera",r),n({three:e,eventBus:v}),(_,E)=>(f.openBlock(),f.createElementBlock(f.Fragment,null,[f.createElementVNode("canvas",{ref_key:"canvas",ref:h},null,512),f.renderSlot(_.$slots,"default")],64))}}),xt=f.defineComponent({__name:"Scene",props:{background:{default:16777215}},setup(c,{expose:n}){const t=c,e=new a.Scene;f.provide("scene",e),f.inject("addScene")(e);function o(i){i.background&&(e.background=new a.Color(i.background))}return o(t),f.watch(()=>t.background,()=>o(t)),n({three:e}),(i,s)=>f.renderSlot(i.$slots,"default")}}),po={name:"PerspectiveCamera"},Ct=f.defineComponent({...po,props:{aspect:{default:1},autoResize:{type:Boolean,default:!0},far:{default:2e3},lookAt:{default:()=>[0,0,0]},name:{default:""},near:{default:.1},position:{default:()=>[0,0,0]},up:{default:()=>[0,1,0]}},setup(c,{expose:n}){const t=c,e=new a.PerspectiveCamera(75,window.innerWidth/window.innerHeight*1e3,.1,1e3);f.inject("addCamera")(e);const o=f.inject("canvas");f.watch(o,()=>{new ResizeObserver(r=>{r.forEach(l=>{t.autoResize&&(e.aspect=l.contentRect.width/l.contentRect.height,e.updateProjectionMatrix())})}).observe(o.value)});function i(){e.name=t.name,t.autoResize||(e.aspect=t.aspect),e.near=t.near,e.far=t.far,e.updateProjectionMatrix()}return i(),P(t,"position",e,!0,i),P(t,"up",e,!0,i),P(t,"lookAt",e,!0,i),b(t,"name",i),b(t,"aspect",i),b(t,"near",i),b(t,"far",i),f.provide("parentCamera",e),n({three:e}),(s,r)=>f.renderSlot(s.$slots,"default")}}),mo={name:"OrthographicCamera"},Lt=f.defineComponent({...mo,props:{far:{default:2e3},lookAt:{default:()=>[0,0,0]},name:{default:""},near:{default:.1},position:{default:()=>[0,0,0]},up:{default:()=>[0,1,0]}},setup(c,{expose:n}){const t=c,e=new a.OrthographicCamera(-10,10,10,-10,.1,1e3);e.lookAt(0,0,0),e.updateProjectionMatrix(),f.inject("addCamera")(e);const o=f.inject("canvas");f.watch(o,()=>{new ResizeObserver(r=>{r.forEach(l=>{const u=l.contentRect.width/l.contentRect.height;e.left=e.bottom*u,e.right=e.top*u,e.updateProjectionMatrix()})}).observe(o.value)});function i(){e.name=t.name,e.near=t.near,e.far=t.far,e.updateProjectionMatrix()}return i(),P(t,"position",e,!0,i),P(t,"up",e,!0,i),P(t,"lookAt",e,!0,i),b(t,"name",i),b(t,"near",i),b(t,"far",i),f.provide("parentCamera",e),n({three:e}),(s,r)=>f.renderSlot(s.$slots,"default")}}),Pt={type:"change"},nt={type:"start"},Rt={type:"end"};class go extends a.EventDispatcher{constructor(n,t){super(),this.object=n,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new a.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:a.MOUSE.ROTATE,MIDDLE:a.MOUSE.DOLLY,RIGHT:a.MOUSE.PAN},this.touches={ONE:a.TOUCH.ROTATE,TWO:a.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return r.phi},this.getAzimuthalAngle=function(){return r.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(g){g.addEventListener("keydown",Nn),this._domElementKeyEvents=g},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(Pt),e.update(),i=o.NONE},this.update=function(){const g=new a.Vector3,O=new a.Quaternion().setFromUnitVectors(n.up,new a.Vector3(0,1,0)),V=O.clone().invert(),Y=new a.Vector3,ie=new a.Quaternion,xe=2*Math.PI;return function(){const Vn=e.object.position;g.copy(Vn).sub(e.target),g.applyQuaternion(O),r.setFromVector3(g),e.autoRotate&&i===o.NONE&&U(I()),e.enableDamping?(r.theta+=l.theta*e.dampingFactor,r.phi+=l.phi*e.dampingFactor):(r.theta+=l.theta,r.phi+=l.phi);let de=e.minAzimuthAngle,fe=e.maxAzimuthAngle;return isFinite(de)&&isFinite(fe)&&(de<-Math.PI?de+=xe:de>Math.PI&&(de-=xe),fe<-Math.PI?fe+=xe:fe>Math.PI&&(fe-=xe),de<=fe?r.theta=Math.max(de,Math.min(fe,r.theta)):r.theta=r.theta>(de+fe)/2?Math.max(de,r.theta):Math.min(fe,r.theta)),r.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,r.phi)),r.makeSafe(),r.radius*=u,r.radius=Math.max(e.minDistance,Math.min(e.maxDistance,r.radius)),e.enableDamping===!0?e.target.addScaledVector(h,e.dampingFactor):e.target.add(h),g.setFromSpherical(r),g.applyQuaternion(V),Vn.copy(e.target).add(g),e.object.lookAt(e.target),e.enableDamping===!0?(l.theta*=1-e.dampingFactor,l.phi*=1-e.dampingFactor,h.multiplyScalar(1-e.dampingFactor)):(l.set(0,0,0),h.set(0,0,0)),u=1,d||Y.distanceToSquared(e.object.position)>s||8*(1-ie.dot(e.object.quaternion))>s?(e.dispatchEvent(Pt),Y.copy(e.object.position),ie.copy(e.object.quaternion),d=!1,!0):!1}}(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",Fn),e.domElement.removeEventListener("pointerdown",Ee),e.domElement.removeEventListener("pointercancel",Hn),e.domElement.removeEventListener("wheel",Gn),e.domElement.removeEventListener("pointermove",ht),e.domElement.removeEventListener("pointerup",pt),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",Nn)};const e=this,o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=o.NONE;const s=1e-6,r=new a.Spherical,l=new a.Spherical;let u=1;const h=new a.Vector3;let d=!1;const p=new a.Vector2,m=new a.Vector2,w=new a.Vector2,y=new a.Vector2,M=new a.Vector2,_=new a.Vector2,E=new a.Vector2,A=new a.Vector2,x=new a.Vector2,S=[],L={};function I(){return 2*Math.PI/60/60*e.autoRotateSpeed}function D(){return Math.pow(.95,e.zoomSpeed)}function U(g){l.theta-=g}function ne(g){l.phi-=g}const W=function(){const g=new a.Vector3;return function(V,Y){g.setFromMatrixColumn(Y,0),g.multiplyScalar(-V),h.add(g)}}(),K=function(){const g=new a.Vector3;return function(V,Y){e.screenSpacePanning===!0?g.setFromMatrixColumn(Y,1):(g.setFromMatrixColumn(Y,0),g.crossVectors(e.object.up,g)),g.multiplyScalar(V),h.add(g)}}(),N=function(){const g=new a.Vector3;return function(V,Y){const ie=e.domElement;if(e.object.isPerspectiveCamera){const xe=e.object.position;g.copy(xe).sub(e.target);let We=g.length();We*=Math.tan(e.object.fov/2*Math.PI/180),W(2*V*We/ie.clientHeight,e.object.matrix),K(2*Y*We/ie.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?(W(V*(e.object.right-e.object.left)/e.object.zoom/ie.clientWidth,e.object.matrix),K(Y*(e.object.top-e.object.bottom)/e.object.zoom/ie.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}}();function B(g){e.object.isPerspectiveCamera?u/=g:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom*g)),e.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function H(g){e.object.isPerspectiveCamera?u*=g:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/g)),e.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function oe(g){p.set(g.clientX,g.clientY)}function $(g){E.set(g.clientX,g.clientY)}function Q(g){y.set(g.clientX,g.clientY)}function z(g){m.set(g.clientX,g.clientY),w.subVectors(m,p).multiplyScalar(e.rotateSpeed);const O=e.domElement;U(2*Math.PI*w.x/O.clientHeight),ne(2*Math.PI*w.y/O.clientHeight),p.copy(m),e.update()}function ge(g){A.set(g.clientX,g.clientY),x.subVectors(A,E),x.y>0?B(D()):x.y<0&&H(D()),E.copy(A),e.update()}function ye(g){M.set(g.clientX,g.clientY),_.subVectors(M,y).multiplyScalar(e.panSpeed),N(_.x,_.y),y.copy(M),e.update()}function ue(g){g.deltaY<0?H(D()):g.deltaY>0&&B(D()),e.update()}function He(g){let O=!1;switch(g.code){case e.keys.UP:g.ctrlKey||g.metaKey||g.shiftKey?ne(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):N(0,e.keyPanSpeed),O=!0;break;case e.keys.BOTTOM:g.ctrlKey||g.metaKey||g.shiftKey?ne(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):N(0,-e.keyPanSpeed),O=!0;break;case e.keys.LEFT:g.ctrlKey||g.metaKey||g.shiftKey?U(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):N(e.keyPanSpeed,0),O=!0;break;case e.keys.RIGHT:g.ctrlKey||g.metaKey||g.shiftKey?U(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):N(-e.keyPanSpeed,0),O=!0;break}O&&(g.preventDefault(),e.update())}function _e(){if(S.length===1)p.set(S[0].pageX,S[0].pageY);else{const g=.5*(S[0].pageX+S[1].pageX),O=.5*(S[0].pageY+S[1].pageY);p.set(g,O)}}function Ge(){if(S.length===1)y.set(S[0].pageX,S[0].pageY);else{const g=.5*(S[0].pageX+S[1].pageX),O=.5*(S[0].pageY+S[1].pageY);y.set(g,O)}}function Qe(){const g=S[0].pageX-S[1].pageX,O=S[0].pageY-S[1].pageY,V=Math.sqrt(g*g+O*O);E.set(0,V)}function T(){e.enableZoom&&Qe(),e.enablePan&&Ge()}function R(){e.enableZoom&&Qe(),e.enableRotate&&_e()}function F(g){if(S.length==1)m.set(g.pageX,g.pageY);else{const V=mt(g),Y=.5*(g.pageX+V.x),ie=.5*(g.pageY+V.y);m.set(Y,ie)}w.subVectors(m,p).multiplyScalar(e.rotateSpeed);const O=e.domElement;U(2*Math.PI*w.x/O.clientHeight),ne(2*Math.PI*w.y/O.clientHeight),p.copy(m)}function X(g){if(S.length===1)M.set(g.pageX,g.pageY);else{const O=mt(g),V=.5*(g.pageX+O.x),Y=.5*(g.pageY+O.y);M.set(V,Y)}_.subVectors(M,y).multiplyScalar(e.panSpeed),N(_.x,_.y),y.copy(M)}function se(g){const O=mt(g),V=g.pageX-O.x,Y=g.pageY-O.y,ie=Math.sqrt(V*V+Y*Y);A.set(0,ie),x.set(0,Math.pow(A.y/E.y,e.zoomSpeed)),B(x.y),E.copy(A)}function ce(g){e.enableZoom&&se(g),e.enablePan&&X(g)}function Dn(g){e.enableZoom&&se(g),e.enableRotate&&F(g)}function Ee(g){e.enabled!==!1&&(S.length===0&&(e.domElement.setPointerCapture(g.pointerId),e.domElement.addEventListener("pointermove",ht),e.domElement.addEventListener("pointerup",pt)),Ns(g),g.pointerType==="touch"?Hs(g):js(g))}function ht(g){e.enabled!==!1&&(g.pointerType==="touch"?Gs(g):Ds(g))}function pt(g){Bn(g),S.length===0&&(e.domElement.releasePointerCapture(g.pointerId),e.domElement.removeEventListener("pointermove",ht),e.domElement.removeEventListener("pointerup",pt)),e.dispatchEvent(Rt),i=o.NONE}function Hn(g){Bn(g)}function js(g){let O;switch(g.button){case 0:O=e.mouseButtons.LEFT;break;case 1:O=e.mouseButtons.MIDDLE;break;case 2:O=e.mouseButtons.RIGHT;break;default:O=-1}switch(O){case a.MOUSE.DOLLY:if(e.enableZoom===!1)return;$(g),i=o.DOLLY;break;case a.MOUSE.ROTATE:if(g.ctrlKey||g.metaKey||g.shiftKey){if(e.enablePan===!1)return;Q(g),i=o.PAN}else{if(e.enableRotate===!1)return;oe(g),i=o.ROTATE}break;case a.MOUSE.PAN:if(g.ctrlKey||g.metaKey||g.shiftKey){if(e.enableRotate===!1)return;oe(g),i=o.ROTATE}else{if(e.enablePan===!1)return;Q(g),i=o.PAN}break;default:i=o.NONE}i!==o.NONE&&e.dispatchEvent(nt)}function Ds(g){switch(i){case o.ROTATE:if(e.enableRotate===!1)return;z(g);break;case o.DOLLY:if(e.enableZoom===!1)return;ge(g);break;case o.PAN:if(e.enablePan===!1)return;ye(g);break}}function Gn(g){e.enabled===!1||e.enableZoom===!1||i!==o.NONE||(g.preventDefault(),e.dispatchEvent(nt),ue(g),e.dispatchEvent(Rt))}function Nn(g){e.enabled===!1||e.enablePan===!1||He(g)}function Hs(g){switch(zn(g),S.length){case 1:switch(e.touches.ONE){case a.TOUCH.ROTATE:if(e.enableRotate===!1)return;_e(),i=o.TOUCH_ROTATE;break;case a.TOUCH.PAN:if(e.enablePan===!1)return;Ge(),i=o.TOUCH_PAN;break;default:i=o.NONE}break;case 2:switch(e.touches.TWO){case a.TOUCH.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;T(),i=o.TOUCH_DOLLY_PAN;break;case a.TOUCH.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;R(),i=o.TOUCH_DOLLY_ROTATE;break;default:i=o.NONE}break;default:i=o.NONE}i!==o.NONE&&e.dispatchEvent(nt)}function Gs(g){switch(zn(g),i){case o.TOUCH_ROTATE:if(e.enableRotate===!1)return;F(g),e.update();break;case o.TOUCH_PAN:if(e.enablePan===!1)return;X(g),e.update();break;case o.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;ce(g),e.update();break;case o.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Dn(g),e.update();break;default:i=o.NONE}}function Fn(g){e.enabled!==!1&&g.preventDefault()}function Ns(g){S.push(g)}function Bn(g){delete L[g.pointerId];for(let O=0;O<S.length;O++)if(S[O].pointerId==g.pointerId){S.splice(O,1);return}}function zn(g){let O=L[g.pointerId];O===void 0&&(O=new a.Vector2,L[g.pointerId]=O),O.set(g.pageX,g.pageY)}function mt(g){const O=g.pointerId===S[0].pointerId?S[1]:S[0];return L[O.pointerId]}e.domElement.addEventListener("contextmenu",Fn),e.domElement.addEventListener("pointerdown",Ee),e.domElement.addEventListener("pointercancel",Hn),e.domElement.addEventListener("wheel",Gn,{passive:!1}),this.update()}}const yo={name:"OrbitControls",render:()=>null},Ot=f.defineComponent({...yo,props:{enablePan:{type:Boolean,default:!0},enableRotate:{type:Boolean,default:!0},enableZoom:{type:Boolean,default:!0},minZoom:{default:0},maxZoom:{default:1/0},minDistance:{default:0},maxDistance:{default:1/0},minPolarAngle:{default:0},maxPolarAngle:{default:Math.PI},minAzimuthAngle:{default:1/0},maxAzimuthAngle:{default:1/0},target:{default:()=>[0,0,0]}},setup(c,{expose:n}){const t=c,e=f.ref(null);f.inject("addControls")(e);const o=f.inject("parentCamera"),i=f.inject("canvas");function s(){e.value!=null&&(e.value.enablePan=t.enablePan,e.value.enableRotate=t.enableRotate,e.value.enableZoom=t.enableZoom,e.value.minZoom=t.minZoom,e.value.maxZoom=t.maxZoom,e.value.minDistance=t.minDistance,e.value.maxDistance=t.maxDistance,e.value.minPolarAngle=t.minPolarAngle,e.value.maxPolarAngle=t.maxPolarAngle,e.value.minAzimuthAngle=t.minAzimuthAngle,e.value.maxAzimuthAngle=t.maxAzimuthAngle)}let r=!1;const l=()=>{i.value&&(r||(e.value=new go(o,i.value),s(),P(t,"target",e.value),r=!0))};return f.watch(i,()=>{l()}),s(),b(t,"enablePan",s),b(t,"enableRotate",s),b(t,"enableZoom",s),b(t,"minZoom",s),b(t,"maxZoom",s),b(t,"minDistance",s),b(t,"maxDistance",s),b(t,"minPolarAngle",s),b(t,"maxPolarAngle",s),b(t,"minAzimuthAngle",s),b(t,"maxAzimuthAngle",s),n({three:e}),{props:t,three:e,camera:o,canvas:i,applyProps:s,get boundCamera(){return r},set boundCamera(u){r=u},tryBindCamera:l}}}),ot={type:"change"},st={type:"start"},it={type:"end"};class _o extends a.EventDispatcher{constructor(n,t){super();const e=this,o={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=n,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:a.MOUSE.ROTATE,MIDDLE:a.MOUSE.DOLLY,RIGHT:a.MOUSE.PAN},this.target=new a.Vector3;const i=1e-6,s=new a.Vector3;let r=1,l=o.NONE,u=o.NONE,h=0,d=0,p=0;const m=new a.Vector3,w=new a.Vector2,y=new a.Vector2,M=new a.Vector3,_=new a.Vector2,E=new a.Vector2,A=new a.Vector2,x=new a.Vector2,S=[],L={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const T=e.domElement.getBoundingClientRect(),R=e.domElement.ownerDocument.documentElement;e.screen.left=T.left+window.pageXOffset-R.clientLeft,e.screen.top=T.top+window.pageYOffset-R.clientTop,e.screen.width=T.width,e.screen.height=T.height};const I=function(){const T=new a.Vector2;return function(F,X){return T.set((F-e.screen.left)/e.screen.width,(X-e.screen.top)/e.screen.height),T}}(),D=function(){const T=new a.Vector2;return function(F,X){return T.set((F-e.screen.width*.5-e.screen.left)/(e.screen.width*.5),(e.screen.height+2*(e.screen.top-X))/e.screen.width),T}}();this.rotateCamera=function(){const T=new a.Vector3,R=new a.Quaternion,F=new a.Vector3,X=new a.Vector3,se=new a.Vector3,ce=new a.Vector3;return function(){ce.set(y.x-w.x,y.y-w.y,0);let Ee=ce.length();Ee?(m.copy(e.object.position).sub(e.target),F.copy(m).normalize(),X.copy(e.object.up).normalize(),se.crossVectors(X,F).normalize(),X.setLength(y.y-w.y),se.setLength(y.x-w.x),ce.copy(X.add(se)),T.crossVectors(ce,m).normalize(),Ee*=e.rotateSpeed,R.setFromAxisAngle(T,Ee),m.applyQuaternion(R),e.object.up.applyQuaternion(R),M.copy(T),p=Ee):!e.staticMoving&&p&&(p*=Math.sqrt(1-e.dynamicDampingFactor),m.copy(e.object.position).sub(e.target),R.setFromAxisAngle(M,p),m.applyQuaternion(R),e.object.up.applyQuaternion(R)),w.copy(y)}}(),this.zoomCamera=function(){let T;l===o.TOUCH_ZOOM_PAN?(T=h/d,h=d,e.object.isPerspectiveCamera?m.multiplyScalar(T):e.object.isOrthographicCamera?(e.object.zoom/=T,e.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(T=1+(E.y-_.y)*e.zoomSpeed,T!==1&&T>0&&(e.object.isPerspectiveCamera?m.multiplyScalar(T):e.object.isOrthographicCamera?(e.object.zoom/=T,e.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),e.staticMoving?_.copy(E):_.y+=(E.y-_.y)*this.dynamicDampingFactor)},this.panCamera=function(){const T=new a.Vector2,R=new a.Vector3,F=new a.Vector3;return function(){if(T.copy(x).sub(A),T.lengthSq()){if(e.object.isOrthographicCamera){const se=(e.object.right-e.object.left)/e.object.zoom/e.domElement.clientWidth,ce=(e.object.top-e.object.bottom)/e.object.zoom/e.domElement.clientWidth;T.x*=se,T.y*=ce}T.multiplyScalar(m.length()*e.panSpeed),F.copy(m).cross(e.object.up).setLength(T.x),F.add(R.copy(e.object.up).setLength(T.y)),e.object.position.add(F),e.target.add(F),e.staticMoving?A.copy(x):A.add(T.subVectors(x,A).multiplyScalar(e.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!e.noZoom||!e.noPan)&&(m.lengthSq()>e.maxDistance*e.maxDistance&&(e.object.position.addVectors(e.target,m.setLength(e.maxDistance)),_.copy(E)),m.lengthSq()<e.minDistance*e.minDistance&&(e.object.position.addVectors(e.target,m.setLength(e.minDistance)),_.copy(E)))},this.update=function(){m.subVectors(e.object.position,e.target),e.noRotate||e.rotateCamera(),e.noZoom||e.zoomCamera(),e.noPan||e.panCamera(),e.object.position.addVectors(e.target,m),e.object.isPerspectiveCamera?(e.checkDistances(),e.object.lookAt(e.target),s.distanceToSquared(e.object.position)>i&&(e.dispatchEvent(ot),s.copy(e.object.position))):e.object.isOrthographicCamera?(e.object.lookAt(e.target),(s.distanceToSquared(e.object.position)>i||r!==e.object.zoom)&&(e.dispatchEvent(ot),s.copy(e.object.position),r=e.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){l=o.NONE,u=o.NONE,e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.up.copy(e.up0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),m.subVectors(e.object.position,e.target),e.object.lookAt(e.target),e.dispatchEvent(ot),s.copy(e.object.position),r=e.object.zoom};function U(T){e.enabled!==!1&&(S.length===0&&(e.domElement.setPointerCapture(T.pointerId),e.domElement.addEventListener("pointermove",ne),e.domElement.addEventListener("pointerup",W)),He(T),T.pointerType==="touch"?z(T):H(T))}function ne(T){e.enabled!==!1&&(T.pointerType==="touch"?ge(T):oe(T))}function W(T){e.enabled!==!1&&(T.pointerType==="touch"?ye(T):$(),_e(T),S.length===0&&(e.domElement.releasePointerCapture(T.pointerId),e.domElement.removeEventListener("pointermove",ne),e.domElement.removeEventListener("pointerup",W)))}function K(T){_e(T)}function N(T){e.enabled!==!1&&(window.removeEventListener("keydown",N),u===o.NONE&&(T.code===e.keys[o.ROTATE]&&!e.noRotate?u=o.ROTATE:T.code===e.keys[o.ZOOM]&&!e.noZoom?u=o.ZOOM:T.code===e.keys[o.PAN]&&!e.noPan&&(u=o.PAN)))}function B(){e.enabled!==!1&&(u=o.NONE,window.addEventListener("keydown",N))}function H(T){if(l===o.NONE)switch(T.button){case e.mouseButtons.LEFT:l=o.ROTATE;break;case e.mouseButtons.MIDDLE:l=o.ZOOM;break;case e.mouseButtons.RIGHT:l=o.PAN;break}const R=u!==o.NONE?u:l;R===o.ROTATE&&!e.noRotate?(y.copy(D(T.pageX,T.pageY)),w.copy(y)):R===o.ZOOM&&!e.noZoom?(_.copy(I(T.pageX,T.pageY)),E.copy(_)):R===o.PAN&&!e.noPan&&(A.copy(I(T.pageX,T.pageY)),x.copy(A)),e.dispatchEvent(st)}function oe(T){const R=u!==o.NONE?u:l;R===o.ROTATE&&!e.noRotate?(w.copy(y),y.copy(D(T.pageX,T.pageY))):R===o.ZOOM&&!e.noZoom?E.copy(I(T.pageX,T.pageY)):R===o.PAN&&!e.noPan&&x.copy(I(T.pageX,T.pageY))}function $(){l=o.NONE,e.dispatchEvent(it)}function Q(T){if(e.enabled!==!1&&e.noZoom!==!0){switch(T.preventDefault(),T.deltaMode){case 2:_.y-=T.deltaY*.025;break;case 1:_.y-=T.deltaY*.01;break;default:_.y-=T.deltaY*25e-5;break}e.dispatchEvent(st),e.dispatchEvent(it)}}function z(T){switch(Ge(T),S.length){case 1:l=o.TOUCH_ROTATE,y.copy(D(S[0].pageX,S[0].pageY)),w.copy(y);break;default:l=o.TOUCH_ZOOM_PAN;const R=S[0].pageX-S[1].pageX,F=S[0].pageY-S[1].pageY;d=h=Math.sqrt(R*R+F*F);const X=(S[0].pageX+S[1].pageX)/2,se=(S[0].pageY+S[1].pageY)/2;A.copy(I(X,se)),x.copy(A);break}e.dispatchEvent(st)}function ge(T){switch(Ge(T),S.length){case 1:w.copy(y),y.copy(D(T.pageX,T.pageY));break;default:const R=Qe(T),F=T.pageX-R.x,X=T.pageY-R.y;d=Math.sqrt(F*F+X*X);const se=(T.pageX+R.x)/2,ce=(T.pageY+R.y)/2;x.copy(I(se,ce));break}}function ye(T){switch(S.length){case 0:l=o.NONE;break;case 1:l=o.TOUCH_ROTATE,y.copy(D(T.pageX,T.pageY)),w.copy(y);break;case 2:l=o.TOUCH_ZOOM_PAN;for(let R=0;R<S.length;R++)if(S[R].pointerId!==T.pointerId){const F=L[S[R].pointerId];y.copy(D(F.x,F.y)),w.copy(y);break}break}e.dispatchEvent(it)}function ue(T){e.enabled!==!1&&T.preventDefault()}function He(T){S.push(T)}function _e(T){delete L[T.pointerId];for(let R=0;R<S.length;R++)if(S[R].pointerId==T.pointerId){S.splice(R,1);return}}function Ge(T){let R=L[T.pointerId];R===void 0&&(R=new a.Vector2,L[T.pointerId]=R),R.set(T.pageX,T.pageY)}function Qe(T){const R=T.pointerId===S[0].pointerId?S[1]:S[0];return L[R.pointerId]}this.dispose=function(){e.domElement.removeEventListener("contextmenu",ue),e.domElement.removeEventListener("pointerdown",U),e.domElement.removeEventListener("pointercancel",K),e.domElement.removeEventListener("wheel",Q),e.domElement.removeEventListener("pointermove",ne),e.domElement.removeEventListener("pointerup",W),window.removeEventListener("keydown",N),window.removeEventListener("keyup",B)},this.domElement.addEventListener("contextmenu",ue),this.domElement.addEventListener("pointerdown",U),this.domElement.addEventListener("pointercancel",K),this.domElement.addEventListener("wheel",Q,{passive:!1}),window.addEventListener("keydown",N),window.addEventListener("keyup",B),this.handleResize(),this.update()}}const wo={name:"TrackballControls",render:()=>null},It=f.defineComponent({...wo,props:{minDistance:{default:0},maxDistance:{default:1/0},panSpeed:{default:.3},rotateSpeed:{default:1},zoomSpeed:{default:1.2}},setup(c,{expose:n}){const t=c,e=f.ref(null);f.inject("addControls")(e);const o=f.inject("parentCamera"),i=f.inject("canvas");function s(){e.value!=null&&(e.value.rotateSpeed=t.rotateSpeed,e.value.zoomSpeed=t.zoomSpeed,e.value.panSpeed=t.panSpeed,e.value.minDistance=t.minDistance,e.value.maxDistance=t.maxDistance)}let r=!1;const l=()=>{if(!i.value||r)return;e.value=new _o(o,i.value),new ResizeObserver(h=>{h.forEach(d=>{var p;(p=e.value)==null||p.handleResize()})}).observe(i.value),s(),r=!0};return f.watch(i,()=>{l()}),s(),b(t,"panSpeed",s),b(t,"rotateSpeed",s),b(t,"zoomSpeed",s),b(t,"minDistance",s),b(t,"maxDistance",s),n({three:e}),{props:t,three:e,camera:o,canvas:i,applyProps:s,get boundCamera(){return r},set boundCamera(u){r=u},tryBindCamera:l}}}),be=new a.Raycaster,q=new a.Vector3,he=new a.Vector3,G=new a.Quaternion,vt={X:new a.Vector3(1,0,0),Y:new a.Vector3(0,1,0),Z:new a.Vector3(0,0,1)},at={type:"change"},kt={type:"mouseDown"},jt={type:"mouseUp",mode:null},Dt={type:"objectChange"};class bo extends a.Object3D{constructor(n,t){super(),t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const e=new xo;this._gizmo=e,this.add(e);const o=new Co;this._plane=o,this.add(o);const i=this;function s(E,A){let x=A;Object.defineProperty(i,E,{get:function(){return x!==void 0?x:A},set:function(S){x!==S&&(x=S,o[E]=S,e[E]=S,i.dispatchEvent({type:E+"-changed",value:S}),i.dispatchEvent(at))}}),i[E]=A,o[E]=A,e[E]=A}s("camera",n),s("object",void 0),s("enabled",!0),s("axis",null),s("mode","translate"),s("translationSnap",null),s("rotationSnap",null),s("scaleSnap",null),s("space","world"),s("size",1),s("dragging",!1),s("showX",!0),s("showY",!0),s("showZ",!0);const r=new a.Vector3,l=new a.Vector3,u=new a.Quaternion,h=new a.Quaternion,d=new a.Vector3,p=new a.Quaternion,m=new a.Vector3,w=new a.Vector3,y=new a.Vector3,M=0,_=new a.Vector3;s("worldPosition",r),s("worldPositionStart",l),s("worldQuaternion",u),s("worldQuaternionStart",h),s("cameraPosition",d),s("cameraQuaternion",p),s("pointStart",m),s("pointEnd",w),s("rotationAxis",y),s("rotationAngle",M),s("eye",_),this._offset=new a.Vector3,this._startNorm=new a.Vector3,this._endNorm=new a.Vector3,this._cameraScale=new a.Vector3,this._parentPosition=new a.Vector3,this._parentQuaternion=new a.Quaternion,this._parentQuaternionInv=new a.Quaternion,this._parentScale=new a.Vector3,this._worldScaleStart=new a.Vector3,this._worldQuaternionInv=new a.Quaternion,this._worldScale=new a.Vector3,this._positionStart=new a.Vector3,this._quaternionStart=new a.Quaternion,this._scaleStart=new a.Vector3,this._getPointer=Mo.bind(this),this._onPointerDown=To.bind(this),this._onPointerHover=Eo.bind(this),this._onPointerMove=So.bind(this),this._onPointerUp=Ao.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(n){if(this.object===void 0||this.dragging===!0)return;be.setFromCamera(n,this.camera);const t=rt(this._gizmo.picker[this.mode],be);t?this.axis=t.object.name:this.axis=null}pointerDown(n){if(!(this.object===void 0||this.dragging===!0||n.button!==0)&&this.axis!==null){be.setFromCamera(n,this.camera);const t=rt(this._plane,be,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,kt.mode=this.mode,this.dispatchEvent(kt)}}pointerMove(n){const t=this.axis,e=this.mode,o=this.object;let i=this.space;if(e==="scale"?i="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(i="world"),o===void 0||t===null||this.dragging===!1||n.button!==-1)return;be.setFromCamera(n,this.camera);const s=rt(this._plane,be,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),e==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),i==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),i==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),o.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(i==="local"&&(o.position.applyQuaternion(G.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.position.applyQuaternion(this._quaternionStart)),i==="world"&&(o.parent&&o.position.add(q.setFromMatrixPosition(o.parent.matrixWorld)),t.search("X")!==-1&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.parent&&o.position.sub(q.setFromMatrixPosition(o.parent.matrixWorld))));else if(e==="scale"){if(t.search("XYZ")!==-1){let r=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(r*=-1),he.set(r,r,r)}else q.copy(this.pointStart),he.copy(this.pointEnd),q.applyQuaternion(this._worldQuaternionInv),he.applyQuaternion(this._worldQuaternionInv),he.divide(q),t.search("X")===-1&&(he.x=1),t.search("Y")===-1&&(he.y=1),t.search("Z")===-1&&(he.z=1);o.scale.copy(this._scaleStart).multiply(he),this.scaleSnap&&(t.search("X")!==-1&&(o.scale.x=Math.round(o.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(o.scale.y=Math.round(o.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(o.scale.z=Math.round(o.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(e==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const r=20/this.worldPosition.distanceTo(q.setFromMatrixPosition(this.camera.matrixWorld));t==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(q.copy(this.rotationAxis).cross(this.eye))*r):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(vt[t]),q.copy(vt[t]),i==="local"&&q.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(q.cross(this.eye).normalize())*r),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),i==="local"&&t!=="E"&&t!=="XYZE"?(o.quaternion.copy(this._quaternionStart),o.quaternion.multiply(G.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),o.quaternion.copy(G.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),o.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(at),this.dispatchEvent(Dt)}}pointerUp(n){n.button===0&&(this.dragging&&this.axis!==null&&(jt.mode=this.mode,this.dispatchEvent(jt)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(n){n.geometry&&n.geometry.dispose(),n.material&&n.material.dispose()})}attach(n){return this.object=n,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(at),this.dispatchEvent(Dt),this.pointStart.copy(this.pointEnd))}getRaycaster(){return be}getMode(){return this.mode}setMode(n){this.mode=n}setTranslationSnap(n){this.translationSnap=n}setRotationSnap(n){this.rotationSnap=n}setScaleSnap(n){this.scaleSnap=n}setSize(n){this.size=n}setSpace(n){this.space=n}}function Mo(c){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:c.button};{const n=this.domElement.getBoundingClientRect();return{x:(c.clientX-n.left)/n.width*2-1,y:-(c.clientY-n.top)/n.height*2+1,button:c.button}}}function Eo(c){if(this.enabled)switch(c.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(c));break}}function To(c){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(c.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(c)),this.pointerDown(this._getPointer(c)))}function So(c){this.enabled&&this.pointerMove(this._getPointer(c))}function Ao(c){this.enabled&&(this.domElement.releasePointerCapture(c.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(c)))}function rt(c,n,t){const e=n.intersectObject(c,!0);for(let o=0;o<e.length;o++)if(e[o].object.visible||t)return e[o];return!1}const $e=new a.Euler,j=new a.Vector3(0,1,0),Ht=new a.Vector3(0,0,0),Gt=new a.Matrix4,Xe=new a.Quaternion,Ye=new a.Quaternion,re=new a.Vector3,Nt=new a.Matrix4,Oe=new a.Vector3(1,0,0),Me=new a.Vector3(0,1,0),Ie=new a.Vector3(0,0,1),Ze=new a.Vector3,ve=new a.Vector3,ke=new a.Vector3;class xo extends a.Object3D{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const n=new a.MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new a.LineBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=n.clone();e.opacity=.15;const o=t.clone();o.opacity=.5;const i=n.clone();i.color.setHex(16711680);const s=n.clone();s.color.setHex(65280);const r=n.clone();r.color.setHex(255);const l=n.clone();l.color.setHex(16711680),l.opacity=.5;const u=n.clone();u.color.setHex(65280),u.opacity=.5;const h=n.clone();h.color.setHex(255),h.opacity=.5;const d=n.clone();d.opacity=.25;const p=n.clone();p.color.setHex(16776960),p.opacity=.25,n.clone().color.setHex(16776960);const w=n.clone();w.color.setHex(7895160);const y=new a.CylinderGeometry(0,.04,.1,12);y.translate(0,.05,0);const M=new a.BoxGeometry(.08,.08,.08);M.translate(0,.04,0);const _=new a.BufferGeometry;_.setAttribute("position",new a.Float32BufferAttribute([0,0,0,1,0,0],3));const E=new a.CylinderGeometry(.0075,.0075,.5,3);E.translate(0,.25,0);function A(H,oe){const $=new a.TorusGeometry(H,.0075,3,64,oe*Math.PI*2);return $.rotateY(Math.PI/2),$.rotateX(Math.PI/2),$}function x(){const H=new a.BufferGeometry;return H.setAttribute("position",new a.Float32BufferAttribute([0,0,0,1,1,1],3)),H}const S={X:[[new a.Mesh(y,i),[.5,0,0],[0,0,-Math.PI/2]],[new a.Mesh(y,i),[-.5,0,0],[0,0,Math.PI/2]],[new a.Mesh(E,i),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new a.Mesh(y,s),[0,.5,0]],[new a.Mesh(y,s),[0,-.5,0],[Math.PI,0,0]],[new a.Mesh(E,s)]],Z:[[new a.Mesh(y,r),[0,0,.5],[Math.PI/2,0,0]],[new a.Mesh(y,r),[0,0,-.5],[-Math.PI/2,0,0]],[new a.Mesh(E,r),null,[Math.PI/2,0,0]]],XYZ:[[new a.Mesh(new a.OctahedronGeometry(.1,0),d.clone()),[0,0,0]]],XY:[[new a.Mesh(new a.BoxGeometry(.15,.15,.01),h.clone()),[.15,.15,0]]],YZ:[[new a.Mesh(new a.BoxGeometry(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new a.Mesh(new a.BoxGeometry(.15,.15,.01),u.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},L={X:[[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[.3,0,0],[0,0,-Math.PI/2]],[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,.3,0]],[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,-.3,0],[0,0,Math.PI]]],Z:[[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,0,.3],[Math.PI/2,0,0]],[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new a.Mesh(new a.OctahedronGeometry(.2,0),e)]],XY:[[new a.Mesh(new a.BoxGeometry(.2,.2,.01),e),[.15,.15,0]]],YZ:[[new a.Mesh(new a.BoxGeometry(.2,.2,.01),e),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new a.Mesh(new a.BoxGeometry(.2,.2,.01),e),[.15,0,.15],[-Math.PI/2,0,0]]]},I={START:[[new a.Mesh(new a.OctahedronGeometry(.01,2),o),null,null,null,"helper"]],END:[[new a.Mesh(new a.OctahedronGeometry(.01,2),o),null,null,null,"helper"]],DELTA:[[new a.Line(x(),o),null,null,null,"helper"]],X:[[new a.Line(_,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new a.Line(_,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new a.Line(_,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},D={XYZE:[[new a.Mesh(A(.5,1),w),null,[0,Math.PI/2,0]]],X:[[new a.Mesh(A(.5,.5),i)]],Y:[[new a.Mesh(A(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new a.Mesh(A(.5,.5),r),null,[0,Math.PI/2,0]]],E:[[new a.Mesh(A(.75,1),p),null,[0,Math.PI/2,0]]]},U={AXIS:[[new a.Line(_,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},ne={XYZE:[[new a.Mesh(new a.SphereGeometry(.25,10,8),e)]],X:[[new a.Mesh(new a.TorusGeometry(.5,.1,4,24),e),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new a.Mesh(new a.TorusGeometry(.5,.1,4,24),e),[0,0,0],[Math.PI/2,0,0]]],Z:[[new a.Mesh(new a.TorusGeometry(.5,.1,4,24),e),[0,0,0],[0,0,-Math.PI/2]]],E:[[new a.Mesh(new a.TorusGeometry(.75,.1,2,24),e)]]},W={X:[[new a.Mesh(M,i),[.5,0,0],[0,0,-Math.PI/2]],[new a.Mesh(E,i),[0,0,0],[0,0,-Math.PI/2]],[new a.Mesh(M,i),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new a.Mesh(M,s),[0,.5,0]],[new a.Mesh(E,s)],[new a.Mesh(M,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new a.Mesh(M,r),[0,0,.5],[Math.PI/2,0,0]],[new a.Mesh(E,r),[0,0,0],[Math.PI/2,0,0]],[new a.Mesh(M,r),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new a.Mesh(new a.BoxGeometry(.15,.15,.01),h),[.15,.15,0]]],YZ:[[new a.Mesh(new a.BoxGeometry(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new a.Mesh(new a.BoxGeometry(.15,.15,.01),u),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new a.Mesh(new a.BoxGeometry(.1,.1,.1),d.clone())]]},K={X:[[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[.3,0,0],[0,0,-Math.PI/2]],[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,.3,0]],[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,-.3,0],[0,0,Math.PI]]],Z:[[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,0,.3],[Math.PI/2,0,0]],[new a.Mesh(new a.CylinderGeometry(.2,0,.6,4),e),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new a.Mesh(new a.BoxGeometry(.2,.2,.01),e),[.15,.15,0]]],YZ:[[new a.Mesh(new a.BoxGeometry(.2,.2,.01),e),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new a.Mesh(new a.BoxGeometry(.2,.2,.01),e),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new a.Mesh(new a.BoxGeometry(.2,.2,.2),e),[0,0,0]]]},N={X:[[new a.Line(_,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new a.Line(_,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new a.Line(_,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function B(H){const oe=new a.Object3D;for(const $ in H)for(let Q=H[$].length;Q--;){const z=H[$][Q][0].clone(),ge=H[$][Q][1],ye=H[$][Q][2],ue=H[$][Q][3],He=H[$][Q][4];z.name=$,z.tag=He,ge&&z.position.set(ge[0],ge[1],ge[2]),ye&&z.rotation.set(ye[0],ye[1],ye[2]),ue&&z.scale.set(ue[0],ue[1],ue[2]),z.updateMatrix();const _e=z.geometry.clone();_e.applyMatrix4(z.matrix),z.geometry=_e,z.renderOrder=1/0,z.position.set(0,0,0),z.rotation.set(0,0,0),z.scale.set(1,1,1),oe.add(z)}return oe}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=B(S)),this.add(this.gizmo.rotate=B(D)),this.add(this.gizmo.scale=B(W)),this.add(this.picker.translate=B(L)),this.add(this.picker.rotate=B(ne)),this.add(this.picker.scale=B(K)),this.add(this.helper.translate=B(I)),this.add(this.helper.rotate=B(U)),this.add(this.helper.scale=B(N)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(n){const e=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:Ye;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let o=[];o=o.concat(this.picker[this.mode].children),o=o.concat(this.gizmo[this.mode].children),o=o.concat(this.helper[this.mode].children);for(let i=0;i<o.length;i++){const s=o[i];s.visible=!0,s.rotation.set(0,0,0),s.position.copy(this.worldPosition);let r;if(this.camera.isOrthographicCamera?r=(this.camera.top-this.camera.bottom)/this.camera.zoom:r=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),s.scale.set(1,1,1).multiplyScalar(r*this.size/4),s.tag==="helper"){s.visible=!1,s.name==="AXIS"?(s.visible=!!this.axis,this.axis==="X"&&(G.setFromEuler($e.set(0,0,0)),s.quaternion.copy(e).multiply(G),Math.abs(j.copy(Oe).applyQuaternion(e).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Y"&&(G.setFromEuler($e.set(0,0,Math.PI/2)),s.quaternion.copy(e).multiply(G),Math.abs(j.copy(Me).applyQuaternion(e).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Z"&&(G.setFromEuler($e.set(0,Math.PI/2,0)),s.quaternion.copy(e).multiply(G),Math.abs(j.copy(Ie).applyQuaternion(e).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="XYZE"&&(G.setFromEuler($e.set(0,Math.PI/2,0)),j.copy(this.rotationAxis),s.quaternion.setFromRotationMatrix(Gt.lookAt(Ht,j,Me)),s.quaternion.multiply(G),s.visible=this.dragging),this.axis==="E"&&(s.visible=!1)):s.name==="START"?(s.position.copy(this.worldPositionStart),s.visible=this.dragging):s.name==="END"?(s.position.copy(this.worldPosition),s.visible=this.dragging):s.name==="DELTA"?(s.position.copy(this.worldPositionStart),s.quaternion.copy(this.worldQuaternionStart),q.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),q.applyQuaternion(this.worldQuaternionStart.clone().invert()),s.scale.copy(q),s.visible=this.dragging):(s.quaternion.copy(e),this.dragging?s.position.copy(this.worldPositionStart):s.position.copy(this.worldPosition),this.axis&&(s.visible=this.axis.search(s.name)!==-1));continue}s.quaternion.copy(e),this.mode==="translate"||this.mode==="scale"?(s.name==="X"&&Math.abs(j.copy(Oe).applyQuaternion(e).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Y"&&Math.abs(j.copy(Me).applyQuaternion(e).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Z"&&Math.abs(j.copy(Ie).applyQuaternion(e).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XY"&&Math.abs(j.copy(Ie).applyQuaternion(e).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="YZ"&&Math.abs(j.copy(Oe).applyQuaternion(e).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XZ"&&Math.abs(j.copy(Me).applyQuaternion(e).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1)):this.mode==="rotate"&&(Xe.copy(e),j.copy(this.eye).applyQuaternion(G.copy(e).invert()),s.name.search("E")!==-1&&s.quaternion.setFromRotationMatrix(Gt.lookAt(this.eye,Ht,Me)),s.name==="X"&&(G.setFromAxisAngle(Oe,Math.atan2(-j.y,j.z)),G.multiplyQuaternions(Xe,G),s.quaternion.copy(G)),s.name==="Y"&&(G.setFromAxisAngle(Me,Math.atan2(j.x,j.z)),G.multiplyQuaternions(Xe,G),s.quaternion.copy(G)),s.name==="Z"&&(G.setFromAxisAngle(Ie,Math.atan2(j.y,j.x)),G.multiplyQuaternions(Xe,G),s.quaternion.copy(G))),s.visible=s.visible&&(s.name.indexOf("X")===-1||this.showX),s.visible=s.visible&&(s.name.indexOf("Y")===-1||this.showY),s.visible=s.visible&&(s.name.indexOf("Z")===-1||this.showZ),s.visible=s.visible&&(s.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),s.material._color=s.material._color||s.material.color.clone(),s.material._opacity=s.material._opacity||s.material.opacity,s.material.color.copy(s.material._color),s.material.opacity=s.material._opacity,this.enabled&&this.axis&&(s.name===this.axis||this.axis.split("").some(function(l){return s.name===l}))&&(s.material.color.setHex(16776960),s.material.opacity=1)}super.updateMatrixWorld(n)}}class Co extends a.Mesh{constructor(){super(new a.PlaneGeometry(1e5,1e5,2,2),new a.MeshBasicMaterial({visible:!1,wireframe:!0,side:a.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(n){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),Ze.copy(Oe).applyQuaternion(t==="local"?this.worldQuaternion:Ye),ve.copy(Me).applyQuaternion(t==="local"?this.worldQuaternion:Ye),ke.copy(Ie).applyQuaternion(t==="local"?this.worldQuaternion:Ye),j.copy(ve),this.mode){case"translate":case"scale":switch(this.axis){case"X":j.copy(this.eye).cross(Ze),re.copy(Ze).cross(j);break;case"Y":j.copy(this.eye).cross(ve),re.copy(ve).cross(j);break;case"Z":j.copy(this.eye).cross(ke),re.copy(ke).cross(j);break;case"XY":re.copy(ke);break;case"YZ":re.copy(Ze);break;case"XZ":j.copy(ke),re.copy(ve);break;case"XYZ":case"E":re.set(0,0,0);break}break;case"rotate":default:re.set(0,0,0)}re.length()===0?this.quaternion.copy(this.cameraQuaternion):(Nt.lookAt(q.set(0,0,0),re,j),this.quaternion.setFromRotationMatrix(Nt)),super.updateMatrixWorld(n)}}const Lo={name:"TransformControls",render:()=>null},Ft=f.defineComponent({...Lo,props:{mode:{default:"translate"},position:null,rotationSnap:{default:null},showX:{type:Boolean,default:!0},showY:{type:Boolean,default:!0},showZ:{type:Boolean,default:!0},size:{default:1},translationSnap:{default:null}},setup(c,{expose:n}){const t=c,e=f.shallowRef(null),o=f.inject("scene"),i=f.inject("mesh",null),s=f.inject("parent",void 0),r=f.inject("camera"),l=f.inject("canvas"),u=f.inject("enableAllControls"),h=f.inject("disableAllControls");function d(){e.value!=null&&(e.value.mode=t.mode,e.value.size=t.size,e.value.showX=t.showX,e.value.showY=t.showY,e.value.showZ=t.showZ,e.value.translationSnap=t.translationSnap,e.value.rotationSnap=t.rotationSnap)}let p=!1;const m=()=>{!l.value&&!r.value||p||(e.value=new bo(r.value,l.value),P(t,"position",e.value),i?e.value.attach(i):s&&e.value.attach(s),e.value.addEventListener("dragging-changed",function(w){w.value?h():u()}),o.add(e.value),d(),p=!0)};return f.watch(l,()=>{m()},{immediate:!0}),d(),b(t,"mode",d),b(t,"size",d),b(t,"showX",d),b(t,"showY",d),b(t,"showZ",d),b(t,"rotationSnap",d),b(t,"translationSnap",d),f.onUnmounted(()=>{o.remove(e.value),ae(e.value)}),n({three:e}),{props:t,three:e,scene:o,mesh:i,parent:s,camera:r,canvas:l,enableAllControls:u,disableAllControls:h,applyProps:d,get boundCamera(){return p},set boundCamera(w){p=w},tryBindCamera:m}}}),Bt=f.defineComponent({__name:"Group",props:{enableRaycasting:{type:Boolean,default:!1},onClick:{type:Function,default:()=>null},onMouseMove:{type:Function,default:()=>null},onMouseEnter:{type:Function,default:()=>null},onMouseLeave:{type:Function,default:()=>null},position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=new a.Group;return Z(e),P(t,"position",e),P(t,"rotation",e),P(t,"scale",e),Je(e.children,t),f.provide("parent",e),n({three:e}),(o,i)=>f.renderSlot(o.$slots,"default")}}),zt=f.defineComponent({__name:"InstancedMesh",props:{castShadow:{type:Boolean,default:!1},count:null,geometry:{default:null},material:{default:null},receiveShadow:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=f.inject("scene"),o=new a.BufferGeometry,i=new a.MeshBasicMaterial,s=new a.InstancedMesh(o,i,t.count);s.castShadow=!0,s.receiveShadow=!0,Z(s);function r(){s.castShadow=t.castShadow,s.receiveShadow=t.receiveShadow}r(),b(t,"castShadow",r),b(t,"receiveShadow",r);const l=f.inject("getGeometry"),u=f.inject("getMaterial");return f.onMounted(()=>{if(t.geometry){const h=l(t.geometry);s.geometry=h}if(t.material){const h=u(t.material);s.material=h}}),f.onUnmounted(()=>{e.remove(s),ae(s)}),f.provide("mesh",s),n({three:s}),(h,d)=>f.renderSlot(h.$slots,"default")}}),Vt=f.defineComponent({__name:"Line",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=f.inject("scene"),o=new a.BufferGeometry,i=new a.LineBasicMaterial({color:"black"}),s=new a.Line(o,i);return Z(s),P(t,"position",s),P(t,"rotation",s),P(t,"scale",s),f.onUnmounted(()=>{e.remove(s),ae(s)}),f.provide("mesh",s),n({three:s}),(r,l)=>f.renderSlot(r.$slots,"default")}}),Ut=f.defineComponent({__name:"LineLoop",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=f.inject("scene"),o=new a.BufferGeometry,i=new a.LineBasicMaterial({color:"black"}),s=new a.LineLoop(o,i);return Z(s),P(t,"position",s),P(t,"rotation",s),P(t,"scale",s),f.onUnmounted(()=>{e.remove(s),ae(s)}),f.provide("mesh",s),n({three:s}),(r,l)=>f.renderSlot(r.$slots,"default")}}),$t=f.defineComponent({__name:"LineSegments",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=f.inject("scene"),o=new a.BufferGeometry,i=new a.LineBasicMaterial({color:"black"}),s=new a.LineSegments(o,i);return Z(s),P(t,"position",s),P(t,"rotation",s),P(t,"scale",s),f.onUnmounted(()=>{e.remove(s),ae(s)}),f.provide("mesh",s),n({three:s}),(r,l)=>f.renderSlot(r.$slots,"default")}}),Xt=f.defineComponent({__name:"Mesh",props:{castShadow:{type:Boolean,default:!1},geometry:{default:null},material:{default:null},name:{default:""},position:{default:()=>[0,0,0]},receiveShadow:{type:Boolean,default:!1},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=f.inject("scene"),o=new a.BufferGeometry,i=new a.MeshBasicMaterial,s=new a.Mesh(o,i);s.castShadow=!0,s.receiveShadow=!0,Z(s),P(t,"position",s),P(t,"rotation",s),P(t,"scale",s),b(t,"position",()=>{v.object3DTranslated(t.name,s)}),b(t,"rotation",()=>{v.object3DTranslated(t.name,s)}),b(t,"scale",()=>{v.object3DTranslated(t.name,s)});function r(){s.name=t.name,s.castShadow=t.castShadow,s.receiveShadow=t.receiveShadow}r(),b(t,"castShadow",r),b(t,"receiveShadow",r);const l=f.inject("getGeometry"),u=f.inject("getMaterial");return f.onMounted(()=>{if(t.geometry){const h=l(t.geometry);s.geometry=h}if(t.material){const h=u(t.material);s.material=h}v.object3DChanged(t.name,s)}),f.onUnmounted(()=>{e.remove(s),ae(s)}),f.provide("mesh",s),n({three:s}),(h,d)=>f.renderSlot(h.$slots,"default")}}),Yt=f.defineComponent({__name:"Points",props:{name:{default:""},position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=f.inject("scene"),o=new a.BufferGeometry,i=new a.PointsMaterial({color:"red",sizeAttenuation:!1,size:2}),s=new a.Points(o,i);Z(s),P(t,"position",s),P(t,"rotation",s),P(t,"scale",s),b(t,"position",()=>{v.object3DTranslated(t.name,s)}),b(t,"rotation",()=>{v.object3DTranslated(t.name,s)}),b(t,"scale",()=>{v.object3DTranslated(t.name,s)});function r(){s.name=t.name}return r(),f.onMounted(()=>{v.object3DChanged(t.name,s)}),f.onUnmounted(()=>{e.remove(s),ae(s)}),f.provide("mesh",s),n({three:s}),(l,u)=>f.renderSlot(l.$slots,"default")}});class Po extends a.Loader{constructor(n){super(n),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new ko(t)}),this.register(function(t){return new Bo(t)}),this.register(function(t){return new zo(t)}),this.register(function(t){return new Do(t)}),this.register(function(t){return new Ho(t)}),this.register(function(t){return new Go(t)}),this.register(function(t){return new No(t)}),this.register(function(t){return new vo(t)}),this.register(function(t){return new Fo(t)}),this.register(function(t){return new jo(t)}),this.register(function(t){return new Oo(t)}),this.register(function(t){return new Vo(t)}),this.register(function(t){return new Uo(t)})}load(n,t,e,o){const i=this;let s;this.resourcePath!==""?s=this.resourcePath:this.path!==""?s=this.path:s=a.LoaderUtils.extractUrlBase(n),this.manager.itemStart(n);const r=function(u){o?o(u):console.error(u),i.manager.itemError(n),i.manager.itemEnd(n)},l=new a.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(n,function(u){try{i.parse(u,s,function(h){t(h),i.manager.itemEnd(n)},r)}catch(h){r(h)}},e,r)}setDRACOLoader(n){return this.dracoLoader=n,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(n){return this.ktx2Loader=n,this}setMeshoptDecoder(n){return this.meshoptDecoder=n,this}register(n){return this.pluginCallbacks.indexOf(n)===-1&&this.pluginCallbacks.push(n),this}unregister(n){return this.pluginCallbacks.indexOf(n)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(n),1),this}parse(n,t,e,o){let i;const s={},r={},l=new TextDecoder;if(typeof n=="string")i=JSON.parse(n);else if(n instanceof ArrayBuffer)if(l.decode(new Uint8Array(n,0,4))===Zt){try{s[k.KHR_BINARY_GLTF]=new $o(n)}catch(d){o&&o(d);return}i=JSON.parse(s[k.KHR_BINARY_GLTF].content)}else i=JSON.parse(l.decode(n));else i=n;if(i.asset===void 0||i.asset.version[0]<2){o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new ss(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const d=this.pluginCallbacks[h](u);r[d.name]=d,s[d.name]=!0}if(i.extensionsUsed)for(let h=0;h<i.extensionsUsed.length;++h){const d=i.extensionsUsed[h],p=i.extensionsRequired||[];switch(d){case k.KHR_MATERIALS_UNLIT:s[d]=new Io;break;case k.KHR_DRACO_MESH_COMPRESSION:s[d]=new Xo(i,this.dracoLoader);break;case k.KHR_TEXTURE_TRANSFORM:s[d]=new Yo;break;case k.KHR_MESH_QUANTIZATION:s[d]=new Zo;break;default:p.indexOf(d)>=0&&r[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}u.setExtensions(s),u.setPlugins(r),u.parse(e,o)}parseAsync(n,t){const e=this;return new Promise(function(o,i){e.parse(n,t,o,i)})}}function Ro(){let c={};return{get:function(n){return c[n]},add:function(n,t){c[n]=t},remove:function(n){delete c[n]},removeAll:function(){c={}}}}const k={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Oo{constructor(n){this.parser=n,this.name=k.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const n=this.parser,t=this.parser.json.nodes||[];for(let e=0,o=t.length;e<o;e++){const i=t[e];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&n._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(n){const t=this.parser,e="light:"+n;let o=t.cache.get(e);if(o)return o;const i=t.json,l=((i.extensions&&i.extensions[this.name]||{}).lights||[])[n];let u;const h=new a.Color(16777215);l.color!==void 0&&h.fromArray(l.color);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new a.DirectionalLight(h),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new a.PointLight(h),u.distance=d;break;case"spot":u=new a.SpotLight(h),u.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,me(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+n),o=Promise.resolve(u),t.cache.add(e,o),o}getDependency(n,t){if(n==="light")return this._loadLight(t)}createNodeAttachment(n){const t=this,e=this.parser,i=e.json.nodes[n],r=(i.extensions&&i.extensions[this.name]||{}).light;return r===void 0?null:this._loadLight(r).then(function(l){return e._getNodeRef(t.cache,r,l)})}}class Io{constructor(){this.name=k.KHR_MATERIALS_UNLIT}getMaterialType(){return a.MeshBasicMaterial}extendParams(n,t,e){const o=[];n.color=new a.Color(1,1,1),n.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const s=i.baseColorFactor;n.color.fromArray(s),n.opacity=s[3]}i.baseColorTexture!==void 0&&o.push(e.assignTexture(n,"map",i.baseColorTexture,a.sRGBEncoding))}return Promise.all(o)}}class vo{constructor(n){this.parser=n,this.name=k.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(n,t){const o=this.parser.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=o.extensions[this.name].emissiveStrength;return i!==void 0&&(t.emissiveIntensity=i),Promise.resolve()}}class ko{constructor(n){this.parser=n,this.name=k.KHR_MATERIALS_CLEARCOAT}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:a.MeshPhysicalMaterial}extendMaterialParams(n,t){const e=this.parser,o=e.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],s=o.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&i.push(e.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&i.push(e.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(i.push(e.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const r=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new a.Vector2(r,r)}return Promise.all(i)}}class jo{constructor(n){this.parser=n,this.name=k.KHR_MATERIALS_IRIDESCENCE}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:a.MeshPhysicalMaterial}extendMaterialParams(n,t){const e=this.parser,o=e.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],s=o.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&i.push(e.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&i.push(e.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(i)}}class Do{constructor(n){this.parser=n,this.name=k.KHR_MATERIALS_SHEEN}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:a.MeshPhysicalMaterial}extendMaterialParams(n,t){const e=this.parser,o=e.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new a.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=o.extensions[this.name];return s.sheenColorFactor!==void 0&&t.sheenColor.fromArray(s.sheenColorFactor),s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&i.push(e.assignTexture(t,"sheenColorMap",s.sheenColorTexture,a.sRGBEncoding)),s.sheenRoughnessTexture!==void 0&&i.push(e.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(i)}}class Ho{constructor(n){this.parser=n,this.name=k.KHR_MATERIALS_TRANSMISSION}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:a.MeshPhysicalMaterial}extendMaterialParams(n,t){const e=this.parser,o=e.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],s=o.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&i.push(e.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(i)}}class Go{constructor(n){this.parser=n,this.name=k.KHR_MATERIALS_VOLUME}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:a.MeshPhysicalMaterial}extendMaterialParams(n,t){const e=this.parser,o=e.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],s=o.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&i.push(e.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const r=s.attenuationColor||[1,1,1];return t.attenuationColor=new a.Color(r[0],r[1],r[2]),Promise.all(i)}}class No{constructor(n){this.parser=n,this.name=k.KHR_MATERIALS_IOR}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:a.MeshPhysicalMaterial}extendMaterialParams(n,t){const o=this.parser.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=o.extensions[this.name];return t.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class Fo{constructor(n){this.parser=n,this.name=k.KHR_MATERIALS_SPECULAR}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:a.MeshPhysicalMaterial}extendMaterialParams(n,t){const e=this.parser,o=e.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],s=o.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&i.push(e.assignTexture(t,"specularIntensityMap",s.specularTexture));const r=s.specularColorFactor||[1,1,1];return t.specularColor=new a.Color(r[0],r[1],r[2]),s.specularColorTexture!==void 0&&i.push(e.assignTexture(t,"specularColorMap",s.specularColorTexture,a.sRGBEncoding)),Promise.all(i)}}class Bo{constructor(n){this.parser=n,this.name=k.KHR_TEXTURE_BASISU}loadTexture(n){const t=this.parser,e=t.json,o=e.textures[n];if(!o.extensions||!o.extensions[this.name])return null;const i=o.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(n,i.source,s)}}class zo{constructor(n){this.parser=n,this.name=k.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(n){const t=this.name,e=this.parser,o=e.json,i=o.textures[n];if(!i.extensions||!i.extensions[t])return null;const s=i.extensions[t],r=o.images[s.source];let l=e.textureLoader;if(r.uri){const u=e.options.manager.getHandler(r.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return e.loadTextureImage(n,s.source,l);if(o.extensionsRequired&&o.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return e.loadTexture(n)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(n){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){n(t.height===1)}})),this.isSupported}}class Vo{constructor(n){this.name=k.EXT_MESHOPT_COMPRESSION,this.parser=n}loadBufferView(n){const t=this.parser.json,e=t.bufferViews[n];if(e.extensions&&e.extensions[this.name]){const o=e.extensions[this.name],i=this.parser.getDependency("buffer",o.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(r){const l=o.byteOffset||0,u=o.byteLength||0,h=o.count,d=o.byteStride,p=new Uint8Array(r,l,u);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(h,d,p,o.mode,o.filter).then(function(m){return m.buffer}):s.ready.then(function(){const m=new ArrayBuffer(h*d);return s.decodeGltfBuffer(new Uint8Array(m),h,d,p,o.mode,o.filter),m})})}else return null}}class Uo{constructor(n){this.name=k.EXT_MESH_GPU_INSTANCING,this.parser=n}createNodeMesh(n){const t=this.parser.json,e=t.nodes[n];if(!e.extensions||!e.extensions[this.name]||e.mesh===void 0)return null;const o=t.meshes[e.mesh];for(const u of o.primitives)if(u.mode!==ee.TRIANGLES&&u.mode!==ee.TRIANGLE_STRIP&&u.mode!==ee.TRIANGLE_FAN&&u.mode!==void 0)return null;const s=e.extensions[this.name].attributes,r=[],l={};for(const u in s)r.push(this.parser.getDependency("accessor",s[u]).then(h=>(l[u]=h,l[u])));return r.length<1?null:(r.push(this.parser.createNodeMesh(n)),Promise.all(r).then(u=>{const h=u.pop(),d=h.isGroup?h.children:[h],p=u[0].count,m=[];for(const w of d){const y=new a.Matrix4,M=new a.Vector3,_=new a.Quaternion,E=new a.Vector3(1,1,1),A=new a.InstancedMesh(w.geometry,w.material,p);for(let x=0;x<p;x++)l.TRANSLATION&&M.fromBufferAttribute(l.TRANSLATION,x),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,x),l.SCALE&&E.fromBufferAttribute(l.SCALE,x),A.setMatrixAt(x,y.compose(M,_,E));for(const x in l)x!=="TRANSLATION"&&x!=="ROTATION"&&x!=="SCALE"&&w.geometry.setAttribute(x,l[x]);a.Object3D.prototype.copy.call(A,w),A.frustumCulled=!1,this.parser.assignFinalMaterial(A),m.push(A)}return h.isGroup?(h.clear(),h.add(...m),h):m[0]}))}}const Zt="glTF",je=12,qt={JSON:1313821514,BIN:5130562};class $o{constructor(n){this.name=k.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(n,0,je),e=new TextDecoder;if(this.header={magic:e.decode(new Uint8Array(n.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Zt)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const o=this.header.length-je,i=new DataView(n,je);let s=0;for(;s<o;){const r=i.getUint32(s,!0);s+=4;const l=i.getUint32(s,!0);if(s+=4,l===qt.JSON){const u=new Uint8Array(n,je+s,r);this.content=e.decode(u)}else if(l===qt.BIN){const u=je+s;this.body=n.slice(u,u+r)}s+=r}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Xo{constructor(n,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=k.KHR_DRACO_MESH_COMPRESSION,this.json=n,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(n,t){const e=this.json,o=this.dracoLoader,i=n.extensions[this.name].bufferView,s=n.extensions[this.name].attributes,r={},l={},u={};for(const h in s){const d=lt[h]||h.toLowerCase();r[d]=s[h]}for(const h in n.attributes){const d=lt[h]||h.toLowerCase();if(s[h]!==void 0){const p=e.accessors[n.attributes[h]],m=Se[p.componentType];u[d]=m.name,l[d]=p.normalized===!0}}return t.getDependency("bufferView",i).then(function(h){return new Promise(function(d){o.decodeDracoFile(h,function(p){for(const m in p.attributes){const w=p.attributes[m],y=l[m];y!==void 0&&(w.normalized=y)}d(p)},r,u)})})}}class Yo{constructor(){this.name=k.KHR_TEXTURE_TRANSFORM}extendTexture(n,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(n=n.clone(),t.offset!==void 0&&n.offset.fromArray(t.offset),t.rotation!==void 0&&(n.rotation=t.rotation),t.scale!==void 0&&n.repeat.fromArray(t.scale),n.needsUpdate=!0),n}}class Zo{constructor(){this.name=k.KHR_MESH_QUANTIZATION}}class Kt extends a.Interpolant{constructor(n,t,e,o){super(n,t,e,o)}copySampleValue_(n){const t=this.resultBuffer,e=this.sampleValues,o=this.valueSize,i=n*o*3+o;for(let s=0;s!==o;s++)t[s]=e[i+s];return t}interpolate_(n,t,e,o){const i=this.resultBuffer,s=this.sampleValues,r=this.valueSize,l=r*2,u=r*3,h=o-t,d=(e-t)/h,p=d*d,m=p*d,w=n*u,y=w-u,M=-2*m+3*p,_=m-p,E=1-M,A=_-p+d;for(let x=0;x!==r;x++){const S=s[y+x+r],L=s[y+x+l]*h,I=s[w+x+r],D=s[w+x]*h;i[x]=E*S+A*L+M*I+_*D}return i}}const qo=new a.Quaternion;class Ko extends Kt{interpolate_(n,t,e,o){const i=super.interpolate_(n,t,e,o);return qo.fromArray(i).normalize().toArray(i),i}}const ee={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Se={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Qt={9728:a.NearestFilter,9729:a.LinearFilter,9984:a.NearestMipmapNearestFilter,9985:a.LinearMipmapNearestFilter,9986:a.NearestMipmapLinearFilter,9987:a.LinearMipmapLinearFilter},Wt={33071:a.ClampToEdgeWrapping,33648:a.MirroredRepeatWrapping,10497:a.RepeatWrapping},ct={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},lt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},pe={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Qo={CUBICSPLINE:void 0,LINEAR:a.InterpolateLinear,STEP:a.InterpolateDiscrete},ut={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Wo(c){return c.DefaultMaterial===void 0&&(c.DefaultMaterial=new a.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:a.FrontSide})),c.DefaultMaterial}function De(c,n,t){for(const e in t.extensions)c[e]===void 0&&(n.userData.gltfExtensions=n.userData.gltfExtensions||{},n.userData.gltfExtensions[e]=t.extensions[e])}function me(c,n){n.extras!==void 0&&(typeof n.extras=="object"?Object.assign(c.userData,n.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+n.extras))}function Jo(c,n,t){let e=!1,o=!1,i=!1;for(let u=0,h=n.length;u<h;u++){const d=n[u];if(d.POSITION!==void 0&&(e=!0),d.NORMAL!==void 0&&(o=!0),d.COLOR_0!==void 0&&(i=!0),e&&o&&i)break}if(!e&&!o&&!i)return Promise.resolve(c);const s=[],r=[],l=[];for(let u=0,h=n.length;u<h;u++){const d=n[u];if(e){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):c.attributes.position;s.push(p)}if(o){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):c.attributes.normal;r.push(p)}if(i){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):c.attributes.color;l.push(p)}}return Promise.all([Promise.all(s),Promise.all(r),Promise.all(l)]).then(function(u){const h=u[0],d=u[1],p=u[2];return e&&(c.morphAttributes.position=h),o&&(c.morphAttributes.normal=d),i&&(c.morphAttributes.color=p),c.morphTargetsRelative=!0,c})}function es(c,n){if(c.updateMorphTargets(),n.weights!==void 0)for(let t=0,e=n.weights.length;t<e;t++)c.morphTargetInfluences[t]=n.weights[t];if(n.extras&&Array.isArray(n.extras.targetNames)){const t=n.extras.targetNames;if(c.morphTargetInfluences.length===t.length){c.morphTargetDictionary={};for(let e=0,o=t.length;e<o;e++)c.morphTargetDictionary[t[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ts(c){const n=c.extensions&&c.extensions[k.KHR_DRACO_MESH_COMPRESSION];let t;return n?t="draco:"+n.bufferView+":"+n.indices+":"+Jt(n.attributes):t=c.indices+":"+Jt(c.attributes)+":"+c.mode,t}function Jt(c){let n="";const t=Object.keys(c).sort();for(let e=0,o=t.length;e<o;e++)n+=t[e]+":"+c[t[e]]+";";return n}function dt(c){switch(c){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function ns(c){return c.search(/\.jpe?g($|\?)/i)>0||c.search(/^data\:image\/jpeg/)===0?"image/jpeg":c.search(/\.webp($|\?)/i)>0||c.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const os=new a.Matrix4;class ss{constructor(n={},t={}){this.json=n,this.extensions={},this.plugins={},this.options=t,this.cache=new Ro,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let e=!1,o=!1,i=-1;typeof navigator<"u"&&(e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,o=navigator.userAgent.indexOf("Firefox")>-1,i=o?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||e||o&&i<98?this.textureLoader=new a.TextureLoader(this.options.manager):this.textureLoader=new a.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new a.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(n){this.extensions=n}setPlugins(n){this.plugins=n}parse(n,t){const e=this,o=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([e.getDependencies("scene"),e.getDependencies("animation"),e.getDependencies("camera")])}).then(function(s){const r={scene:s[0][o.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:o.asset,parser:e,userData:{}};De(i,r,o),me(r,o),Promise.all(e._invokeAll(function(l){return l.afterRoot&&l.afterRoot(r)})).then(function(){n(r)})}).catch(t)}_markDefs(){const n=this.json.nodes||[],t=this.json.skins||[],e=this.json.meshes||[];for(let o=0,i=t.length;o<i;o++){const s=t[o].joints;for(let r=0,l=s.length;r<l;r++)n[s[r]].isBone=!0}for(let o=0,i=n.length;o<i;o++){const s=n[o];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(e[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(n,t){t!==void 0&&(n.refs[t]===void 0&&(n.refs[t]=n.uses[t]=0),n.refs[t]++)}_getNodeRef(n,t,e){if(n.refs[t]<=1)return e;const o=e.clone(),i=(s,r)=>{const l=this.associations.get(s);l!=null&&this.associations.set(r,l);for(const[u,h]of s.children.entries())i(h,r.children[u])};return i(e,o),o.name+="_instance_"+n.uses[t]++,o}_invokeOne(n){const t=Object.values(this.plugins);t.push(this);for(let e=0;e<t.length;e++){const o=n(t[e]);if(o)return o}return null}_invokeAll(n){const t=Object.values(this.plugins);t.unshift(this);const e=[];for(let o=0;o<t.length;o++){const i=n(t[o]);i&&e.push(i)}return e}getDependency(n,t){const e=n+":"+t;let o=this.cache.get(e);if(!o){switch(n){case"scene":o=this.loadScene(t);break;case"node":o=this._invokeOne(function(i){return i.loadNode&&i.loadNode(t)});break;case"mesh":o=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(t)});break;case"accessor":o=this.loadAccessor(t);break;case"bufferView":o=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(t)});break;case"buffer":o=this.loadBuffer(t);break;case"material":o=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(t)});break;case"texture":o=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(t)});break;case"skin":o=this.loadSkin(t);break;case"animation":o=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(t)});break;case"camera":o=this.loadCamera(t);break;default:if(o=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(n,t)}),!o)throw new Error("Unknown type: "+n);break}this.cache.add(e,o)}return o}getDependencies(n){let t=this.cache.get(n);if(!t){const e=this,o=this.json[n+(n==="mesh"?"es":"s")]||[];t=Promise.all(o.map(function(i,s){return e.getDependency(n,s)})),this.cache.add(n,t)}return t}loadBuffer(n){const t=this.json.buffers[n],e=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&n===0)return Promise.resolve(this.extensions[k.KHR_BINARY_GLTF].body);const o=this.options;return new Promise(function(i,s){e.load(a.LoaderUtils.resolveURL(t.uri,o.path),i,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(n){const t=this.json.bufferViews[n];return this.getDependency("buffer",t.buffer).then(function(e){const o=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+o)})}loadAccessor(n){const t=this,e=this.json,o=this.json.accessors[n];if(o.bufferView===void 0&&o.sparse===void 0){const s=ct[o.type],r=Se[o.componentType],l=o.normalized===!0,u=new r(o.count*s);return Promise.resolve(new a.BufferAttribute(u,s,l))}const i=[];return o.bufferView!==void 0?i.push(this.getDependency("bufferView",o.bufferView)):i.push(null),o.sparse!==void 0&&(i.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(i).then(function(s){const r=s[0],l=ct[o.type],u=Se[o.componentType],h=u.BYTES_PER_ELEMENT,d=h*l,p=o.byteOffset||0,m=o.bufferView!==void 0?e.bufferViews[o.bufferView].byteStride:void 0,w=o.normalized===!0;let y,M;if(m&&m!==d){const _=Math.floor(p/m),E="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+_+":"+o.count;let A=t.cache.get(E);A||(y=new u(r,_*m,o.count*m/h),A=new a.InterleavedBuffer(y,m/h),t.cache.add(E,A)),M=new a.InterleavedBufferAttribute(A,l,p%m/h,w)}else r===null?y=new u(o.count*l):y=new u(r,p,o.count*l),M=new a.BufferAttribute(y,l,w);if(o.sparse!==void 0){const _=ct.SCALAR,E=Se[o.sparse.indices.componentType],A=o.sparse.indices.byteOffset||0,x=o.sparse.values.byteOffset||0,S=new E(s[1],A,o.sparse.count*_),L=new u(s[2],x,o.sparse.count*l);r!==null&&(M=new a.BufferAttribute(M.array.slice(),M.itemSize,M.normalized));for(let I=0,D=S.length;I<D;I++){const U=S[I];if(M.setX(U,L[I*l]),l>=2&&M.setY(U,L[I*l+1]),l>=3&&M.setZ(U,L[I*l+2]),l>=4&&M.setW(U,L[I*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return M})}loadTexture(n){const t=this.json,e=this.options,i=t.textures[n].source,s=t.images[i];let r=this.textureLoader;if(s.uri){const l=e.manager.getHandler(s.uri);l!==null&&(r=l)}return this.loadTextureImage(n,i,r)}loadTextureImage(n,t,e){const o=this,i=this.json,s=i.textures[n],r=i.images[t],l=(r.uri||r.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,e).then(function(h){h.flipY=!1,h.name=s.name||r.name||"";const p=(i.samplers||{})[s.sampler]||{};return h.magFilter=Qt[p.magFilter]||a.LinearFilter,h.minFilter=Qt[p.minFilter]||a.LinearMipmapLinearFilter,h.wrapS=Wt[p.wrapS]||a.RepeatWrapping,h.wrapT=Wt[p.wrapT]||a.RepeatWrapping,o.associations.set(h,{textures:n}),h}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(n,t){const e=this,o=this.json,i=this.options;if(this.sourceCache[n]!==void 0)return this.sourceCache[n].then(d=>d.clone());const s=o.images[n],r=self.URL||self.webkitURL;let l=s.uri||"",u=!1;if(s.bufferView!==void 0)l=e.getDependency("bufferView",s.bufferView).then(function(d){u=!0;const p=new Blob([d],{type:s.mimeType});return l=r.createObjectURL(p),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+n+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let w=p;t.isImageBitmapLoader===!0&&(w=function(y){const M=new a.Texture(y);M.needsUpdate=!0,p(M)}),t.load(a.LoaderUtils.resolveURL(d,i.path),w,void 0,m)})}).then(function(d){return u===!0&&r.revokeObjectURL(l),d.userData.mimeType=s.mimeType||ns(s.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[n]=h,h}assignTexture(n,t,e,o){const i=this;return this.getDependency("texture",e.index).then(function(s){if(!s)return null;if(e.texCoord!==void 0&&e.texCoord!=0&&!(t==="aoMap"&&e.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+e.texCoord+" for texture "+t+" not yet supported."),i.extensions[k.KHR_TEXTURE_TRANSFORM]){const r=e.extensions!==void 0?e.extensions[k.KHR_TEXTURE_TRANSFORM]:void 0;if(r){const l=i.associations.get(s);s=i.extensions[k.KHR_TEXTURE_TRANSFORM].extendTexture(s,r),i.associations.set(s,l)}}return o!==void 0&&(s.encoding=o),n[t]=s,s})}assignFinalMaterial(n){const t=n.geometry;let e=n.material;const o=t.attributes.tangent===void 0,i=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(n.isPoints){const r="PointsMaterial:"+e.uuid;let l=this.cache.get(r);l||(l=new a.PointsMaterial,a.Material.prototype.copy.call(l,e),l.color.copy(e.color),l.map=e.map,l.sizeAttenuation=!1,this.cache.add(r,l)),e=l}else if(n.isLine){const r="LineBasicMaterial:"+e.uuid;let l=this.cache.get(r);l||(l=new a.LineBasicMaterial,a.Material.prototype.copy.call(l,e),l.color.copy(e.color),this.cache.add(r,l)),e=l}if(o||i||s){let r="ClonedMaterial:"+e.uuid+":";o&&(r+="derivative-tangents:"),i&&(r+="vertex-colors:"),s&&(r+="flat-shading:");let l=this.cache.get(r);l||(l=e.clone(),i&&(l.vertexColors=!0),s&&(l.flatShading=!0),o&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(r,l),this.associations.set(l,this.associations.get(e))),e=l}e.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),n.material=e}getMaterialType(){return a.MeshStandardMaterial}loadMaterial(n){const t=this,e=this.json,o=this.extensions,i=e.materials[n];let s;const r={},l=i.extensions||{},u=[];if(l[k.KHR_MATERIALS_UNLIT]){const d=o[k.KHR_MATERIALS_UNLIT];s=d.getMaterialType(),u.push(d.extendParams(r,i,t))}else{const d=i.pbrMetallicRoughness||{};if(r.color=new a.Color(1,1,1),r.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;r.color.fromArray(p),r.opacity=p[3]}d.baseColorTexture!==void 0&&u.push(t.assignTexture(r,"map",d.baseColorTexture,a.sRGBEncoding)),r.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,r.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(r,"metalnessMap",d.metallicRoughnessTexture)),u.push(t.assignTexture(r,"roughnessMap",d.metallicRoughnessTexture))),s=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(n)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(n,r)})))}i.doubleSided===!0&&(r.side=a.DoubleSide);const h=i.alphaMode||ut.OPAQUE;if(h===ut.BLEND?(r.transparent=!0,r.depthWrite=!1):(r.transparent=!1,h===ut.MASK&&(r.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&s!==a.MeshBasicMaterial&&(u.push(t.assignTexture(r,"normalMap",i.normalTexture)),r.normalScale=new a.Vector2(1,1),i.normalTexture.scale!==void 0)){const d=i.normalTexture.scale;r.normalScale.set(d,d)}return i.occlusionTexture!==void 0&&s!==a.MeshBasicMaterial&&(u.push(t.assignTexture(r,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(r.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&s!==a.MeshBasicMaterial&&(r.emissive=new a.Color().fromArray(i.emissiveFactor)),i.emissiveTexture!==void 0&&s!==a.MeshBasicMaterial&&u.push(t.assignTexture(r,"emissiveMap",i.emissiveTexture,a.sRGBEncoding)),Promise.all(u).then(function(){const d=new s(r);return i.name&&(d.name=i.name),me(d,i),t.associations.set(d,{materials:n}),i.extensions&&De(o,d,i),d})}createUniqueName(n){const t=a.PropertyBinding.sanitizeNodeName(n||"");let e=t;for(let o=1;this.nodeNamesUsed[e];++o)e=t+"_"+o;return this.nodeNamesUsed[e]=!0,e}loadGeometries(n){const t=this,e=this.extensions,o=this.primitiveCache;function i(r){return e[k.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(r,t).then(function(l){return en(l,r,t)})}const s=[];for(let r=0,l=n.length;r<l;r++){const u=n[r],h=ts(u),d=o[h];if(d)s.push(d.promise);else{let p;u.extensions&&u.extensions[k.KHR_DRACO_MESH_COMPRESSION]?p=i(u):p=en(new a.BufferGeometry,u,t),o[h]={primitive:u,promise:p},s.push(p)}}return Promise.all(s)}loadMesh(n){const t=this,e=this.json,o=this.extensions,i=e.meshes[n],s=i.primitives,r=[];for(let l=0,u=s.length;l<u;l++){const h=s[l].material===void 0?Wo(this.cache):this.getDependency("material",s[l].material);r.push(h)}return r.push(t.loadGeometries(s)),Promise.all(r).then(function(l){const u=l.slice(0,l.length-1),h=l[l.length-1],d=[];for(let m=0,w=h.length;m<w;m++){const y=h[m],M=s[m];let _;const E=u[m];if(M.mode===ee.TRIANGLES||M.mode===ee.TRIANGLE_STRIP||M.mode===ee.TRIANGLE_FAN||M.mode===void 0)_=i.isSkinnedMesh===!0?new a.SkinnedMesh(y,E):new a.Mesh(y,E),_.isSkinnedMesh===!0&&!_.geometry.attributes.skinWeight.normalized&&_.normalizeSkinWeights(),M.mode===ee.TRIANGLE_STRIP?_.geometry=tn(_.geometry,a.TriangleStripDrawMode):M.mode===ee.TRIANGLE_FAN&&(_.geometry=tn(_.geometry,a.TriangleFanDrawMode));else if(M.mode===ee.LINES)_=new a.LineSegments(y,E);else if(M.mode===ee.LINE_STRIP)_=new a.Line(y,E);else if(M.mode===ee.LINE_LOOP)_=new a.LineLoop(y,E);else if(M.mode===ee.POINTS)_=new a.Points(y,E);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);Object.keys(_.geometry.morphAttributes).length>0&&es(_,i),_.name=t.createUniqueName(i.name||"mesh_"+n),me(_,i),M.extensions&&De(o,_,M),t.assignFinalMaterial(_),d.push(_)}for(let m=0,w=d.length;m<w;m++)t.associations.set(d[m],{meshes:n,primitives:m});if(d.length===1)return d[0];const p=new a.Group;t.associations.set(p,{meshes:n});for(let m=0,w=d.length;m<w;m++)p.add(d[m]);return p})}loadCamera(n){let t;const e=this.json.cameras[n],o=e[e.type];if(!o){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return e.type==="perspective"?t=new a.PerspectiveCamera(a.MathUtils.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):e.type==="orthographic"&&(t=new a.OrthographicCamera(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),e.name&&(t.name=this.createUniqueName(e.name)),me(t,e),Promise.resolve(t)}loadSkin(n){const t=this.json.skins[n],e=[];for(let o=0,i=t.joints.length;o<i;o++)e.push(this.getDependency("node",t.joints[o]));return t.inverseBindMatrices!==void 0?e.push(this.getDependency("accessor",t.inverseBindMatrices)):e.push(null),Promise.all(e).then(function(o){const i=o.pop(),s=o,r=[],l=[];for(let u=0,h=s.length;u<h;u++){const d=s[u];if(d){r.push(d);const p=new a.Matrix4;i!==null&&p.fromArray(i.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new a.Skeleton(r,l)})}loadAnimation(n){const e=this.json.animations[n],o=[],i=[],s=[],r=[],l=[];for(let u=0,h=e.channels.length;u<h;u++){const d=e.channels[u],p=e.samplers[d.sampler],m=d.target,w=m.node,y=e.parameters!==void 0?e.parameters[p.input]:p.input,M=e.parameters!==void 0?e.parameters[p.output]:p.output;o.push(this.getDependency("node",w)),i.push(this.getDependency("accessor",y)),s.push(this.getDependency("accessor",M)),r.push(p),l.push(m)}return Promise.all([Promise.all(o),Promise.all(i),Promise.all(s),Promise.all(r),Promise.all(l)]).then(function(u){const h=u[0],d=u[1],p=u[2],m=u[3],w=u[4],y=[];for(let _=0,E=h.length;_<E;_++){const A=h[_],x=d[_],S=p[_],L=m[_],I=w[_];if(A===void 0)continue;A.updateMatrix();let D;switch(pe[I.path]){case pe.weights:D=a.NumberKeyframeTrack;break;case pe.rotation:D=a.QuaternionKeyframeTrack;break;case pe.position:case pe.scale:default:D=a.VectorKeyframeTrack;break}const U=A.name?A.name:A.uuid,ne=L.interpolation!==void 0?Qo[L.interpolation]:a.InterpolateLinear,W=[];pe[I.path]===pe.weights?A.traverse(function(N){N.morphTargetInfluences&&W.push(N.name?N.name:N.uuid)}):W.push(U);let K=S.array;if(S.normalized){const N=dt(K.constructor),B=new Float32Array(K.length);for(let H=0,oe=K.length;H<oe;H++)B[H]=K[H]*N;K=B}for(let N=0,B=W.length;N<B;N++){const H=new D(W[N]+"."+pe[I.path],x.array,K,ne);L.interpolation==="CUBICSPLINE"&&(H.createInterpolant=function($){const Q=this instanceof a.QuaternionKeyframeTrack?Ko:Kt;return new Q(this.times,this.values,this.getValueSize()/3,$)},H.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),y.push(H)}}const M=e.name?e.name:"animation_"+n;return new a.AnimationClip(M,void 0,y)})}createNodeMesh(n){const t=this.json,e=this,o=t.nodes[n];return o.mesh===void 0?null:e.getDependency("mesh",o.mesh).then(function(i){const s=e._getNodeRef(e.meshCache,o.mesh,i);return o.weights!==void 0&&s.traverse(function(r){if(r.isMesh)for(let l=0,u=o.weights.length;l<u;l++)r.morphTargetInfluences[l]=o.weights[l]}),s})}loadNode(n){const t=this.json,e=this.extensions,o=this,i=t.nodes[n],s=i.name?o.createUniqueName(i.name):"";return function(){const r=[],l=o._invokeOne(function(p){return p.createNodeMesh&&p.createNodeMesh(n)});l&&r.push(l),i.camera!==void 0&&r.push(o.getDependency("camera",i.camera).then(function(p){return o._getNodeRef(o.cameraCache,i.camera,p)})),o._invokeAll(function(p){return p.createNodeAttachment&&p.createNodeAttachment(n)}).forEach(function(p){r.push(p)});const u=[],h=i.children||[];for(let p=0,m=h.length;p<m;p++)u.push(o.getDependency("node",h[p]));const d=i.skin===void 0?Promise.resolve(null):o.getDependency("skin",i.skin);return Promise.all([Promise.all(r),Promise.all(u),d])}().then(function(r){const l=r[0],u=r[1],h=r[2];let d;if(i.isBone===!0?d=new a.Bone:l.length>1?d=new a.Group:l.length===1?d=l[0]:d=new a.Object3D,d!==l[0])for(let p=0,m=l.length;p<m;p++)d.add(l[p]);if(i.name&&(d.userData.name=i.name,d.name=s),me(d,i),i.extensions&&De(e,d,i),i.matrix!==void 0){const p=new a.Matrix4;p.fromArray(i.matrix),d.applyMatrix4(p)}else i.translation!==void 0&&d.position.fromArray(i.translation),i.rotation!==void 0&&d.quaternion.fromArray(i.rotation),i.scale!==void 0&&d.scale.fromArray(i.scale);o.associations.has(d)||o.associations.set(d,{}),o.associations.get(d).nodes=n,h!==null&&d.traverse(function(p){p.isSkinnedMesh&&p.bind(h,os)});for(let p=0,m=u.length;p<m;p++)d.add(u[p]);return d})}loadScene(n){const t=this.extensions,e=this.json.scenes[n],o=this,i=new a.Group;e.name&&(i.name=o.createUniqueName(e.name)),me(i,e),e.extensions&&De(t,i,e);const s=e.nodes||[],r=[];for(let l=0,u=s.length;l<u;l++)r.push(o.getDependency("node",s[l]));return Promise.all(r).then(function(l){for(let h=0,d=l.length;h<d;h++)i.add(l[h]);const u=h=>{const d=new Map;for(const[p,m]of o.associations)(p instanceof a.Material||p instanceof a.Texture)&&d.set(p,m);return h.traverse(p=>{const m=o.associations.get(p);m!=null&&d.set(p,m)}),d};return o.associations=u(i),i})}}function is(c,n,t){const e=n.attributes,o=new a.Box3;if(e.POSITION!==void 0){const r=t.json.accessors[e.POSITION],l=r.min,u=r.max;if(l!==void 0&&u!==void 0){if(o.set(new a.Vector3(l[0],l[1],l[2]),new a.Vector3(u[0],u[1],u[2])),r.normalized){const h=dt(Se[r.componentType]);o.min.multiplyScalar(h),o.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=n.targets;if(i!==void 0){const r=new a.Vector3,l=new a.Vector3;for(let u=0,h=i.length;u<h;u++){const d=i[u];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],m=p.min,w=p.max;if(m!==void 0&&w!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(w[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(w[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(w[2]))),p.normalized){const y=dt(Se[p.componentType]);l.multiplyScalar(y)}r.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(r)}c.boundingBox=o;const s=new a.Sphere;o.getCenter(s.center),s.radius=o.min.distanceTo(o.max)/2,c.boundingSphere=s}function en(c,n,t){const e=n.attributes,o=[];function i(s,r){return t.getDependency("accessor",s).then(function(l){c.setAttribute(r,l)})}for(const s in e){const r=lt[s]||s.toLowerCase();r in c.attributes||o.push(i(e[s],r))}if(n.indices!==void 0&&!c.index){const s=t.getDependency("accessor",n.indices).then(function(r){c.setIndex(r)});o.push(s)}return me(c,n),is(c,n,t),Promise.all(o).then(function(){return n.targets!==void 0?Jo(c,n.targets,t):c})}function tn(c,n){let t=c.getIndex();if(t===null){const s=[],r=c.getAttribute("position");if(r!==void 0){for(let l=0;l<r.count;l++)s.push(l);c.setIndex(s),t=c.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),c}const e=t.count-2,o=[];if(n===a.TriangleFanDrawMode)for(let s=1;s<=e;s++)o.push(t.getX(0)),o.push(t.getX(s)),o.push(t.getX(s+1));else for(let s=0;s<e;s++)s%2===0?(o.push(t.getX(s)),o.push(t.getX(s+1)),o.push(t.getX(s+2))):(o.push(t.getX(s+2)),o.push(t.getX(s+1)),o.push(t.getX(s)));o.length/3!==e&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=c.clone();return i.setIndex(o),i}const nn=f.defineComponent({__name:"GLTFLoader",props:{castShadow:{type:Boolean,default:!1},enableRaycasting:{type:Boolean,default:!1},name:{default:""},onClick:{type:Function,default:()=>null},onMouseMove:{type:Function,default:()=>null},onMouseEnter:{type:Function,default:()=>null},onMouseLeave:{type:Function,default:()=>null},position:{default:()=>[0,0,0]},receiveShadow:{type:Boolean,default:!1},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]},url:null},emits:["load","progress","error"],setup(c,{expose:n,emit:t}){const e=c,o=new Po,i=new a.Group;i.castShadow=!0,i.receiveShadow=!0,Z(i),P(e,"position",i),P(e,"rotation",i),P(e,"scale",i);function s(){o.load(e.url,function(l){P(e,"position",i,!1),P(e,"rotation",i,!1),P(e,"scale",i,!1),i.add(l.scene),r(),t("load",l.scene,l.animations),v.object3DChanged(e.name,i)},function(l){t("progress",l)},function(l){t("error",l)})}function r(){if(i.name=e.name,i.children.length!==0)for(const l of i.children[0].children)l.castShadow=e.castShadow,l.receiveShadow=e.receiveShadow}return r(),f.watch(()=>e.url,()=>s(),{immediate:!0}),Je(i.children,e),f.provide("mesh",i),n({three:i}),(l,u)=>f.renderSlot(l.$slots,"default")}}),as=/^[og]\s*(.+)?/,rs=/^mtllib /,cs=/^usemtl /,ls=/^usemap /,on=/\s+/,sn=new a.Vector3,ft=new a.Vector3,an=new a.Vector3,rn=new a.Vector3,te=new a.Vector3,qe=new a.Color;function us(){const c={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(n,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=n,this.object.fromDeclaration=t!==!1;return}const e=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:n||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(o,i){const s=this._finalize(!1);s&&(s.inherited||s.groupCount<=0)&&this.materials.splice(s.index,1);const r={index:this.materials.length,name:o||"",mtllib:Array.isArray(i)&&i.length>0?i[i.length-1]:"",smooth:s!==void 0?s.smooth:this.smooth,groupStart:s!==void 0?s.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const u={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return u.clone=this.clone.bind(u),u}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(o){const i=this.currentMaterial();if(i&&i.groupEnd===-1&&(i.groupEnd=this.geometry.vertices.length/3,i.groupCount=i.groupEnd-i.groupStart,i.inherited=!1),o&&this.materials.length>1)for(let s=this.materials.length-1;s>=0;s--)this.materials[s].groupCount<=0&&this.materials.splice(s,1);return o&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),i}},e&&e.name&&typeof e.clone=="function"){const o=e.clone(0);o.inherited=!0,this.object.materials.push(o)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(n,t){const e=parseInt(n,10);return(e>=0?e-1:e+t/3)*3},parseNormalIndex:function(n,t){const e=parseInt(n,10);return(e>=0?e-1:e+t/3)*3},parseUVIndex:function(n,t){const e=parseInt(n,10);return(e>=0?e-1:e+t/2)*2},addVertex:function(n,t,e){const o=this.vertices,i=this.object.geometry.vertices;i.push(o[n+0],o[n+1],o[n+2]),i.push(o[t+0],o[t+1],o[t+2]),i.push(o[e+0],o[e+1],o[e+2])},addVertexPoint:function(n){const t=this.vertices;this.object.geometry.vertices.push(t[n+0],t[n+1],t[n+2])},addVertexLine:function(n){const t=this.vertices;this.object.geometry.vertices.push(t[n+0],t[n+1],t[n+2])},addNormal:function(n,t,e){const o=this.normals,i=this.object.geometry.normals;i.push(o[n+0],o[n+1],o[n+2]),i.push(o[t+0],o[t+1],o[t+2]),i.push(o[e+0],o[e+1],o[e+2])},addFaceNormal:function(n,t,e){const o=this.vertices,i=this.object.geometry.normals;sn.fromArray(o,n),ft.fromArray(o,t),an.fromArray(o,e),te.subVectors(an,ft),rn.subVectors(sn,ft),te.cross(rn),te.normalize(),i.push(te.x,te.y,te.z),i.push(te.x,te.y,te.z),i.push(te.x,te.y,te.z)},addColor:function(n,t,e){const o=this.colors,i=this.object.geometry.colors;o[n]!==void 0&&i.push(o[n+0],o[n+1],o[n+2]),o[t]!==void 0&&i.push(o[t+0],o[t+1],o[t+2]),o[e]!==void 0&&i.push(o[e+0],o[e+1],o[e+2])},addUV:function(n,t,e){const o=this.uvs,i=this.object.geometry.uvs;i.push(o[n+0],o[n+1]),i.push(o[t+0],o[t+1]),i.push(o[e+0],o[e+1])},addDefaultUV:function(){const n=this.object.geometry.uvs;n.push(0,0),n.push(0,0),n.push(0,0)},addUVLine:function(n){const t=this.uvs;this.object.geometry.uvs.push(t[n+0],t[n+1])},addFace:function(n,t,e,o,i,s,r,l,u){const h=this.vertices.length;let d=this.parseVertexIndex(n,h),p=this.parseVertexIndex(t,h),m=this.parseVertexIndex(e,h);if(this.addVertex(d,p,m),this.addColor(d,p,m),r!==void 0&&r!==""){const w=this.normals.length;d=this.parseNormalIndex(r,w),p=this.parseNormalIndex(l,w),m=this.parseNormalIndex(u,w),this.addNormal(d,p,m)}else this.addFaceNormal(d,p,m);if(o!==void 0&&o!==""){const w=this.uvs.length;d=this.parseUVIndex(o,w),p=this.parseUVIndex(i,w),m=this.parseUVIndex(s,w),this.addUV(d,p,m),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(n){this.object.geometry.type="Points";const t=this.vertices.length;for(let e=0,o=n.length;e<o;e++){const i=this.parseVertexIndex(n[e],t);this.addVertexPoint(i),this.addColor(i)}},addLineGeometry:function(n,t){this.object.geometry.type="Line";const e=this.vertices.length,o=this.uvs.length;for(let i=0,s=n.length;i<s;i++)this.addVertexLine(this.parseVertexIndex(n[i],e));for(let i=0,s=t.length;i<s;i++)this.addUVLine(this.parseUVIndex(t[i],o))}};return c.startObject("",!1),c}class ds extends a.Loader{constructor(n){super(n),this.materials=null}load(n,t,e,o){const i=this,s=new a.FileLoader(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(n,function(r){try{t(i.parse(r))}catch(l){o?o(l):console.error(l),i.manager.itemError(n)}},e,o)}setMaterials(n){return this.materials=n,this}parse(n){const t=new us;n.indexOf(`\r
`)!==-1&&(n=n.replace(/\r\n/g,`
`)),n.indexOf(`\\
`)!==-1&&(n=n.replace(/\\\n/g,""));const e=n.split(`
`);let o=[];for(let r=0,l=e.length;r<l;r++){const u=e[r].trimStart();if(u.length===0)continue;const h=u.charAt(0);if(h!=="#")if(h==="v"){const d=u.split(on);switch(d[0]){case"v":t.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),d.length>=7?(qe.setRGB(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6])).convertSRGBToLinear(),t.colors.push(qe.r,qe.g,qe.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":t.uvs.push(parseFloat(d[1]),parseFloat(d[2]));break}}else if(h==="f"){const p=u.slice(1).trim().split(on),m=[];for(let y=0,M=p.length;y<M;y++){const _=p[y];if(_.length>0){const E=_.split("/");m.push(E)}}const w=m[0];for(let y=1,M=m.length-1;y<M;y++){const _=m[y],E=m[y+1];t.addFace(w[0],_[0],E[0],w[1],_[1],E[1],w[2],_[2],E[2])}}else if(h==="l"){const d=u.substring(1).trim().split(" ");let p=[];const m=[];if(u.indexOf("/")===-1)p=d;else for(let w=0,y=d.length;w<y;w++){const M=d[w].split("/");M[0]!==""&&p.push(M[0]),M[1]!==""&&m.push(M[1])}t.addLineGeometry(p,m)}else if(h==="p"){const p=u.slice(1).trim().split(" ");t.addPointGeometry(p)}else if((o=as.exec(u))!==null){const d=(" "+o[0].slice(1).trim()).slice(1);t.startObject(d)}else if(cs.test(u))t.object.startMaterial(u.substring(7).trim(),t.materialLibraries);else if(rs.test(u))t.materialLibraries.push(u.substring(7).trim());else if(ls.test(u))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(h==="s"){if(o=u.split(" "),o.length>1){const p=o[1].trim().toLowerCase();t.object.smooth=p!=="0"&&p!=="off"}else t.object.smooth=!0;const d=t.object.currentMaterial();d&&(d.smooth=t.object.smooth)}else{if(u==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+u+'"')}}t.finalize();const i=new a.Group;if(i.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let r=0,l=t.objects.length;r<l;r++){const u=t.objects[r],h=u.geometry,d=u.materials,p=h.type==="Line",m=h.type==="Points";let w=!1;if(h.vertices.length===0)continue;const y=new a.BufferGeometry;y.setAttribute("position",new a.Float32BufferAttribute(h.vertices,3)),h.normals.length>0&&y.setAttribute("normal",new a.Float32BufferAttribute(h.normals,3)),h.colors.length>0&&(w=!0,y.setAttribute("color",new a.Float32BufferAttribute(h.colors,3))),h.hasUVIndices===!0&&y.setAttribute("uv",new a.Float32BufferAttribute(h.uvs,2));const M=[];for(let E=0,A=d.length;E<A;E++){const x=d[E],S=x.name+"_"+x.smooth+"_"+w;let L=t.materials[S];if(this.materials!==null){if(L=this.materials.create(x.name),p&&L&&!(L instanceof a.LineBasicMaterial)){const I=new a.LineBasicMaterial;a.Material.prototype.copy.call(I,L),I.color.copy(L.color),L=I}else if(m&&L&&!(L instanceof a.PointsMaterial)){const I=new a.PointsMaterial({size:10,sizeAttenuation:!1});a.Material.prototype.copy.call(I,L),I.color.copy(L.color),I.map=L.map,L=I}}L===void 0&&(p?L=new a.LineBasicMaterial:m?L=new a.PointsMaterial({size:1,sizeAttenuation:!1}):L=new a.MeshPhongMaterial,L.name=x.name,L.flatShading=!x.smooth,L.vertexColors=w,t.materials[S]=L),M.push(L)}let _;if(M.length>1){for(let E=0,A=d.length;E<A;E++){const x=d[E];y.addGroup(x.groupStart,x.groupCount,E)}p?_=new a.LineSegments(y,M):m?_=new a.Points(y,M):_=new a.Mesh(y,M)}else p?_=new a.LineSegments(y,M[0]):m?_=new a.Points(y,M[0]):_=new a.Mesh(y,M[0]);_.name=u.name,i.add(_)}else if(t.vertices.length>0){const r=new a.PointsMaterial({size:1,sizeAttenuation:!1}),l=new a.BufferGeometry;l.setAttribute("position",new a.Float32BufferAttribute(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(l.setAttribute("color",new a.Float32BufferAttribute(t.colors,3)),r.vertexColors=!0);const u=new a.Points(l,r);i.add(u)}return i}}const cn=f.defineComponent({__name:"OBJLoader",props:{castShadow:{type:Boolean,default:!1},enableRaycasting:{type:Boolean,default:!1},name:{default:""},onClick:{type:Function,default:()=>null},onMouseMove:{type:Function,default:()=>null},onMouseEnter:{type:Function,default:()=>null},onMouseLeave:{type:Function,default:()=>null},position:{default:()=>[0,0,0]},receiveShadow:{type:Boolean,default:!1},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]},url:null},emits:["load","progress","error"],setup(c,{expose:n,emit:t}){const e=c,o=new ds,i=new a.Group;Z(i),P(e,"position",i),P(e,"rotation",i),P(e,"scale",i);function s(){o.load(e.url,function(l){for(const u of l.children)"material"in i&&(u.material=i.material);i.add(l),r(),t("load",l),v.object3DChanged(e.name,i)},function(l){t("progress",l)},function(l){t("error",l)})}function r(){if(i.name=e.name,i.children.length!==0)for(const l of i.children[0].children)l.castShadow=e.castShadow,l.receiveShadow=e.receiveShadow}return r(),f.watch(()=>e.url,()=>s(),{immediate:!0}),Je(i.children,e),f.provide("mesh",i),n({three:i}),(l,u)=>f.renderSlot(l.$slots,"default")}}),ln=f.defineComponent({__name:"AxesHelper",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},size:{default:1},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=new a.AxesHelper(t.size);return Z(e),P(t,"position",e),P(t,"rotation",e),P(t,"scale",e),f.provide("mesh",e),n({three:e}),(o,i)=>f.renderSlot(o.$slots,"default")}}),un=f.defineComponent({__name:"BoxHelper",props:{castShadow:{type:Boolean,default:!1},material:{default:null},mesh:{default:""},name:{default:""},position:{default:()=>[0,0,0]},receiveShadow:{type:Boolean,default:!1},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=f.inject("scene"),o=new a.BufferGeometry,i=new a.MeshBasicMaterial,s=new a.Mesh(o,i);Z(s),P(t,"position",s),P(t,"rotation",s),P(t,"scale",s);function r(){s.castShadow=t.castShadow,s.receiveShadow=t.receiveShadow,s.name=t.name}r(),b(t,"castShadow",r),b(t,"receiveShadow",r);const l=f.inject("getMaterial");function u(d){const p=new a.Box3;p.setFromObject(d);const m=new a.Vector3;p.getCenter(m);const w=new a.BoxGeometry(p.max.x-p.min.x,p.max.y-p.min.y,p.max.z-p.min.z);J(s.geometry,w),s.geometry.computeBoundingSphere(),s.position.set(m.x,m.y,m.z),v.geometryChanged(s.geometry.name,s.geometry)}const h=d=>{if("geometry"in d)d.geometry.computeBoundingBox();else for(const p of d.children)h(p)};return v.object3DChanged.on(t.mesh,d=>{h(d),f.nextTick(()=>{u(d)})}),v.object3DTranslated.on(t.mesh,d=>{h(d),f.nextTick(()=>{u(d)})}),f.onMounted(()=>{if(t.material){const d=l(t.material);s.material=d}}),f.onUnmounted(()=>{e.remove(s),ae(s)}),f.provide("mesh",s),n({three:s}),(d,p)=>f.renderSlot(d.$slots,"default")}}),dn=f.defineComponent({__name:"GridHelper",props:{colorCenterLine:{default:4473924},colorGrid:{default:8947848},divisions:{default:10},position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},size:{default:1},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=new a.GridHelper(t.size,t.divisions,t.colorCenterLine,t.colorGrid);return Z(e),P(t,"position",e),P(t,"rotation",e),P(t,"scale",e),f.provide("mesh",e),n({three:e}),(o,i)=>f.renderSlot(o.$slots,"default")}}),fs={name:"BoxGeometry",render:()=>null},fn=f.defineComponent({...fs,props:{name:{default:""},width:{default:1},height:{default:1},depth:{default:1},widthSegments:{default:1},heightSegments:{default:1},depthSegments:{default:1}},setup(c,{expose:n}){const t=c;function e(l,u,h,d,p,m){return new a.BoxGeometry(l,u,h,d,p,m)}const o=f.reactive(new a.BufferGeometry);o.name=t.name;const i=f.inject("mesh",null);i&&(i.geometry=o);const s=f.inject("addGeometry");s(o);function r(){const l=e(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments);J(o,l),v.geometryChanged(t.name,o),i&&v.object3DChanged(i.name,i)}return f.onMounted(r),b(t,"name",()=>{o.name=t.name}),b(t,"width",r),b(t,"height",r),b(t,"depth",r),b(t,"widthSegments",r),b(t,"heightSegments",r),b(t,"depthSegments",r),n({three:o}),{props:t,makeBox:e,three:o,mesh:i,addGeometry:s,redoGeometry:r}}}),hs={name:"BufferGeometry",render:()=>null},hn=f.defineComponent({...hs,props:{name:{default:""},vertices:{default:()=>[]},faces:{default:()=>[]},uvs:{default:()=>[]},normals:{type:[Array,Boolean],default:!1}},setup(c,{expose:n}){const t=c;function e(){const l=new a.BufferGeometry,u=new Float32Array(t.vertices);if(l.setAttribute("position",new a.BufferAttribute(u,3)),t.uvs.length>0){const h=new Float32Array(t.uvs);l.setAttribute("uv",new a.BufferAttribute(h,2))}if(t.normals===!0&&(l.computeVertexNormals(),l.attributes.normal.needsUpdate=!0),Array.isArray(t.normals)){const h=new Float32Array(t.normals);l.setAttribute("normal",new a.BufferAttribute(h,3))}return t.faces.length>0&&l.setIndex(t.faces),l}const o=f.reactive(new a.BufferGeometry);o.name=t.name;const i=f.inject("mesh",null);i&&(i.geometry=o);const s=f.inject("addGeometry");s(o);function r(){const l=e();J(o,l),v.geometryChanged(t.name,o),i&&v.object3DChanged(i.name,i)}return f.onMounted(r),f.watch(()=>t.vertices,l=>{r()},{deep:!0}),f.watch(()=>t.faces,l=>{r()},{deep:!0}),n({three:o}),{props:t,makeGeometry:e,three:o,mesh:i,addGeometry:s,redoGeometry:r}}}),ps={name:"CircleGeometry",render:()=>null},pn=f.defineComponent({...ps,props:{name:{default:""},radius:{default:1},segments:{default:32},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(c,{expose:n}){const t=c;function e(l,u,h,d){return new a.CircleGeometry(l,u,h,d)}const o=f.reactive(new a.BufferGeometry);o.name=t.name;const i=f.inject("mesh",null);i&&(i.geometry=o);const s=f.inject("addGeometry");s(o);function r(){const l=e(t.radius,t.segments,t.thetaStart,t.thetaLength);J(o,l),v.geometryChanged(t.name,o),i&&v.object3DChanged(i.name,i)}return f.onMounted(r),b(t,"radius",r),b(t,"segments",r),b(t,"thetaStart",r),b(t,"thetaLength",r),n({three:o}),{props:t,makeCircle:e,three:o,mesh:i,addGeometry:s,redoGeometry:r}}}),ms={name:"ConeGeometry",render:()=>null},mn=f.defineComponent({...ms,props:{name:{default:""},radius:{default:1},height:{default:1},radialSegments:{default:32},heightSegments:{default:1},openEnded:{type:Boolean,default:!1},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(c,{expose:n}){const t=c;function e(l,u,h,d,p,m,w){return new a.ConeGeometry(l,u,h,d,p,m,w)}const o=f.reactive(new a.BufferGeometry);o.name=t.name;const i=f.inject("mesh",null);i&&(i.geometry=o);const s=f.inject("addGeometry");s(o);function r(){const l=e(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength);J(o,l),v.geometryChanged(t.name,o),i&&v.object3DChanged(i.name,i)}return f.onMounted(r),b(t,"radius",r),b(t,"height",r),b(t,"radialSegments",r),b(t,"heightSegments",r),b(t,"openEnded",r),b(t,"thetaStart",r),b(t,"thetaLength",r),n({three:o}),{props:t,makeCone:e,three:o,mesh:i,addGeometry:s,redoGeometry:r}}}),gs={name:"CylinderGeometry",render:()=>null},gn=f.defineComponent({...gs,props:{name:{default:""},radiusTop:{default:1},radiusBottom:{default:1},height:{default:1},radialSegments:{default:32},heightSegments:{default:1},openEnded:{type:Boolean,default:!1},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(c,{expose:n}){const t=c;function e(l,u,h,d,p,m,w,y){return new a.CylinderGeometry(l,u,h,d,p,m,w,y)}const o=f.reactive(new a.BufferGeometry);o.name=t.name;const i=f.inject("mesh",null);i&&(i.geometry=o);const s=f.inject("addGeometry");s(o);function r(){const l=e(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength);J(o,l),v.geometryChanged(t.name,o),i&&v.object3DChanged(i.name,i)}return f.onMounted(r),b(t,"radiusTop",r),b(t,"radiusBottom",r),b(t,"height",r),b(t,"radialSegments",r),b(t,"heightSegments",r),b(t,"openEnded",r),b(t,"thetaStart",r),b(t,"thetaLength",r),n({three:o}),{props:t,makeCylinder:e,three:o,mesh:i,addGeometry:s,redoGeometry:r}}}),ys={name:"EdgesGeometry",render:()=>null},yn=f.defineComponent({...ys,props:{geometry:null},setup(c,{expose:n}){const t=c,e=f.reactive(new a.BufferGeometry),o=f.inject("mesh",null);o&&(o.geometry=e);const i=f.inject("addGeometry");i(e);function s(r){const l=new a.EdgesGeometry(r);J(e,l);const u=o;"isLine"in u&&u.computeLineDistances()}return v.geometryChanged.on(t.geometry,r=>{s(r)}),n({three:e}),{props:t,three:e,mesh:o,addGeometry:i,redoGeometry:s}}});class Ke extends a.BufferGeometry{constructor(n=(o,i,s)=>s.set(o,i,Math.cos(o)*Math.sin(i)),t=8,e=8){super(),this.type="ParametricGeometry",this.parameters={func:n,slices:t,stacks:e};const o=[],i=[],s=[],r=[],l=1e-5,u=new a.Vector3,h=new a.Vector3,d=new a.Vector3,p=new a.Vector3,m=new a.Vector3,w=t+1;for(let y=0;y<=e;y++){const M=y/e;for(let _=0;_<=t;_++){const E=_/t;n(E,M,h),i.push(h.x,h.y,h.z),E-l>=0?(n(E-l,M,d),p.subVectors(h,d)):(n(E+l,M,d),p.subVectors(d,h)),M-l>=0?(n(E,M-l,d),m.subVectors(h,d)):(n(E,M+l,d),m.subVectors(d,h)),u.crossVectors(p,m).normalize(),s.push(u.x,u.y,u.z),r.push(E,M)}}for(let y=0;y<e;y++)for(let M=0;M<t;M++){const _=y*w+M,E=y*w+M+1,A=(y+1)*w+M+1,x=(y+1)*w+M;o.push(_,E,x),o.push(E,A,x)}this.setIndex(o),this.setAttribute("position",new a.Float32BufferAttribute(i,3)),this.setAttribute("normal",new a.Float32BufferAttribute(s,3)),this.setAttribute("uv",new a.Float32BufferAttribute(r,2))}}const Ae={klein:function(c,n,t){n*=Math.PI,c*=2*Math.PI,n=n*2;let e,o;n<Math.PI?(e=3*Math.cos(n)*(1+Math.sin(n))+2*(1-Math.cos(n)/2)*Math.cos(n)*Math.cos(c),o=-8*Math.sin(n)-2*(1-Math.cos(n)/2)*Math.sin(n)*Math.cos(c)):(e=3*Math.cos(n)*(1+Math.sin(n))+2*(1-Math.cos(n)/2)*Math.cos(c+Math.PI),o=-8*Math.sin(n));const i=-2*(1-Math.cos(n)/2)*Math.sin(c);t.set(e,i,o)},plane:function(c,n){return function(t,e,o){const i=t*c,s=0,r=e*n;o.set(i,s,r)}},mobius:function(c,n,t){c=c-.5;const e=2*Math.PI*n,o=2,i=Math.cos(e)*(o+c*Math.cos(e/2)),s=Math.sin(e)*(o+c*Math.cos(e/2)),r=c*Math.sin(e/2);t.set(i,s,r)},mobius3d:function(c,n,t){c*=Math.PI,n*=2*Math.PI,c=c*2;const e=c/2,o=2.25,i=.125,s=.65;let r=i*Math.cos(n)*Math.cos(e)-s*Math.sin(n)*Math.sin(e);const l=i*Math.cos(n)*Math.sin(e)+s*Math.sin(n)*Math.cos(e),u=(o+r)*Math.sin(c);r=(o+r)*Math.cos(c),t.set(r,u,l)}};Ae.TubeGeometry=class extends Ke{constructor(n,t=64,e=1,o=8,i=!1){const s=t+1,r=n.computeFrenetFrames(t,i),l=r.tangents,u=r.normals,h=r.binormals,d=new a.Vector3;function p(m,w,y){w*=2*Math.PI;const M=Math.floor(m*(s-1));n.getPointAt(m,d);const _=u[M],E=h[M],A=-e*Math.cos(w),x=e*Math.sin(w);d.x+=A*_.x+x*E.x,d.y+=A*_.y+x*E.y,d.z+=A*_.z+x*E.z,y.copy(d)}super(p,t,o),this.tangents=l,this.normals=u,this.binormals=h,this.path=n,this.segments=t,this.radius=e,this.segmentsRadius=o,this.closed=i}},Ae.TorusKnotGeometry=class extends Ae.TubeGeometry{constructor(n=200,t=40,e=64,o=8,i=2,s=3){class r extends a.Curve{getPoint(p,m=new a.Vector3){const w=m;p*=Math.PI*2;const y=.5,M=(1+y*Math.cos(s*p))*Math.cos(i*p),_=(1+y*Math.cos(s*p))*Math.sin(i*p),E=y*Math.sin(s*p);return w.set(M,_,E).multiplyScalar(n)}}const l=e,u=o,h=new r;super(h,l,t,u,!0,!1),this.radius=n,this.tube=t,this.segmentsT=e,this.segmentsR=o,this.p=i,this.q=s}},Ae.SphereGeometry=class extends Ke{constructor(n,t,e){function o(i,s,r){i*=Math.PI,s*=2*Math.PI;const l=n*Math.sin(i)*Math.cos(s),u=n*Math.sin(i)*Math.sin(s),h=n*Math.cos(i);r.set(l,u,h)}super(o,t,e)}},Ae.PlaneGeometry=class extends Ke{constructor(n,t,e,o){function i(s,r,l){const u=s*n,h=0,d=r*t;l.set(u,h,d)}super(i,e,o)}};const _s={name:"Parametriceometry",render:()=>null},_n=f.defineComponent({..._s,props:{name:{default:""},function:{type:Function,default:Ae.klein},slices:{default:8},stacks:{default:8}},setup(c,{expose:n}){const t=c;function e(l,u,h){return new Ke(l,u,h)}const o=f.reactive(new a.BufferGeometry);o.name=t.name;const i=f.inject("mesh",null);i&&(i.geometry=o);const s=f.inject("addGeometry");s(o);function r(){const l=e(t.function,t.slices,t.stacks);J(o,l),v.geometryChanged(t.name,o),i&&v.object3DChanged(i.name,i)}return f.onMounted(r),b(t,"function",r),b(t,"stacks",r),b(t,"slices",r),n({three:o}),{props:t,makePlane:e,three:o,mesh:i,addGeometry:s,redoGeometry:r}}}),ws={name:"PlaneGeometry",render:()=>null},wn=f.defineComponent({...ws,props:{name:{default:""},width:{default:1},height:{default:1},widthSegments:{default:1},heightSegments:{default:1}},setup(c,{expose:n}){const t=c;function e(l,u,h,d){return new a.PlaneGeometry(l,u,h,d)}const o=f.reactive(new a.BufferGeometry);o.name=t.name;const i=f.inject("mesh",null);i&&(i.geometry=o);const s=f.inject("addGeometry");s(o);function r(){const l=e(t.width,t.height,t.widthSegments,t.heightSegments);J(o,l),v.geometryChanged(t.name,o),i&&v.object3DChanged(i.name,i)}return f.onMounted(r),b(t,"width",r),b(t,"height",r),b(t,"widthSegments",r),b(t,"heightSegments",r),n({three:o}),{props:t,makePlane:e,three:o,mesh:i,addGeometry:s,redoGeometry:r}}}),bs={name:"RingGeometry",render:()=>null},bn=f.defineComponent({...bs,props:{name:{default:""},innerRadius:{default:.5},outerRadius:{default:1},thetaSegments:{default:32},phiSegments:{default:1},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(c,{expose:n}){const t=c;function e(l,u,h,d,p,m){return new a.RingGeometry(l,u,h,d,p,m)}const o=f.reactive(new a.BufferGeometry);o.name=t.name;const i=f.inject("mesh",null);i&&(i.geometry=o);const s=f.inject("addGeometry");s(o);function r(){const l=e(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength);J(o,l),v.geometryChanged(t.name,o),i&&v.object3DChanged(i.name,i)}return f.onMounted(r),b(t,"innerRadius",r),b(t,"outerRadius",r),b(t,"thetaSegments",r),b(t,"phiSegments",r),b(t,"thetaStart",r),b(t,"thetaLength",r),n({three:o}),{props:t,makeRing:e,three:o,mesh:i,addGeometry:s,redoGeometry:r}}}),Ms={name:"SphereGeometry",render:()=>null},Mn=f.defineComponent({...Ms,props:{name:{default:""},radius:{default:1},widthSegments:{default:32},heightSegments:{default:16},phiStart:{default:0},phiLength:{default:2*Math.PI},thetaStart:{default:0},thetaLength:{default:Math.PI}},setup(c,{expose:n}){const t=c;function e(l,u,h,d,p,m,w){return new a.SphereGeometry(l,u,h,d,p,m,w)}const o=new a.BufferGeometry;o.name=t.name;const i=f.inject("mesh",null);i&&(i.geometry=o);const s=f.inject("addGeometry");s(o);function r(){const l=e(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength);J(o,l),v.geometryChanged(t.name,o),i&&v.object3DChanged(i.name,i)}return f.onMounted(r),b(t,"radius",r),b(t,"widthSegments",r),b(t,"heightSegments",r),b(t,"phiStart",r),b(t,"phiLength",r),b(t,"thetaStart",r),b(t,"thetaLength",r),n({three:o}),{props:t,makeSphere:e,three:o,mesh:i,addGeometry:s,redoGeometry:r}}}),Es={name:"WireframeGeometry",render:()=>null},En=f.defineComponent({...Es,props:{geometry:null},setup(c,{expose:n}){const t=c,e=f.reactive(new a.BufferGeometry),o=f.inject("mesh",null);o&&(o.geometry=e);const i=f.inject("addGeometry");i(e);function s(r){const l=new a.WireframeGeometry(r);J(e,l);const u=o;"isLine"in u&&u.computeLineDistances()}return v.geometryChanged.on(t.geometry,r=>{s(r)}),n({three:e}),{props:t,three:e,mesh:o,addGeometry:i,redoGeometry:s}}}),Ts={name:"LineBasicMaterial",render:()=>null},Tn=f.defineComponent({...Ts,props:{color:{default:16777215},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=new a.LineBasicMaterial({color:t.color});e.name=t.name;const o=f.inject("addMaterial");o(e);const i=f.inject("mesh",null);i&&(i.material=e);function s(){t.color&&(e.color=new a.Color(t.color)),e.opacity=t.opacity,e.transparent=t.transparent,e.needsUpdate=!0}return s(),b(t,"color",s),b(t,"opacity",s),b(t,"transparent",s),f.provide("material",e),n({three:e}),{props:t,three:e,addMaterial:o,mesh:i,applyProps:s}}}),Ss={name:"LineDashedMaterial",render:()=>null},Sn=f.defineComponent({...Ss,props:{color:{default:16777215},scale:{default:1},dashSize:{default:3},gapSize:{default:1},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=new a.LineDashedMaterial({color:t.color});e.name=t.name;const o=f.inject("addMaterial");o(e);const i=f.inject("mesh",null);i&&(i.material=e);function s(){e.color=new a.Color(t.color),e.scale=t.scale,e.dashSize=t.dashSize,e.gapSize=t.gapSize,e.opacity=t.opacity,e.transparent=t.transparent,e.needsUpdate=!0}return s(),b(t,"color",s),b(t,"scale",s),b(t,"dashSize",s),b(t,"gapSize",s),b(t,"opacity",s),b(t,"transparent",s),f.provide("material",e),n({three:e}),{props:t,three:e,addMaterial:o,mesh:i,applyProps:s}}}),As={name:"MeshBasicMaterial"},An=f.defineComponent({...As,props:{color:null,side:{default:a.FrontSide},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1},vertexColors:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=new a.MeshBasicMaterial;e.name=t.name,f.inject("addMaterial")(e);const i=f.inject("mesh",null);i&&(i.material=e);function s(){t.color!==void 0&&(e.color=new a.Color(t.color)),e.side=t.side,e.opacity=t.opacity,e.transparent=t.transparent,e.vertexColors=t.vertexColors,e.needsUpdate=!0}return s(),f.provide("material",e),b(t,"color",s),b(t,"side",s),b(t,"opacity",s),b(t,"transparent",s),b(t,"vertexColors",s),n({three:e}),(r,l)=>f.renderSlot(r.$slots,"default")}}),xs={name:"MeshLambertMaterial"},xn=f.defineComponent({...xs,props:{color:{default:16777215},name:{default:""},side:{default:a.FrontSide},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=new a.MeshLambertMaterial;e.name=t.name,f.inject("addMaterial")(e);const i=f.inject("mesh",null);i&&(i.material=e);function s(r){r.color&&(e.color=new a.Color(r.color)),r.side&&(e.side=r.side)}return s(t),f.watch(()=>t.color,()=>s(t)),f.watch(()=>t.side,()=>s(t)),f.watch(()=>t.opacity,()=>{e.opacity=t.opacity},{immediate:!0}),f.watch(()=>t.transparent,()=>{e.transparent=t.transparent},{immediate:!0}),f.provide("material",e),n({three:e}),(r,l)=>f.renderSlot(r.$slots,"default")}}),Cs={name:"PointsMaterial",render:()=>null},Cn=f.defineComponent({...Cs,props:{color:{default:16777215},sizeAttenuation:{type:Boolean,default:!0},name:{default:""},size:{default:1},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=new a.PointsMaterial({color:t.color,sizeAttenuation:t.sizeAttenuation,size:t.size});e.name=t.name;const o=f.inject("mesh",null),i=f.inject("addMaterial");i(e),o&&(o.material=e);function s(){e.color=new a.Color(t.color),e.size=t.size,e.sizeAttenuation=t.sizeAttenuation,e.opacity=t.opacity,e.transparent=t.transparent,e.needsUpdate=!0}return s(),b(t,"color",s),b(t,"size",s),b(t,"sizeAttenuation",s),b(t,"opacity",s),b(t,"transparent",s),f.provide("material",e),n({three:e}),{props:t,three:e,mesh:o,addMaterial:i,applyProps:s}}}),Ls={name:"MeshNormalMaterial"},Ln=f.defineComponent({...Ls,props:{side:{default:a.FrontSide},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=new a.MeshNormalMaterial;e.name=t.name,f.inject("addMaterial")(e);const i=f.inject("mesh",null);return i&&(i.material=e),f.watch(()=>t.side,()=>{e.side=t.side},{immediate:!0}),f.watch(()=>t.opacity,()=>{e.opacity=t.opacity},{immediate:!0}),f.watch(()=>t.transparent,()=>{e.transparent=t.transparent},{immediate:!0}),f.provide("material",e),n({three:e}),(s,r)=>f.renderSlot(s.$slots,"default")}}),Ps={name:"MeshStandardMaterial"},Pn=f.defineComponent({...Ps,props:{color:null,side:{default:a.FrontSide},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1},vertexColors:{type:Boolean,default:!1}},setup(c,{expose:n}){const t=c,e=new a.MeshStandardMaterial;e.name=t.name,f.inject("addMaterial")(e);const i=f.inject("mesh",null);i&&(i.material=e);function s(){t.color!==void 0&&(e.color=new a.Color(t.color)),e.side=t.side,e.opacity=t.opacity,e.transparent=t.transparent,e.vertexColors=t.vertexColors,e.needsUpdate=!0}return s(),f.provide("material",e),b(t,"color",s),b(t,"side",s),b(t,"opacity",s),b(t,"transparent",s),b(t,"vertexColors",s),n({three:e}),(r,l)=>f.renderSlot(r.$slots,"default")}}),Rs={name:"AmbientLight",render:()=>null},Rn=f.defineComponent({...Rs,props:{color:{default:16777215},intensity:{default:1}},setup(c,{expose:n}){const t=c,e=f.inject("scene"),o=new a.AmbientLight;e.add(o);function i(s){o.color=new a.Color(s.color),o.intensity=s.intensity}return i(t),f.watch(()=>t.color,()=>i(t)),f.watch(()=>t.intensity,()=>i(t)),n({three:o}),{props:t,scene:e,three:o,applyProps:i}}}),Os={name:"DirectionalLight",render:()=>null},On=f.defineComponent({...Os,props:{castShadow:{type:Boolean,default:!1},color:{default:16777215},intensity:{default:1},position:{default:()=>[0,0,0]}},setup(c,{expose:n}){const t=c,e=new a.DirectionalLight;Z(e);function o(){e.color=new a.Color(t.color),e.intensity=t.intensity,e.castShadow=t.castShadow}return o(),b(t,"color",o),b(t,"intensity",o),b(t,"castShadow",o),P(t,"position",e),n({three:e}),{props:t,three:e,applyProps:o}}}),Is={name:"HemisphereLight",render:()=>null},In=f.defineComponent({...Is,props:{groundColor:{default:16777215},intensity:{default:1},skyColor:{default:16777215}},setup(c,{expose:n}){const t=c,e=f.inject("scene"),o=new a.HemisphereLight;e.add(o);function i(){o.color=new a.Color(t.skyColor),o.groundColor=new a.Color(t.groundColor),o.intensity=t.intensity}return i(),b(t,"skyColor",i),b(t,"groundColor",i),b(t,"intensity",i),n({three:o}),{props:t,scene:e,three:o,applyProps:i}}}),vs={name:"PointLight",render:()=>null},vn=f.defineComponent({...vs,props:{castShadow:{type:Boolean,default:!1},color:{default:16777215},intensity:{default:1},position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(c,{expose:n}){const t=c,e=new a.PointLight;Z(e),P(t,"position",e),P(t,"rotation",e),P(t,"scale",e);function o(i){e.color=new a.Color(i.color),e.intensity=i.intensity,e.castShadow=i.castShadow}return o(t),f.watch(()=>t.color,()=>o(t)),f.watch(()=>t.intensity,()=>o(t)),f.watch(()=>t.castShadow,()=>o(t)),n({three:e}),{props:t,three:e,applyProps:o}}}),ks={name:"TextureLoader",render:()=>null},kn=f.defineComponent({...ks,props:{offset:{default:()=>[0,0]},repeat:{default:()=>[1,1]},rotation:{default:0},url:null,wrapS:{default:a.ClampToEdgeWrapping},wrapT:{default:a.ClampToEdgeWrapping}},setup(c,{expose:n}){const t=c,e=f.inject("material"),o=f.ref(new a.Texture);function i(){new a.TextureLoader().loadAsync(t.url).then(r=>{o.value=r,bt(t,"offset",o.value),bt(t,"repeat",o.value),"map"in e&&(e.map=o.value,e.needsUpdate=!0),s()})}function s(){o.value.wrapS=t.wrapS,o.value.wrapT=t.wrapT,o.value.rotation=t.rotation,o.value.needsUpdate=!0}return i(),b(t,"url",i),b(t,"wrapS",s),b(t,"wrapT",s),b(t,"rotation",s),n({three:o}),{props:t,material:e,three:o,load:i,applyProps:s}}});function jn(c){c.component("Renderer",At),c.component("Scene",xt),c.component("PerspectiveCamera",Ct),c.component("OrthographicCamera",Lt),c.component("OrbitControls",Ot),c.component("TrackballControls",It),c.component("TransformControls",Ft),c.component("Group",Bt),c.component("InstancedMesh",zt),c.component("Line",Vt),c.component("LineLoop",Ut),c.component("LineSegments",$t),c.component("Mesh",Xt),c.component("Points",Yt),c.component("GLTFLoader",nn),c.component("OBJLoader",cn),c.component("AxesHelper",ln),c.component("BoxHelper",un),c.component("GridHelper",dn),c.component("BoxGeometry",fn),c.component("BufferGeometry",hn),c.component("CircleGeometry",pn),c.component("ConeGeometry",mn),c.component("CylinderGeometry",gn),c.component("EdgesGeometry",yn),c.component("ParametricGeometry",_n),c.component("PlaneGeometry",wn),c.component("RingGeometry",bn),c.component("SphereGeometry",Mn),c.component("WireframeGeometry",En),c.component("LineBasicMaterial",Tn),c.component("LineDashedMaterial",Sn),c.component("MeshBasicMaterial",An),c.component("MeshLambertMaterial",xn),c.component("PointsMaterial",Cn),c.component("MeshNormalMaterial",Ln),c.component("MeshStandardMaterial",Pn),c.component("AmbientLight",Rn),c.component("DirectionalLight",On),c.component("HemisphereLight",In),c.component("PointLight",vn),c.component("TextureLoader",kn)}C.AmbientLight=Rn,C.AxesHelper=ln,C.BoxGeometry=fn,C.BoxHelper=un,C.BufferGeometry=hn,C.CircleGeometry=pn,C.ConeGeometry=mn,C.CylinderGeometry=gn,C.DirectionalLight=On,C.EdgesGeometry=yn,C.GLTFLoader=nn,C.GridHelper=dn,C.Group=Bt,C.HemisphereLight=In,C.InstancedMesh=zt,C.Line=Vt,C.LineBasicMaterial=Tn,C.LineDashedMaterial=Sn,C.LineLoop=Ut,C.LineSegments=$t,C.Mesh=Xt,C.MeshBasicMaterial=An,C.MeshLambertMaterial=xn,C.MeshNormalMaterial=Ln,C.MeshStandardMaterial=Pn,C.OBJLoader=cn,C.OrbitControls=Ot,C.OrthographicCamera=Lt,C.ParametricGeometry=_n,C.PerspectiveCamera=Ct,C.PlaneGeometry=wn,C.PointLight=vn,C.Points=Yt,C.PointsMaterial=Cn,C.Renderer=At,C.RingGeometry=bn,C.Scene=xt,C.SphereGeometry=Mn,C.TextureLoader=kn,C.TrackballControls=It,C.TransformControls=Ft,C.WireframeGeometry=En,C.default=jn,C.install=jn,Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
