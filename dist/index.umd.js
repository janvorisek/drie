(function(L,i){typeof exports=="object"&&typeof module<"u"?i(exports,require("vue"),require("three")):typeof define=="function"&&define.amd?define(["exports","vue","three"],i):(L=typeof globalThis<"u"?globalThis:L||self,i(L["@janvorisek/drie"]={},L.Vue,L.three))})(this,function(L,i,l){"use strict";const ne=r=>r===void 0?new l.Vector3(0,0,0):"x"in r?new l.Vector3(r.x,r.y,r.z):new l.Vector3(r[0],r[1],r[2]),oe=(r,s,e)=>{e[r].isVector3?e[r].set(s.x,s.y,s.z):"isEuler"in e[r]&&e[r].setFromVector3(s)},E=(r,s,e,t=!0)=>{if(e!==null){if(r[s]!==void 0){const n=ne(r[s]);oe(s,n,e)}t&&i.watch(()=>r[s],()=>{if(r[s]!==void 0){const n=ne(r[s]);oe(s,n,e)}})}},u=(r,s,e)=>{i.watch(()=>r[s],()=>{e()})};function R(r,s){s.hasAttribute("position")&&(r.setAttribute("position",s.getAttribute("position")),r.attributes.position.needsUpdate=!0,r.computeVertexNormals(),r.computeBoundingBox(),r.computeBoundingSphere()),s.hasAttribute("normal")&&(r.setAttribute("normal",s.getAttribute("normal")),r.attributes.normal.needsUpdate=!0),s.hasAttribute("uv")&&(r.setAttribute("uv",s.getAttribute("uv")),r.attributes.uv.needsUpdate=!0),r.setIndex(s.getIndex())}function D(r){if(r.children.length>0)for(let s=r.children.length-1;s>=0;s--)D(r.children[s]);if(r.geometry&&r.geometry.dispose(),r.material)if(r.material.length)for(let s=0;s<r.material.length;++s)r.material[s].map&&r.material[s].map.dispose(),r.material[s].lightMap&&r.material[s].lightMap.dispose(),r.material[s].bumpMap&&r.material[s].bumpMap.dispose(),r.material[s].normalMap&&r.material[s].normalMap.dispose(),r.material[s].specularMap&&r.material[s].specularMap.dispose(),r.material[s].envMap&&r.material[s].envMap.dispose(),r.material[s].dispose();else r.material.map&&r.material.map.dispose(),r.material.lightMap&&r.material.lightMap.dispose(),r.material.bumpMap&&r.material.bumpMap.dispose(),r.material.normalMap&&r.material.normalMap.dispose(),r.material.specularMap&&r.material.specularMap.dispose(),r.material.envMap&&r.material.envMap.dispose(),r.material.dispose();return r.removeFromParent(),!0}function U(r){const s=i.inject("scene"),e=i.inject("parent",void 0);i.onMounted(()=>{e?e.add(r):s.add(r)}),i.onUnmounted(()=>{e?e.remove(r):s.remove(r)})}function ct(r,s,e){const t=i.inject("camera"),n=i.inject("canvas");i.inject("scene");const a=f=>{const h=new l.Raycaster,p=ae(f);h.setFromCamera(p,t.value);const w=h.intersectObjects(r);w.length>0&&e("click",w,p)};let o=!1,c=[];const d=f=>{const h=new l.Raycaster,p=ae(f);h.setFromCamera(p,t.value);const w=h.intersectObjects(r);w.length>0?(c=w,o===!1&&e("mouseenter",w,p),o=!0,e("mousemove",w,p)):(o&&e("mouseleave",c,p),o=!1,c=[])};i.onMounted(()=>{if(s.enableRaycasting){if((n==null?void 0:n.value)==null)return;n==null||n.value.addEventListener("click",a),n==null||n.value.addEventListener("mousemove",d)}}),i.onUnmounted(()=>{if(s.enableRaycasting){if((n==null?void 0:n.value)==null)return;n==null||n.value.removeEventListener("click",a),n==null||n.value.removeEventListener("mousemove",d)}}),i.watch(()=>s.enableRaycasting,f=>{f?(n==null||n.value.addEventListener("click",a),n==null||n.value.addEventListener("mousemove",d)):(n==null||n.value.removeEventListener("click",a),n==null||n.value.removeEventListener("mousemove",d))})}function ae(r){const s=new l.Vector2,e=r.currentTarget.getBoundingClientRect();return s.x=(r.clientX-e.left)/e.width*2-1,s.y=-((r.clientY-e.top)/e.height)*2+1,s}const se=i.defineComponent({__name:"Renderer",props:{alpha:{type:Boolean,default:!1},antialias:{type:Boolean,default:!1},autoResize:{type:Boolean,default:!0},camera:null,height:{default:0},frameLimit:{default:60},onBeforeRender:{type:Function,default:()=>{}},shadowMapEnabled:{type:Boolean,default:!1},width:{default:0}},setup(r,{expose:s}){const e=r;let t=i.ref(null);const n=[],a=i.reactive([]),o=i.reactive([]);let c=i.ref(null);const d=i.ref([]),f=i.ref([]),h=i.ref();i.provide("canvas",h);let p=Date.now(),w=1e3/e.frameLimit;i.watch(()=>e.camera,y=>g(y));const g=y=>{if(y){const S=d.value.find(M=>M.name===y);S===void 0&&(c.value=null),c.value=S}else c.value=d.value[0]};function b(){t.value!==null&&(t.value.shadowMap.enabled=e.shadowMapEnabled,w=1e3/e.frameLimit,e.autoResize||t.value.setSize(e.width,e.height))}i.onMounted(()=>{t.value=new l.WebGLRenderer({canvas:h.value,antialias:e.antialias,alpha:e.alpha}),t.value.setSize(1,1),b(),g(e.camera),new ResizeObserver(S=>{S.forEach(M=>{t.value&&e.autoResize&&t.value.setSize(M.contentRect.width,M.contentRect.height)})}).observe(h.value.parentElement),P()}),i.onUnmounted(()=>{for(let y of n)D(y)});function P(){if(requestAnimationFrame(P),t.value===null)return;const y=Date.now(),S=y-p;if(!(w>-1&&S<w)){if(p=y-S%w,e.onBeforeRender&&e.onBeforeRender(),f.value.length>0&&c.value)for(const M of f.value)M.value!==null&&(M.value.object.uuid===c.value.uuid?(M.value.enabled=!0,M.value.update()):M.value.enabled=!1);if(c.value&&t)for(const M of n)t.value.render(M,c.value)}}return b(),i.watch(()=>e.shadowMapEnabled,()=>b()),i.watch(()=>e.frameLimit,()=>b()),i.watch(()=>e.width,()=>b()),i.watch(()=>e.height,()=>b()),i.provide("addCamera",y=>d.value.push(y)),i.provide("addScene",y=>n.push(y)),i.provide("addGeometry",y=>a.push(y)),i.provide("getGeometry",y=>a.find(S=>S.name===y)),i.provide("addMaterial",y=>o.push(y)),i.provide("getMaterial",y=>o.find(S=>S.name===y)),i.provide("addControls",y=>f.value.push(y)),i.provide("camera",c),s({three:t}),(y,S)=>(i.openBlock(),i.createElementBlock(i.Fragment,null,[i.renderSlot(y.$slots,"default"),i.createElementVNode("canvas",{ref_key:"canvas",ref:h},null,512)],64))}}),ie=i.defineComponent({__name:"Scene",props:{background:{default:16777215}},setup(r,{expose:s}){const e=r,t=new l.Scene;i.provide("scene",t),i.inject("addScene")(t);function n(a){a.background&&(t.background=new l.Color(a.background))}return n(e),i.watch(()=>e.background,()=>n(e)),s({three:t}),(a,o)=>i.renderSlot(a.$slots,"default")}}),lt={name:"PerspectiveCamera"},re=i.defineComponent({...lt,props:{aspect:{default:1},autoResize:{type:Boolean,default:!0},far:{default:2e3},lookAt:{default:()=>[0,0,0]},name:{default:""},near:{default:.1},position:{default:()=>[0,0,0]},up:{default:()=>[0,1,0]}},setup(r,{expose:s}){const e=r,t=new l.PerspectiveCamera(75,window.innerWidth/window.innerHeight*1e3,.1,1e3);i.inject("addCamera")(t);const n=i.inject("canvas");i.watch(n,()=>{new ResizeObserver(c=>{c.forEach(d=>{e.autoResize&&(t.aspect=d.contentRect.width/d.contentRect.height,t.updateProjectionMatrix())})}).observe(n.value)}),E(e,"position",t),E(e,"up",t),E(e,"lookAt",t);function a(){t.name=e.name,e.autoResize||(t.aspect=e.aspect),t.near=e.near,t.far=e.far,t.updateProjectionMatrix()}return a(),u(e,"name",a),u(e,"aspect",a),u(e,"near",a),u(e,"far",a),i.provide("parentCamera",t),s({three:t}),(o,c)=>i.renderSlot(o.$slots,"default")}}),mt={name:"OrthographicCamera"},ce=i.defineComponent({...mt,props:{far:{default:2e3},lookAt:{default:()=>[0,0,0]},name:{default:""},near:{default:.1},position:{default:()=>[0,0,0]},up:{default:()=>[0,1,0]}},setup(r,{expose:s}){const e=r,t=new l.OrthographicCamera(-10,10,10,-10,.1,1e3);t.lookAt(0,0,0),t.updateProjectionMatrix(),i.inject("addCamera")(t);const n=i.inject("canvas");i.watch(n,()=>{new ResizeObserver(c=>{c.forEach(d=>{const f=d.contentRect.width/d.contentRect.height;t.left=t.bottom*f,t.right=t.top*f,t.updateProjectionMatrix()})}).observe(n.value)}),E(e,"position",t),E(e,"up",t),E(e,"lookAt",t);function a(){t.name=e.name,t.near=e.near,t.far=e.far,t.updateProjectionMatrix()}return a(),u(e,"name",a),u(e,"near",a),u(e,"far",a),i.provide("parentCamera",t),s({three:t}),(o,c)=>i.renderSlot(o.$slots,"default")}}),le={type:"change"},K={type:"start"},me={type:"end"};class dt extends l.EventDispatcher{constructor(s,e){super(),e===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=s,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new l.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:l.MOUSE.ROTATE,MIDDLE:l.MOUSE.DOLLY,RIGHT:l.MOUSE.PAN},this.touches={ONE:l.TOUCH.ROTATE,TWO:l.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(m){m.addEventListener("keydown",ot),this._domElementKeyEvents=m},this.saveState=function(){t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=function(){t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(le),t.update(),a=n.NONE},this.update=function(){const m=new l.Vector3,_=new l.Quaternion().setFromUnitVectors(s.up,new l.Vector3(0,1,0)),x=_.clone().invert(),T=new l.Vector3,I=new l.Quaternion,H=2*Math.PI;return function(){const rt=t.object.position;m.copy(rt).sub(t.target),m.applyQuaternion(_),c.setFromVector3(m),t.autoRotate&&a===n.NONE&&F(Y()),t.enableDamping?(c.theta+=d.theta*t.dampingFactor,c.phi+=d.phi*t.dampingFactor):(c.theta+=d.theta,c.phi+=d.phi);let V=t.minAzimuthAngle,k=t.maxAzimuthAngle;return isFinite(V)&&isFinite(k)&&(V<-Math.PI?V+=H:V>Math.PI&&(V-=H),k<-Math.PI?k+=H:k>Math.PI&&(k-=H),V<=k?c.theta=Math.max(V,Math.min(k,c.theta)):c.theta=c.theta>(V+k)/2?Math.max(V,c.theta):Math.min(k,c.theta)),c.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=f,c.radius=Math.max(t.minDistance,Math.min(t.maxDistance,c.radius)),t.enableDamping===!0?t.target.addScaledVector(h,t.dampingFactor):t.target.add(h),m.setFromSpherical(c),m.applyQuaternion(x),rt.copy(t.target).add(m),t.object.lookAt(t.target),t.enableDamping===!0?(d.theta*=1-t.dampingFactor,d.phi*=1-t.dampingFactor,h.multiplyScalar(1-t.dampingFactor)):(d.set(0,0,0),h.set(0,0,0)),f=1,p||T.distanceToSquared(t.object.position)>o||8*(1-I.dot(t.object.quaternion))>o?(t.dispatchEvent(le),T.copy(t.object.position),I.copy(t.object.quaternion),p=!1,!0):!1}}(),this.dispose=function(){t.domElement.removeEventListener("contextmenu",at),t.domElement.removeEventListener("pointerdown",et),t.domElement.removeEventListener("pointercancel",tt),t.domElement.removeEventListener("wheel",nt),t.domElement.removeEventListener("pointermove",Q),t.domElement.removeEventListener("pointerup",ee),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",ot)};const t=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=n.NONE;const o=1e-6,c=new l.Spherical,d=new l.Spherical;let f=1;const h=new l.Vector3;let p=!1;const w=new l.Vector2,g=new l.Vector2,b=new l.Vector2,P=new l.Vector2,y=new l.Vector2,S=new l.Vector2,M=new l.Vector2,A=new l.Vector2,G=new l.Vector2,C=[],O={};function Y(){return 2*Math.PI/60/60*t.autoRotateSpeed}function B(){return Math.pow(.95,t.zoomSpeed)}function F(m){d.theta-=m}function j(m){d.phi-=m}const z=function(){const m=new l.Vector3;return function(x,T){m.setFromMatrixColumn(T,0),m.multiplyScalar(-x),h.add(m)}}(),ve=function(){const m=new l.Vector3;return function(x,T){t.screenSpacePanning===!0?m.setFromMatrixColumn(T,1):(m.setFromMatrixColumn(T,0),m.crossVectors(t.object.up,m)),m.multiplyScalar(x),h.add(m)}}(),v=function(){const m=new l.Vector3;return function(x,T){const I=t.domElement;if(t.object.isPerspectiveCamera){const H=t.object.position;m.copy(H).sub(t.target);let W=m.length();W*=Math.tan(t.object.fov/2*Math.PI/180),z(2*x*W/I.clientHeight,t.object.matrix),ve(2*T*W/I.clientHeight,t.object.matrix)}else t.object.isOrthographicCamera?(z(x*(t.object.right-t.object.left)/t.object.zoom/I.clientWidth,t.object.matrix),ve(T*(t.object.top-t.object.bottom)/t.object.zoom/I.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}}();function J(m){t.object.isPerspectiveCamera?f/=m:t.object.isOrthographicCamera?(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom*m)),t.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function He(m){t.object.isPerspectiveCamera?f*=m:t.object.isOrthographicCamera?(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/m)),t.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function Ye(m){w.set(m.clientX,m.clientY)}function Dt(m){M.set(m.clientX,m.clientY)}function Ze(m){P.set(m.clientX,m.clientY)}function Ut(m){g.set(m.clientX,m.clientY),b.subVectors(g,w).multiplyScalar(t.rotateSpeed);const _=t.domElement;F(2*Math.PI*b.x/_.clientHeight),j(2*Math.PI*b.y/_.clientHeight),w.copy(g),t.update()}function Nt(m){A.set(m.clientX,m.clientY),G.subVectors(A,M),G.y>0?J(B()):G.y<0&&He(B()),M.copy(A),t.update()}function Ft(m){y.set(m.clientX,m.clientY),S.subVectors(y,P).multiplyScalar(t.panSpeed),v(S.x,S.y),P.copy(y),t.update()}function vt(m){m.deltaY<0?He(B()):m.deltaY>0&&J(B()),t.update()}function Ht(m){let _=!1;switch(m.code){case t.keys.UP:v(0,t.keyPanSpeed),_=!0;break;case t.keys.BOTTOM:v(0,-t.keyPanSpeed),_=!0;break;case t.keys.LEFT:v(t.keyPanSpeed,0),_=!0;break;case t.keys.RIGHT:v(-t.keyPanSpeed,0),_=!0;break}_&&(m.preventDefault(),t.update())}function Xe(){if(C.length===1)w.set(C[0].pageX,C[0].pageY);else{const m=.5*(C[0].pageX+C[1].pageX),_=.5*(C[0].pageY+C[1].pageY);w.set(m,_)}}function We(){if(C.length===1)P.set(C[0].pageX,C[0].pageY);else{const m=.5*(C[0].pageX+C[1].pageX),_=.5*(C[0].pageY+C[1].pageY);P.set(m,_)}}function Ke(){const m=C[0].pageX-C[1].pageX,_=C[0].pageY-C[1].pageY,x=Math.sqrt(m*m+_*_);M.set(0,x)}function Yt(){t.enableZoom&&Ke(),t.enablePan&&We()}function Zt(){t.enableZoom&&Ke(),t.enableRotate&&Xe()}function qe(m){if(C.length==1)g.set(m.pageX,m.pageY);else{const x=te(m),T=.5*(m.pageX+x.x),I=.5*(m.pageY+x.y);g.set(T,I)}b.subVectors(g,w).multiplyScalar(t.rotateSpeed);const _=t.domElement;F(2*Math.PI*b.x/_.clientHeight),j(2*Math.PI*b.y/_.clientHeight),w.copy(g)}function Je(m){if(C.length===1)y.set(m.pageX,m.pageY);else{const _=te(m),x=.5*(m.pageX+_.x),T=.5*(m.pageY+_.y);y.set(x,T)}S.subVectors(y,P).multiplyScalar(t.panSpeed),v(S.x,S.y),P.copy(y)}function Qe(m){const _=te(m),x=m.pageX-_.x,T=m.pageY-_.y,I=Math.sqrt(x*x+T*T);A.set(0,I),G.set(0,Math.pow(A.y/M.y,t.zoomSpeed)),J(G.y),M.copy(A)}function Xt(m){t.enableZoom&&Qe(m),t.enablePan&&Je(m)}function Wt(m){t.enableZoom&&Qe(m),t.enableRotate&&qe(m)}function et(m){t.enabled!==!1&&(C.length===0&&(t.domElement.setPointerCapture(m.pointerId),t.domElement.addEventListener("pointermove",Q),t.domElement.addEventListener("pointerup",ee)),en(m),m.pointerType==="touch"?Jt(m):Kt(m))}function Q(m){t.enabled!==!1&&(m.pointerType==="touch"?Qt(m):qt(m))}function ee(m){st(m),C.length===0&&(t.domElement.releasePointerCapture(m.pointerId),t.domElement.removeEventListener("pointermove",Q),t.domElement.removeEventListener("pointerup",ee)),t.dispatchEvent(me),a=n.NONE}function tt(m){st(m)}function Kt(m){let _;switch(m.button){case 0:_=t.mouseButtons.LEFT;break;case 1:_=t.mouseButtons.MIDDLE;break;case 2:_=t.mouseButtons.RIGHT;break;default:_=-1}switch(_){case l.MOUSE.DOLLY:if(t.enableZoom===!1)return;Dt(m),a=n.DOLLY;break;case l.MOUSE.ROTATE:if(m.ctrlKey||m.metaKey||m.shiftKey){if(t.enablePan===!1)return;Ze(m),a=n.PAN}else{if(t.enableRotate===!1)return;Ye(m),a=n.ROTATE}break;case l.MOUSE.PAN:if(m.ctrlKey||m.metaKey||m.shiftKey){if(t.enableRotate===!1)return;Ye(m),a=n.ROTATE}else{if(t.enablePan===!1)return;Ze(m),a=n.PAN}break;default:a=n.NONE}a!==n.NONE&&t.dispatchEvent(K)}function qt(m){if(t.enabled!==!1)switch(a){case n.ROTATE:if(t.enableRotate===!1)return;Ut(m);break;case n.DOLLY:if(t.enableZoom===!1)return;Nt(m);break;case n.PAN:if(t.enablePan===!1)return;Ft(m);break}}function nt(m){t.enabled===!1||t.enableZoom===!1||a!==n.NONE||(m.preventDefault(),t.dispatchEvent(K),vt(m),t.dispatchEvent(me))}function ot(m){t.enabled===!1||t.enablePan===!1||Ht(m)}function Jt(m){switch(it(m),C.length){case 1:switch(t.touches.ONE){case l.TOUCH.ROTATE:if(t.enableRotate===!1)return;Xe(),a=n.TOUCH_ROTATE;break;case l.TOUCH.PAN:if(t.enablePan===!1)return;We(),a=n.TOUCH_PAN;break;default:a=n.NONE}break;case 2:switch(t.touches.TWO){case l.TOUCH.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Yt(),a=n.TOUCH_DOLLY_PAN;break;case l.TOUCH.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;Zt(),a=n.TOUCH_DOLLY_ROTATE;break;default:a=n.NONE}break;default:a=n.NONE}a!==n.NONE&&t.dispatchEvent(K)}function Qt(m){switch(it(m),a){case n.TOUCH_ROTATE:if(t.enableRotate===!1)return;qe(m),t.update();break;case n.TOUCH_PAN:if(t.enablePan===!1)return;Je(m),t.update();break;case n.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Xt(m),t.update();break;case n.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;Wt(m),t.update();break;default:a=n.NONE}}function at(m){t.enabled!==!1&&m.preventDefault()}function en(m){C.push(m)}function st(m){delete O[m.pointerId];for(let _=0;_<C.length;_++)if(C[_].pointerId==m.pointerId){C.splice(_,1);return}}function it(m){let _=O[m.pointerId];_===void 0&&(_=new l.Vector2,O[m.pointerId]=_),_.set(m.pageX,m.pageY)}function te(m){const _=m.pointerId===C[0].pointerId?C[1]:C[0];return O[_.pointerId]}t.domElement.addEventListener("contextmenu",at),t.domElement.addEventListener("pointerdown",et),t.domElement.addEventListener("pointercancel",tt),t.domElement.addEventListener("wheel",nt,{passive:!1}),this.update()}}const ut={name:"OrbitControls",render:()=>null},de=i.defineComponent({...ut,props:{enablePan:{type:Boolean,default:!0},enableRotate:{type:Boolean,default:!0},enableZoom:{type:Boolean,default:!0},minZoom:{default:0},maxZoom:{default:1/0},minDistance:{default:0},maxDistance:{default:1/0},minPolarAngle:{default:0},maxPolarAngle:{default:Math.PI},minAzimuthAngle:{default:1/0},maxAzimuthAngle:{default:1/0},target:{default:()=>[0,0,0]}},setup(r,{expose:s}){const e=r,t=i.ref(null);i.inject("addControls")(t);const n=i.inject("parentCamera"),a=i.inject("canvas");function o(){t.value!=null&&(t.value.enablePan=e.enablePan,t.value.enableRotate=e.enableRotate,t.value.enableZoom=e.enableZoom,t.value.minZoom=e.minZoom,t.value.maxZoom=e.maxZoom,t.value.minDistance=e.minDistance,t.value.maxDistance=e.maxDistance,t.value.minPolarAngle=e.minPolarAngle,t.value.maxPolarAngle=e.maxPolarAngle,t.value.minAzimuthAngle=e.minAzimuthAngle,t.value.maxAzimuthAngle=e.maxAzimuthAngle)}let c=!1;const d=()=>{a.value&&(c||(t.value=new dt(n,a.value),o(),E(e,"target",t.value),c=!0))};return i.watch(a,()=>{d()}),o(),u(e,"enablePan",o),u(e,"enableRotate",o),u(e,"enableZoom",o),u(e,"minZoom",o),u(e,"maxZoom",o),u(e,"minDistance",o),u(e,"maxDistance",o),u(e,"minPolarAngle",o),u(e,"maxPolarAngle",o),u(e,"minAzimuthAngle",o),u(e,"maxAzimuthAngle",o),s({three:t}),{props:e,three:t,camera:n,canvas:a,applyProps:o,get boundCamera(){return c},set boundCamera(f){c=f},tryBindCamera:d}}}),ue=i.defineComponent({__name:"Group",props:{enableRaycasting:{type:Boolean,default:!1},position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},emits:["click","mousemove","mouseenter","mouseleave"],setup(r,{expose:s,emit:e}){const t=r,n=new l.Group;return U(n),E(t,"position",n),E(t,"rotation",n),E(t,"scale",n),ct(n.children,t,e),i.provide("parent",n),s({three:n}),(a,o)=>i.renderSlot(a.$slots,"default")}}),fe=i.defineComponent({__name:"InstancedMesh",props:{castShadow:{type:Boolean,default:!1},count:null,geometry:{default:null},material:{default:null},receiveShadow:{type:Boolean,default:!1}},setup(r,{expose:s}){const e=r,t=i.inject("scene"),n=new l.BufferGeometry,a=new l.MeshBasicMaterial,o=new l.InstancedMesh(n,a,e.count);o.castShadow=!0,o.receiveShadow=!0,U(o);function c(){o.castShadow=e.castShadow,o.receiveShadow=e.receiveShadow}c(),u(e,"castShadow",c),u(e,"receiveShadow",c);const d=i.inject("getGeometry"),f=i.inject("getMaterial");return i.onMounted(()=>{if(e.geometry){const h=d(e.geometry);o.geometry=h}if(e.material){const h=f(e.material);o.material=h}}),i.onUnmounted(()=>{t.remove(o),D(o)}),i.provide("mesh",o),s({three:o}),(h,p)=>i.renderSlot(h.$slots,"default")}}),pe=i.defineComponent({__name:"Line",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(r,{expose:s}){const e=r,t=i.inject("scene"),n=new l.BufferGeometry,a=new l.LineBasicMaterial({color:"black"}),o=new l.Line(n,a);return U(o),E(e,"position",o),E(e,"rotation",o),E(e,"scale",o),i.onUnmounted(()=>{t.remove(o),D(o)}),i.provide("mesh",o),s({three:o}),(c,d)=>i.renderSlot(c.$slots,"default")}}),he=i.defineComponent({__name:"LineLoop",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(r,{expose:s}){const e=r,t=i.inject("scene"),n=new l.BufferGeometry,a=new l.LineBasicMaterial({color:"black"}),o=new l.LineLoop(n,a);return U(o),E(e,"position",o),E(e,"rotation",o),E(e,"scale",o),i.onUnmounted(()=>{t.remove(o),D(o)}),i.provide("mesh",o),s({three:o}),(c,d)=>i.renderSlot(c.$slots,"default")}}),ge=i.defineComponent({__name:"LineSegments",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(r,{expose:s}){const e=r,t=i.inject("scene"),n=new l.BufferGeometry,a=new l.LineBasicMaterial({color:"black"}),o=new l.LineSegments(n,a);return U(o),E(e,"position",o),E(e,"rotation",o),E(e,"scale",o),i.onUnmounted(()=>{t.remove(o),D(o)}),i.provide("mesh",o),s({three:o}),(c,d)=>i.renderSlot(c.$slots,"default")}}),ye=i.defineComponent({__name:"Mesh",props:{castShadow:{type:Boolean,default:!1},geometry:{default:null},material:{default:null},position:{default:()=>[0,0,0]},receiveShadow:{type:Boolean,default:!1},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(r,{expose:s}){const e=r,t=i.inject("scene"),n=new l.BufferGeometry,a=new l.MeshBasicMaterial,o=new l.Mesh(n,a);o.castShadow=!0,o.receiveShadow=!0,U(o),E(e,"position",o),E(e,"rotation",o),E(e,"scale",o);function c(){o.castShadow=e.castShadow,o.receiveShadow=e.receiveShadow}c(),u(e,"castShadow",c),u(e,"receiveShadow",c);const d=i.inject("getGeometry"),f=i.inject("getMaterial");return i.onMounted(()=>{if(e.geometry){const h=d(e.geometry);o.geometry=h}if(e.material){const h=f(e.material);o.material=h}}),i.onUnmounted(()=>{t.remove(o),D(o)}),i.provide("mesh",o),s({three:o}),(h,p)=>i.renderSlot(h.$slots,"default")}}),we=i.defineComponent({__name:"Points",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(r,{expose:s}){const e=r,t=i.inject("scene"),n=new l.BufferGeometry,a=new l.PointsMaterial({color:"red",sizeAttenuation:!1,size:2}),o=new l.Points(n,a);return U(o),E(e,"position",o),E(e,"rotation",o),E(e,"scale",o),i.onUnmounted(()=>{t.remove(o),D(o)}),i.provide("mesh",o),s({three:o}),(c,d)=>i.renderSlot(c.$slots,"default")}}),ft=/^[og]\s*(.+)?/,pt=/^mtllib /,ht=/^usemtl /,gt=/^usemap /,be=new l.Vector3,q=new l.Vector3,Me=new l.Vector3,_e=new l.Vector3,$=new l.Vector3,Z=new l.Color;function yt(){const r={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(s,e){if(this.object&&this.object.fromDeclaration===!1){this.object.name=s,this.object.fromDeclaration=e!==!1;return}const t=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:s||"",fromDeclaration:e!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(n,a){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const c={index:this.materials.length,name:n||"",mtllib:Array.isArray(a)&&a.length>0?a[a.length-1]:"",smooth:o!==void 0?o.smooth:this.smooth,groupStart:o!==void 0?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(d){const f={index:typeof d=="number"?d:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return f.clone=this.clone.bind(f),f}};return this.materials.push(c),c},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(n){const a=this.currentMaterial();if(a&&a.groupEnd===-1&&(a.groupEnd=this.geometry.vertices.length/3,a.groupCount=a.groupEnd-a.groupStart,a.inherited=!1),n&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return n&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),a}},t&&t.name&&typeof t.clone=="function"){const n=t.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(s,e){const t=parseInt(s,10);return(t>=0?t-1:t+e/3)*3},parseNormalIndex:function(s,e){const t=parseInt(s,10);return(t>=0?t-1:t+e/3)*3},parseUVIndex:function(s,e){const t=parseInt(s,10);return(t>=0?t-1:t+e/2)*2},addVertex:function(s,e,t){const n=this.vertices,a=this.object.geometry.vertices;a.push(n[s+0],n[s+1],n[s+2]),a.push(n[e+0],n[e+1],n[e+2]),a.push(n[t+0],n[t+1],n[t+2])},addVertexPoint:function(s){const e=this.vertices;this.object.geometry.vertices.push(e[s+0],e[s+1],e[s+2])},addVertexLine:function(s){const e=this.vertices;this.object.geometry.vertices.push(e[s+0],e[s+1],e[s+2])},addNormal:function(s,e,t){const n=this.normals,a=this.object.geometry.normals;a.push(n[s+0],n[s+1],n[s+2]),a.push(n[e+0],n[e+1],n[e+2]),a.push(n[t+0],n[t+1],n[t+2])},addFaceNormal:function(s,e,t){const n=this.vertices,a=this.object.geometry.normals;be.fromArray(n,s),q.fromArray(n,e),Me.fromArray(n,t),$.subVectors(Me,q),_e.subVectors(be,q),$.cross(_e),$.normalize(),a.push($.x,$.y,$.z),a.push($.x,$.y,$.z),a.push($.x,$.y,$.z)},addColor:function(s,e,t){const n=this.colors,a=this.object.geometry.colors;n[s]!==void 0&&a.push(n[s+0],n[s+1],n[s+2]),n[e]!==void 0&&a.push(n[e+0],n[e+1],n[e+2]),n[t]!==void 0&&a.push(n[t+0],n[t+1],n[t+2])},addUV:function(s,e,t){const n=this.uvs,a=this.object.geometry.uvs;a.push(n[s+0],n[s+1]),a.push(n[e+0],n[e+1]),a.push(n[t+0],n[t+1])},addDefaultUV:function(){const s=this.object.geometry.uvs;s.push(0,0),s.push(0,0),s.push(0,0)},addUVLine:function(s){const e=this.uvs;this.object.geometry.uvs.push(e[s+0],e[s+1])},addFace:function(s,e,t,n,a,o,c,d,f){const h=this.vertices.length;let p=this.parseVertexIndex(s,h),w=this.parseVertexIndex(e,h),g=this.parseVertexIndex(t,h);if(this.addVertex(p,w,g),this.addColor(p,w,g),c!==void 0&&c!==""){const b=this.normals.length;p=this.parseNormalIndex(c,b),w=this.parseNormalIndex(d,b),g=this.parseNormalIndex(f,b),this.addNormal(p,w,g)}else this.addFaceNormal(p,w,g);if(n!==void 0&&n!==""){const b=this.uvs.length;p=this.parseUVIndex(n,b),w=this.parseUVIndex(a,b),g=this.parseUVIndex(o,b),this.addUV(p,w,g),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(s){this.object.geometry.type="Points";const e=this.vertices.length;for(let t=0,n=s.length;t<n;t++){const a=this.parseVertexIndex(s[t],e);this.addVertexPoint(a),this.addColor(a)}},addLineGeometry:function(s,e){this.object.geometry.type="Line";const t=this.vertices.length,n=this.uvs.length;for(let a=0,o=s.length;a<o;a++)this.addVertexLine(this.parseVertexIndex(s[a],t));for(let a=0,o=e.length;a<o;a++)this.addUVLine(this.parseUVIndex(e[a],n))}};return r.startObject("",!1),r}class wt extends l.Loader{constructor(s){super(s),this.materials=null}load(s,e,t,n){const a=this,o=new l.FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(s,function(c){try{e(a.parse(c))}catch(d){n?n(d):console.error(d),a.manager.itemError(s)}},t,n)}setMaterials(s){return this.materials=s,this}parse(s){const e=new yt;s.indexOf(`\r
`)!==-1&&(s=s.replace(/\r\n/g,`
`)),s.indexOf(`\\
`)!==-1&&(s=s.replace(/\\\n/g,""));const t=s.split(`
`);let n="",a="",o=0,c=[];const d=typeof"".trimLeft=="function";for(let p=0,w=t.length;p<w;p++)if(n=t[p],n=d?n.trimLeft():n.trim(),o=n.length,o!==0&&(a=n.charAt(0),a!=="#"))if(a==="v"){const g=n.split(/\s+/);switch(g[0]){case"v":e.vertices.push(parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3])),g.length>=7?(Z.setRGB(parseFloat(g[4]),parseFloat(g[5]),parseFloat(g[6])).convertSRGBToLinear(),e.colors.push(Z.r,Z.g,Z.b)):e.colors.push(void 0,void 0,void 0);break;case"vn":e.normals.push(parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3]));break;case"vt":e.uvs.push(parseFloat(g[1]),parseFloat(g[2]));break}}else if(a==="f"){const b=n.slice(1).trim().split(/\s+/),P=[];for(let S=0,M=b.length;S<M;S++){const A=b[S];if(A.length>0){const G=A.split("/");P.push(G)}}const y=P[0];for(let S=1,M=P.length-1;S<M;S++){const A=P[S],G=P[S+1];e.addFace(y[0],A[0],G[0],y[1],A[1],G[1],y[2],A[2],G[2])}}else if(a==="l"){const g=n.substring(1).trim().split(" ");let b=[];const P=[];if(n.indexOf("/")===-1)b=g;else for(let y=0,S=g.length;y<S;y++){const M=g[y].split("/");M[0]!==""&&b.push(M[0]),M[1]!==""&&P.push(M[1])}e.addLineGeometry(b,P)}else if(a==="p"){const b=n.slice(1).trim().split(" ");e.addPointGeometry(b)}else if((c=ft.exec(n))!==null){const g=(" "+c[0].slice(1).trim()).slice(1);e.startObject(g)}else if(ht.test(n))e.object.startMaterial(n.substring(7).trim(),e.materialLibraries);else if(pt.test(n))e.materialLibraries.push(n.substring(7).trim());else if(gt.test(n))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(a==="s"){if(c=n.split(" "),c.length>1){const b=c[1].trim().toLowerCase();e.object.smooth=b!=="0"&&b!=="off"}else e.object.smooth=!0;const g=e.object.currentMaterial();g&&(g.smooth=e.object.smooth)}else{if(n==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+n+'"')}e.finalize();const f=new l.Group;if(f.materialLibraries=[].concat(e.materialLibraries),!(e.objects.length===1&&e.objects[0].geometry.vertices.length===0)===!0)for(let p=0,w=e.objects.length;p<w;p++){const g=e.objects[p],b=g.geometry,P=g.materials,y=b.type==="Line",S=b.type==="Points";let M=!1;if(b.vertices.length===0)continue;const A=new l.BufferGeometry;A.setAttribute("position",new l.Float32BufferAttribute(b.vertices,3)),b.normals.length>0&&A.setAttribute("normal",new l.Float32BufferAttribute(b.normals,3)),b.colors.length>0&&(M=!0,A.setAttribute("color",new l.Float32BufferAttribute(b.colors,3))),b.hasUVIndices===!0&&A.setAttribute("uv",new l.Float32BufferAttribute(b.uvs,2));const G=[];for(let O=0,Y=P.length;O<Y;O++){const B=P[O],F=B.name+"_"+B.smooth+"_"+M;let j=e.materials[F];if(this.materials!==null){if(j=this.materials.create(B.name),y&&j&&!(j instanceof l.LineBasicMaterial)){const z=new l.LineBasicMaterial;l.Material.prototype.copy.call(z,j),z.color.copy(j.color),j=z}else if(S&&j&&!(j instanceof l.PointsMaterial)){const z=new l.PointsMaterial({size:10,sizeAttenuation:!1});l.Material.prototype.copy.call(z,j),z.color.copy(j.color),z.map=j.map,j=z}}j===void 0&&(y?j=new l.LineBasicMaterial:S?j=new l.PointsMaterial({size:1,sizeAttenuation:!1}):j=new l.MeshPhongMaterial,j.name=B.name,j.flatShading=!B.smooth,j.vertexColors=M,e.materials[F]=j),G.push(j)}let C;if(G.length>1){for(let O=0,Y=P.length;O<Y;O++){const B=P[O];A.addGroup(B.groupStart,B.groupCount,O)}y?C=new l.LineSegments(A,G):S?C=new l.Points(A,G):C=new l.Mesh(A,G)}else y?C=new l.LineSegments(A,G[0]):S?C=new l.Points(A,G[0]):C=new l.Mesh(A,G[0]);C.name=g.name,f.add(C)}else if(e.vertices.length>0){const p=new l.PointsMaterial({size:1,sizeAttenuation:!1}),w=new l.BufferGeometry;w.setAttribute("position",new l.Float32BufferAttribute(e.vertices,3)),e.colors.length>0&&e.colors[0]!==void 0&&(w.setAttribute("color",new l.Float32BufferAttribute(e.colors,3)),p.vertexColors=!0);const g=new l.Points(w,p);f.add(g)}return f}}const Se=i.defineComponent({__name:"OBJLoader",props:{castShadow:{type:Boolean,default:!1},position:{default:()=>[0,0,0]},receiveShadow:{type:Boolean,default:!1},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]},url:null},emits:["load","progress","error"],setup(r,{expose:s,emit:e}){const t=r,n=new wt,a=i.inject("scene"),o=new l.Group;o.castShadow=!0,o.receiveShadow=!0,a.add(o),E(t,"position",o),E(t,"rotation",o),E(t,"scale",o);function c(){n.load(t.url,function(d){for(const f of d.children)o.add(f),f.material=o.material,E(t,"position",o,!1),E(t,"rotation",o,!1),E(t,"scale",o,!1);e("load",d)},function(d){e("progress",d)},function(d){e("error",d)})}return c(),i.watch(()=>t.url,()=>c()),i.provide("mesh",o),s({three:o}),(d,f)=>i.renderSlot(d.$slots,"default")}}),Pe=i.defineComponent({__name:"AxesHelper",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},size:{default:1},scale:{default:()=>[1,1,1]}},setup(r,{expose:s}){const e=r,t=i.inject("scene"),n=new l.AxesHelper(e.size);return t.add(n),E(e,"position",n),E(e,"rotation",n),E(e,"scale",n),i.provide("mesh",n),s({three:n}),(a,o)=>i.renderSlot(a.$slots,"default")}}),bt={name:"BoxGeometry",render:()=>null},Le=i.defineComponent({...bt,props:{name:{default:""},width:{default:1},height:{default:1},depth:{default:1},widthSegments:{default:1},heightSegments:{default:1},depthSegments:{default:1}},setup(r,{expose:s}){const e=r;function t(d,f,h,p,w,g){return new l.BoxGeometry(d,f,h,p,w,g)}const n=i.reactive(new l.BufferGeometry);n.name=e.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const d=t(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments);R(n,d)}return c(),u(e,"name",()=>{n.name=e.name}),u(e,"width",c),u(e,"height",c),u(e,"depth",c),u(e,"widthSegments",c),u(e,"heightSegments",c),u(e,"depthSegments",c),s({three:n}),{props:e,makeBox:t,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),Mt={name:"BufferGeometry",render:()=>null},Ce=i.defineComponent({...Mt,props:{name:{default:""},vertices:{default:()=>[]},faces:{default:()=>[]},uvs:{default:()=>[]}},setup(r,{expose:s}){const e=r;function t(d,f,h){const p=new l.BufferGeometry,w=new Float32Array(d),g=new Float32Array(h);return p.setAttribute("position",new l.BufferAttribute(w,3)),p.setAttribute("uv",new l.BufferAttribute(g,2)),e.faces.length>0&&p.setIndex(f),p}const n=i.reactive(t(e.vertices,e.faces,e.uvs));n.name=e.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(d,f,h){const p=t(d,f,h);R(n,p)}return i.watch(()=>e.vertices,d=>{c(d,e.faces,e.uvs)},{deep:!0,immediate:!0}),i.watch(()=>e.faces,d=>{c(e.vertices,d,e.uvs)},{deep:!0,immediate:!0}),s({three:n}),{props:e,makeGeometry:t,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),_t={name:"CircleGeometry",render:()=>null},Ee=i.defineComponent({..._t,props:{name:{default:""},radius:{default:1},segments:{default:32},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(r,{expose:s}){const e=r;function t(d,f,h,p){return new l.CircleGeometry(d,f,h,p)}const n=i.reactive(new l.BufferGeometry);n.name=e.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const d=t(e.radius,e.segments,e.thetaStart,e.thetaLength);R(n,d)}return c(),u(e,"radius",c),u(e,"segments",c),u(e,"thetaStart",c),u(e,"thetaLength",c),s({three:n}),{props:e,makeCircle:t,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),St={name:"ConeGeometry",render:()=>null},Ae=i.defineComponent({...St,props:{name:{default:""},radius:{default:1},height:{default:1},radialSegments:{default:32},heightSegments:{default:1},openEnded:{type:Boolean,default:!1},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(r,{expose:s}){const e=r;function t(d,f,h,p,w,g,b){return new l.ConeGeometry(d,f,h,p,w,g,b)}const n=i.reactive(new l.BufferGeometry);n.name=e.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const d=t(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength);R(n,d)}return c(),u(e,"radius",c),u(e,"height",c),u(e,"radialSegments",c),u(e,"heightSegments",c),u(e,"openEnded",c),u(e,"thetaStart",c),u(e,"thetaLength",c),s({three:n}),{props:e,makeCone:t,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),Pt={name:"CylinderGeometry",render:()=>null},Ge=i.defineComponent({...Pt,props:{name:{default:""},radiusTop:{default:1},radiusBottom:{default:1},height:{default:1},radialSegments:{default:32},heightSegments:{default:1},openEnded:{type:Boolean,default:!1},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(r,{expose:s}){const e=r;function t(d,f,h,p,w,g,b,P){return new l.CylinderGeometry(d,f,h,p,w,g,b,P)}const n=i.reactive(new l.BufferGeometry);n.name=e.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const d=t(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength);R(n,d)}return c(),u(e,"radiusTop",c),u(e,"radiusBottom",c),u(e,"height",c),u(e,"radialSegments",c),u(e,"heightSegments",c),u(e,"openEnded",c),u(e,"thetaStart",c),u(e,"thetaLength",c),s({three:n}),{props:e,makeCylinder:t,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),Lt={name:"EdgesGeometry",render:()=>null},je=i.defineComponent({...Lt,props:{geometry:null},setup(r,{expose:s}){const e=r,t=i.reactive(new l.BufferGeometry),n=i.inject("mesh",null);n&&(n.geometry=t);const a=i.inject("getGeometry"),o=i.inject("addGeometry");o(t);function c(){const h=new l.EdgesGeometry(a(e.geometry));R(t,h);const p=n;"isLine"in p&&p.computeLineDistances()}let d=i.watch(a(e.geometry),()=>{c()},{deep:!0,immediate:!0});u(e,"geometry",()=>{d(),d=i.watch(a(e.geometry),()=>{c()},{immediate:!0,deep:!0})});const f=()=>{a(e.geometry)===void 0?i.nextTick(()=>f):c()};return i.nextTick(()=>f),s({three:t}),{props:e,three:t,mesh:n,getGeometry:a,addGeometry:o,redoGeometry:c,get unwatch(){return d},set unwatch(h){d=h},waitUntilGeometryChanged:f}}});class X extends l.BufferGeometry{constructor(s=(n,a,o)=>o.set(n,a,Math.cos(n)*Math.sin(a)),e=8,t=8){super(),this.type="ParametricGeometry",this.parameters={func:s,slices:e,stacks:t};const n=[],a=[],o=[],c=[],d=1e-5,f=new l.Vector3,h=new l.Vector3,p=new l.Vector3,w=new l.Vector3,g=new l.Vector3;s.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const b=e+1;for(let P=0;P<=t;P++){const y=P/t;for(let S=0;S<=e;S++){const M=S/e;s(M,y,h),a.push(h.x,h.y,h.z),M-d>=0?(s(M-d,y,p),w.subVectors(h,p)):(s(M+d,y,p),w.subVectors(p,h)),y-d>=0?(s(M,y-d,p),g.subVectors(h,p)):(s(M,y+d,p),g.subVectors(p,h)),f.crossVectors(w,g).normalize(),o.push(f.x,f.y,f.z),c.push(M,y)}}for(let P=0;P<t;P++)for(let y=0;y<e;y++){const S=P*b+y,M=P*b+y+1,A=(P+1)*b+y+1,G=(P+1)*b+y;n.push(S,M,G),n.push(M,A,G)}this.setIndex(n),this.setAttribute("position",new l.Float32BufferAttribute(a,3)),this.setAttribute("normal",new l.Float32BufferAttribute(o,3)),this.setAttribute("uv",new l.Float32BufferAttribute(c,2))}}const N={klein:function(r,s,e){s*=Math.PI,r*=2*Math.PI,s=s*2;let t,n;s<Math.PI?(t=3*Math.cos(s)*(1+Math.sin(s))+2*(1-Math.cos(s)/2)*Math.cos(s)*Math.cos(r),n=-8*Math.sin(s)-2*(1-Math.cos(s)/2)*Math.sin(s)*Math.cos(r)):(t=3*Math.cos(s)*(1+Math.sin(s))+2*(1-Math.cos(s)/2)*Math.cos(r+Math.PI),n=-8*Math.sin(s));const a=-2*(1-Math.cos(s)/2)*Math.sin(r);e.set(t,a,n)},plane:function(r,s){return function(e,t,n){const a=e*r,o=0,c=t*s;n.set(a,o,c)}},mobius:function(r,s,e){r=r-.5;const t=2*Math.PI*s,n=2,a=Math.cos(t)*(n+r*Math.cos(t/2)),o=Math.sin(t)*(n+r*Math.cos(t/2)),c=r*Math.sin(t/2);e.set(a,o,c)},mobius3d:function(r,s,e){r*=Math.PI,s*=2*Math.PI,r=r*2;const t=r/2,n=2.25,a=.125,o=.65;let c=a*Math.cos(s)*Math.cos(t)-o*Math.sin(s)*Math.sin(t);const d=a*Math.cos(s)*Math.sin(t)+o*Math.sin(s)*Math.cos(t),f=(n+c)*Math.sin(r);c=(n+c)*Math.cos(r),e.set(c,f,d)}};N.TubeGeometry=class extends X{constructor(s,e=64,t=1,n=8,a=!1){const o=e+1,c=s.computeFrenetFrames(e,a),d=c.tangents,f=c.normals,h=c.binormals,p=new l.Vector3;function w(g,b,P){b*=2*Math.PI;const y=Math.floor(g*(o-1));s.getPointAt(g,p);const S=f[y],M=h[y],A=-t*Math.cos(b),G=t*Math.sin(b);p.x+=A*S.x+G*M.x,p.y+=A*S.y+G*M.y,p.z+=A*S.z+G*M.z,P.copy(p)}super(w,e,n),this.tangents=d,this.normals=f,this.binormals=h,this.path=s,this.segments=e,this.radius=t,this.segmentsRadius=n,this.closed=a}},N.TorusKnotGeometry=class extends N.TubeGeometry{constructor(s=200,e=40,t=64,n=8,a=2,o=3){class c extends l.Curve{getPoint(w,g=new l.Vector3){const b=g;w*=Math.PI*2;const P=.5,y=(1+P*Math.cos(o*w))*Math.cos(a*w),S=(1+P*Math.cos(o*w))*Math.sin(a*w),M=P*Math.sin(o*w);return b.set(y,S,M).multiplyScalar(s)}}const d=t,f=n,h=new c;super(h,d,e,f,!0,!1),this.radius=s,this.tube=e,this.segmentsT=t,this.segmentsR=n,this.p=a,this.q=o}},N.SphereGeometry=class extends X{constructor(s,e,t){function n(a,o,c){a*=Math.PI,o*=2*Math.PI;const d=s*Math.sin(a)*Math.cos(o),f=s*Math.sin(a)*Math.sin(o),h=s*Math.cos(a);c.set(d,f,h)}super(n,e,t)}},N.PlaneGeometry=class extends X{constructor(s,e,t,n){function a(o,c,d){const f=o*s,h=0,p=c*e;d.set(f,h,p)}super(a,t,n)}};const Ct={name:"Parametriceometry",render:()=>null},xe=i.defineComponent({...Ct,props:{name:{default:""},function:{type:Function,default:N.klein},slices:{default:8},stacks:{default:8}},setup(r,{expose:s}){const e=r;function t(d,f,h){return new X(d,f,h)}const n=i.reactive(new l.BufferGeometry);n.name=e.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const d=t(e.function,e.slices,e.stacks);R(n,d)}return c(),u(e,"function",c),u(e,"stacks",c),u(e,"slices",c),s({three:n}),{props:e,makePlane:t,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),Et={name:"PlaneGeometry",render:()=>null},Te=i.defineComponent({...Et,props:{name:{default:""},width:{default:1},height:{default:1},widthSegments:{default:1},heightSegments:{default:1}},setup(r,{expose:s}){const e=r;function t(d,f,h,p){return new l.PlaneGeometry(d,f,h,p)}const n=i.reactive(new l.BufferGeometry);n.name=e.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const d=t(e.width,e.height,e.widthSegments,e.heightSegments);R(n,d)}return c(),u(e,"width",c),u(e,"height",c),u(e,"widthSegments",c),u(e,"heightSegments",c),s({three:n}),{props:e,makePlane:t,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),At={name:"RingGeometry",render:()=>null},Oe=i.defineComponent({...At,props:{name:{default:""},innerRadius:{default:.5},outerRadius:{default:1},thetaSegments:{default:32},phiSegments:{default:1},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(r,{expose:s}){const e=r;function t(d,f,h,p,w,g){return new l.RingGeometry(d,f,h,p,w,g)}const n=i.reactive(new l.BufferGeometry);n.name=e.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const d=t(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength);R(n,d)}return c(),u(e,"innerRadius",c),u(e,"outerRadius",c),u(e,"thetaSegments",c),u(e,"phiSegments",c),u(e,"thetaStart",c),u(e,"thetaLength",c),s({three:n}),{props:e,makeRing:t,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),Gt={name:"SphereGeometry",render:()=>null},Be=i.defineComponent({...Gt,props:{name:{default:""},radius:{default:1},widthSegments:{default:32},heightSegments:{default:16},phiStart:{default:0},phiLength:{default:2*Math.PI},thetaStart:{default:0},thetaLength:{default:Math.PI}},setup(r,{expose:s}){const e=r;function t(d,f,h,p,w,g,b){return new l.SphereGeometry(d,f,h,p,w,g,b)}const n=i.reactive(new l.BufferGeometry);n.name=e.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const d=t(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength);R(n,d)}return c(),u(e,"radius",c),u(e,"widthSegments",c),u(e,"heightSegments",c),u(e,"phiStart",c),u(e,"phiLength",c),u(e,"thetaStart",c),u(e,"thetaLength",c),s({three:n}),{props:e,makeSphere:t,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),jt={name:"WireframeGeometry",render:()=>null},$e=i.defineComponent({...jt,props:{geometry:null},setup(r,{expose:s}){const e=r,t=i.reactive(new l.BufferGeometry),n=i.inject("mesh",null);n&&(n.geometry=t);const a=i.inject("getGeometry"),o=i.inject("addGeometry");o(t);function c(){const h=new l.WireframeGeometry(a(e.geometry));R(t,h);const p=n;"isLine"in p&&p.computeLineDistances()}let d=i.watch(a(e.geometry),()=>{c()},{deep:!0,immediate:!0});u(e,"geometry",()=>{d(),d=i.watch(a(e.geometry),()=>{c()},{immediate:!0,deep:!0})});const f=()=>{a(e.geometry)===void 0?i.nextTick(()=>f):c()};return i.nextTick(()=>f),s({three:t}),{props:e,three:t,mesh:n,getGeometry:a,addGeometry:o,redoGeometry:c,get unwatch(){return d},set unwatch(h){d=h},waitUntilGeometryChanged:f}}}),xt={name:"LineBasicMaterial",render:()=>null},Re=i.defineComponent({...xt,props:{color:{default:16777215},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(r,{expose:s}){const e=r,t=new l.LineBasicMaterial({color:e.color});t.name=e.name;const n=i.inject("addMaterial");n(t);const a=i.inject("mesh",null);a&&(a.material=t);function o(){e.color&&(t.color=new l.Color(e.color)),t.opacity=e.opacity,t.transparent=e.transparent,t.needsUpdate=!0}return o(),u(e,"color",o),u(e,"opacity",o),u(e,"transparent",o),i.provide("material",t),s({three:t}),{props:e,three:t,addMaterial:n,mesh:a,applyProps:o}}}),Tt={name:"LineDashedMaterial",render:()=>null},ze=i.defineComponent({...Tt,props:{color:{default:16777215},scale:{default:1},dashSize:{default:3},gapSize:{default:1},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(r,{expose:s}){const e=r,t=new l.LineDashedMaterial({color:e.color});t.name=e.name;const n=i.inject("addMaterial");n(t);const a=i.inject("mesh",null);a&&(a.material=t);function o(){t.color=new l.Color(e.color),t.scale=e.scale,t.dashSize=e.dashSize,t.gapSize=e.gapSize,t.opacity=e.opacity,t.transparent=e.transparent,t.needsUpdate=!0}return o(),u(e,"color",o),u(e,"scale",o),u(e,"dashSize",o),u(e,"gapSize",o),u(e,"opacity",o),u(e,"transparent",o),i.provide("material",t),s({three:t}),{props:e,three:t,addMaterial:n,mesh:a,applyProps:o}}}),Ot={name:"MeshBasicMaterial"},Ie=i.defineComponent({...Ot,props:{color:null,side:{default:l.FrontSide},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1},vertexColors:{type:Boolean,default:!1}},setup(r,{expose:s}){const e=r,t=new l.MeshBasicMaterial;t.name=e.name,i.inject("addMaterial")(t);const a=i.inject("mesh",null);a&&(a.material=t);function o(){e.color!==void 0&&(t.color=new l.Color(e.color)),t.side=e.side,t.opacity=e.opacity,t.transparent=e.transparent,t.vertexColors=e.vertexColors,t.needsUpdate=!0}return o(),i.provide("material",t),u(e,"color",o),u(e,"side",o),u(e,"opacity",o),u(e,"transparent",o),u(e,"vertexColors",o),s({three:t}),(c,d)=>i.renderSlot(c.$slots,"default")}}),Bt={name:"MeshLambertMaterial"},Ve=i.defineComponent({...Bt,props:{color:{default:16777215},name:{default:""},side:{default:l.FrontSide},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(r,{expose:s}){const e=r,t=new l.MeshLambertMaterial;t.name=e.name,i.inject("addMaterial")(t);const a=i.inject("mesh",null);a&&(a.material=t);function o(c){c.color&&(t.color=new l.Color(c.color)),c.side&&(t.side=c.side)}return o(e),i.watch(()=>e.color,()=>o(e)),i.watch(()=>e.side,()=>o(e)),i.watch(()=>e.opacity,()=>{t.opacity=e.opacity},{immediate:!0}),i.watch(()=>e.transparent,()=>{t.transparent=e.transparent},{immediate:!0}),i.provide("material",t),s({three:t}),(c,d)=>i.renderSlot(c.$slots,"default")}}),$t={name:"PointsMaterial",render:()=>null},ke=i.defineComponent({...$t,props:{color:{default:16777215},sizeAttenuation:{type:Boolean,default:!0},name:{default:""},size:{default:1},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(r,{expose:s}){const e=r,t=new l.PointsMaterial({color:e.color,sizeAttenuation:e.sizeAttenuation,size:e.size});t.name=e.name;const n=i.inject("mesh",null),a=i.inject("addMaterial");a(t),n&&(n.material=t);function o(){t.color=new l.Color(e.color),t.size=e.size,t.sizeAttenuation=e.sizeAttenuation,t.opacity=e.opacity,t.transparent=e.transparent,t.needsUpdate=!0}return o(),u(e,"color",o),u(e,"size",o),u(e,"sizeAttenuation",o),u(e,"opacity",o),u(e,"transparent",o),i.provide("material",t),s({three:t}),{props:e,three:t,mesh:n,addMaterial:a,applyProps:o}}}),Rt={name:"MeshNormalMaterial"},De=i.defineComponent({...Rt,props:{side:{default:l.FrontSide},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(r,{expose:s}){const e=r,t=new l.MeshNormalMaterial;t.name=e.name,i.inject("addMaterial")(t);const a=i.inject("mesh",null);return a&&(a.material=t),i.watch(()=>e.side,()=>{t.side=e.side},{immediate:!0}),i.watch(()=>e.opacity,()=>{t.opacity=e.opacity},{immediate:!0}),i.watch(()=>e.transparent,()=>{t.transparent=e.transparent},{immediate:!0}),i.provide("material",t),s({three:t}),(o,c)=>i.renderSlot(o.$slots,"default")}}),zt={name:"AmbientLight",render:()=>null},Ue=i.defineComponent({...zt,props:{color:{default:16777215},intensity:{default:1}},setup(r,{expose:s}){const e=r,t=i.inject("scene"),n=new l.AmbientLight;t.add(n);function a(o){n.color=new l.Color(o.color),n.intensity=o.intensity}return a(e),i.watch(()=>e.color,()=>a(e)),i.watch(()=>e.intensity,()=>a(e)),s({three:n}),{props:e,scene:t,three:n,applyProps:a}}}),It={name:"PointLight",render:()=>null},Ne=i.defineComponent({...It,props:{castShadow:{type:Boolean,default:!1},color:{default:16777215},intensity:{default:1},position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(r,{expose:s}){const e=r,t=i.inject("scene"),n=new l.PointLight;t.add(n),E(e,"position",n),E(e,"rotation",n),E(e,"scale",n);function a(o){n.color=new l.Color(o.color),n.intensity=o.intensity,n.castShadow=o.castShadow}return a(e),i.watch(()=>e.color,()=>a(e)),i.watch(()=>e.intensity,()=>a(e)),i.watch(()=>e.castShadow,()=>a(e)),s({three:n}),{props:e,scene:t,three:n,applyProps:a}}}),Vt={name:"TextureLoader",render:()=>null},Fe=i.defineComponent({...Vt,props:{url:null,wrapS:{default:l.ClampToEdgeWrapping},wrapT:{default:l.ClampToEdgeWrapping}},setup(r,{expose:s}){const e=r,t=i.inject("material"),n=i.ref(new l.Texture);function a(){new l.TextureLoader().loadAsync(e.url).then(c=>{n.value=c,"map"in t&&(t.map=n.value,t.needsUpdate=!0),o()})}function o(){n.value.wrapS=e.wrapS,n.value.wrapT=e.wrapT,n.value.needsUpdate=!0}return a(),u(e,"url",a),u(e,"wrapS",o),u(e,"wrapT",o),s({three:n}),{props:e,material:t,three:n,load:a,applyProps:o}}});function kt(r){r.component("Renderer",se),r.component("Scene",ie),r.component("PerspectiveCamera",re),r.component("OrthographicCamera",ce),r.component("OrbitControls",de),r.component("Group",ue),r.component("InstancedMesh",fe),r.component("Line",pe),r.component("LineLoop",he),r.component("LineSegments",ge),r.component("Mesh",ye),r.component("Points",we),r.component("OBJLoader",Se),r.component("AxesHelper",Pe),r.component("BoxGeometry",Le),r.component("BufferGeometry",Ce),r.component("CircleGeometry",Ee),r.component("ConeGeometry",Ae),r.component("CylinderGeometry",Ge),r.component("EdgesGeometry",je),r.component("ParametricGeometry",xe),r.component("PlaneGeometry",Te),r.component("RingGeometry",Oe),r.component("SphereGeometry",Be),r.component("WireframeGeometry",$e),r.component("LineBasicMaterial",Re),r.component("LineDashedMaterial",ze),r.component("MeshBasicMaterial",Ie),r.component("MeshLambertMaterial",Ve),r.component("PointsMaterial",ke),r.component("MeshNormalMaterial",De),r.component("AmbientLight",Ue),r.component("PointLight",Ne),r.component("TextureLoader",Fe)}L.AmbientLight=Ue,L.AxesHelper=Pe,L.BoxGeometry=Le,L.BufferGeometry=Ce,L.CircleGeometry=Ee,L.ConeGeometry=Ae,L.CylinderGeometry=Ge,L.EdgesGeometry=je,L.Group=ue,L.InstancedMesh=fe,L.Line=pe,L.LineBasicMaterial=Re,L.LineDashedMaterial=ze,L.LineLoop=he,L.LineSegments=ge,L.Mesh=ye,L.MeshBasicMaterial=Ie,L.MeshLambertMaterial=Ve,L.MeshNormalMaterial=De,L.OBJLoader=Se,L.OrbitControls=de,L.OrthographicCamera=ce,L.ParametricGeometry=xe,L.PerspectiveCamera=re,L.PlaneGeometry=Te,L.PointLight=Ne,L.Points=we,L.PointsMaterial=ke,L.Renderer=se,L.RingGeometry=Oe,L.Scene=ie,L.SphereGeometry=Be,L.TextureLoader=Fe,L.WireframeGeometry=$e,L.install=kt,Object.defineProperty(L,Symbol.toStringTag,{value:"Module"})});
