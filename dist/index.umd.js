(function(A,a){typeof exports=="object"&&typeof module<"u"?a(exports,require("vue"),require("three")):typeof define=="function"&&define.amd?define(["exports","vue","three"],a):(A=typeof globalThis<"u"?globalThis:A||self,a(A["@janvorisek/drie"]={},A.Vue,A.three))})(this,function(A,a,l){"use strict";const ee=s=>s===void 0?new l.Vector3(0,0,0):"x"in s?new l.Vector3(s.x,s.y,s.z):new l.Vector3(s[0],s[1],s[2]),te=(s,i,t)=>{t[s].isVector3?t[s].set(i.x,i.y,i.z):"isEuler"in t[s]&&t[s].setFromVector3(i)},L=(s,i,t,e=!0)=>{if(t!==null){if(s[i]!==void 0){const n=ee(s[i]);te(i,n,t)}e&&a.watch(()=>s[i],()=>{if(s[i]!==void 0){const n=ee(s[i]);te(i,n,t)}})}},_=(s,i,t)=>{a.watch(()=>s[i],()=>{t()})};function D(s,i){i.hasAttribute("position")&&(s.setAttribute("position",i.getAttribute("position")),s.attributes.position.needsUpdate=!0),i.hasAttribute("normal")&&(s.setAttribute("normal",i.getAttribute("normal")),s.attributes.normal.needsUpdate=!0),i.hasAttribute("uv")&&(s.setAttribute("uv",i.getAttribute("uv")),s.attributes.uv.needsUpdate=!0),s.setIndex(i.getIndex())}function U(s){if(s.children.length>0)for(let i=s.children.length-1;i>=0;i--)U(s.children[i]);if(s.geometry&&s.geometry.dispose(),s.material)if(s.material.length)for(let i=0;i<s.material.length;++i)s.material[i].map&&s.material[i].map.dispose(),s.material[i].lightMap&&s.material[i].lightMap.dispose(),s.material[i].bumpMap&&s.material[i].bumpMap.dispose(),s.material[i].normalMap&&s.material[i].normalMap.dispose(),s.material[i].specularMap&&s.material[i].specularMap.dispose(),s.material[i].envMap&&s.material[i].envMap.dispose(),s.material[i].dispose();else s.material.map&&s.material.map.dispose(),s.material.lightMap&&s.material.lightMap.dispose(),s.material.bumpMap&&s.material.bumpMap.dispose(),s.material.normalMap&&s.material.normalMap.dispose(),s.material.specularMap&&s.material.specularMap.dispose(),s.material.envMap&&s.material.envMap.dispose(),s.material.dispose();return s.removeFromParent(),!0}function H(s){const i=a.inject("scene"),t=a.inject("parent",void 0);a.onMounted(()=>{t?t.add(s):i.add(s)}),a.onUnmounted(()=>{t?t.remove(s):i.remove(s)})}function qe(s,i,t){const e=a.inject("camera"),n=a.inject("canvas");a.inject("scene");const o=f=>{const M=new l.Raycaster,p=ne(f);M.setFromCamera(p,e.value);const w=M.intersectObjects(s);w.length>0&&t("click",w,p)};let r=!1,m=[];const d=f=>{const M=new l.Raycaster,p=ne(f);M.setFromCamera(p,e.value);const w=M.intersectObjects(s);w.length>0?(m=w,r===!1&&t("mouseenter",w,p),r=!0,t("mousemove",w,p)):(r&&t("mouseleave",m,p),r=!1,m=[])};a.onMounted(()=>{i.enableRaycasting&&(n==null||n.value.addEventListener("click",o),n==null||n.value.addEventListener("mousemove",d))}),a.onUnmounted(()=>{i.enableRaycasting&&(n==null||n.value.removeEventListener("click",o),n==null||n.value.removeEventListener("mousemove",d))}),a.watch(()=>i.enableRaycasting,f=>{f?(n==null||n.value.addEventListener("click",o),n==null||n.value.addEventListener("mousemove",d)):(n==null||n.value.removeEventListener("click",o),n==null||n.value.removeEventListener("mousemove",d))})}function ne(s){const i=new l.Vector2;return i.x=(s.pageX-s.currentTarget.offsetLeft)/s.currentTarget.offsetWidth*2-1,i.y=-((s.pageY-s.currentTarget.offsetTop)/s.currentTarget.offsetHeight)*2+1,i}const oe=a.defineComponent({__name:"Renderer",props:{camera:null,autoResize:{type:Boolean,default:!0},onBeforeRender:{type:Function,default:()=>{}},antialias:{type:Boolean,default:!1},frameLimit:{default:60},alpha:{type:Boolean,default:!1},shadowMapEnabled:{type:Boolean,default:!1}},setup(s,{expose:i}){const t=s;let e=null;const n=[],o=a.reactive([]);let r=a.ref(null);const m=a.ref([]),d=a.ref([]),f=a.ref();a.provide("canvas",f);let M=Date.now(),p=1e3/t.frameLimit;a.watch(()=>t.camera,g=>w(g));const w=g=>{if(g){const E=m.value.find(P=>P.name===g);E===void 0&&(r.value=null),r.value=E}else r.value=m.value[0]};function u(g){e!==null&&(e.shadowMap.enabled=g.shadowMapEnabled,p=1e3/g.frameLimit)}a.onMounted(()=>{e=new l.WebGLRenderer({canvas:f.value,antialias:t.antialias,alpha:!0}),e.setSize(1,1),u(t),w(t.camera),new ResizeObserver(E=>{E.forEach(P=>{e&&t.autoResize&&e.setSize(P.contentRect.width,P.contentRect.height)})}).observe(f.value.parentElement),y()}),a.onUnmounted(()=>{for(let g of n)U(g)});function y(){requestAnimationFrame(y);const g=Date.now(),E=g-M;if(!(p>-1&&E<p)){if(M=g-E%p,t.onBeforeRender&&t.onBeforeRender(),d.value.length>0&&r)for(const P of d.value)P.value!==null&&(P.value.object.uuid===r.value.uuid?(P.value.enabled=!0,P.value.update()):P.value.enabled=!1);if(r&&e)for(const P of n)e.render(P,r.value)}}return u(t),a.watch(()=>t.shadowMapEnabled,()=>u(t)),a.watch(()=>t.frameLimit,()=>u(t)),a.provide("addCamera",g=>m.value.push(g)),a.provide("addScene",g=>n.push(g)),a.provide("addGeometry",g=>o.push(g)),a.provide("getGeometry",g=>o.find(E=>E.name===g)),a.provide("addControls",g=>d.value.push(g)),a.provide("camera",r),i({three:e}),(g,E)=>(a.openBlock(),a.createElementBlock(a.Fragment,null,[a.renderSlot(g.$slots,"default"),a.createElementVNode("canvas",{ref_key:"canvas",ref:f},null,512)],64))}}),ae=a.defineComponent({__name:"Scene",props:{background:{default:16777215}},setup(s,{expose:i}){const t=s,e=new l.Scene;a.provide("scene",e),a.inject("addScene")(e);function n(o){o.background&&(e.background=new l.Color(o.background))}return n(t),a.watch(()=>t.background,()=>n(t)),i({three:e}),(o,r)=>a.renderSlot(o.$slots,"default")}}),Je={name:"PerspectiveCamera"},ie=a.defineComponent({...Je,props:{aspect:{default:1},autoResize:{type:Boolean,default:!0},far:{default:2e3},lookAt:{default:()=>[0,0,0]},name:{default:""},near:{default:.1},position:{default:()=>[0,0,0]},up:{default:()=>[0,1,0]}},setup(s,{expose:i}){const t=s,e=new l.PerspectiveCamera(75,window.innerWidth/window.innerHeight*1e3,.1,1e3);a.inject("addCamera")(e);const n=a.inject("canvas");a.onMounted(()=>{t.name&&(e.name=t.name),new ResizeObserver(m=>{m.forEach(d=>{t.autoResize&&(e.aspect=d.contentRect.width/d.contentRect.height,e.updateProjectionMatrix())})}).observe(n.value)}),L(t,"position",e),L(t,"up",e),L(t,"lookAt",e);function o(){t.autoResize||(e.aspect=t.aspect),e.near=t.near,e.far=t.far,e.updateProjectionMatrix()}return o(),_(t,"aspect",o),_(t,"near",o),_(t,"far",o),a.provide("parentCamera",e),i({three:e}),(r,m)=>a.renderSlot(r.$slots,"default")}}),Qe={name:"OrthographicCamera"},se=a.defineComponent({...Qe,props:{far:{default:2e3},lookAt:{default:()=>[0,0,0]},name:{default:""},near:{default:.1},position:{default:()=>[0,0,0]},up:{default:()=>[0,1,0]}},setup(s,{expose:i}){const t=s,e=new l.OrthographicCamera(-10,10,10,-10,.1,1e3);e.lookAt(0,0,0),e.updateProjectionMatrix(),a.inject("addCamera")(e);const n=a.inject("canvas");a.onMounted(()=>{t.name&&(e.name=t.name),new ResizeObserver(m=>{m.forEach(d=>{const f=d.contentRect.width/d.contentRect.height;e.left=e.bottom*f,e.right=e.top*f,e.updateProjectionMatrix()})}).observe(n.value)}),L(t,"position",e),L(t,"up",e),L(t,"lookAt",e);function o(){e.near=t.near,e.far=t.far,e.updateProjectionMatrix()}return o(),_(t,"near",o),_(t,"far",o),a.provide("parentCamera",e),i({three:e}),(r,m)=>a.renderSlot(r.$slots,"default")}}),re={type:"change"},X={type:"start"},ce={type:"end"};class et extends l.EventDispatcher{constructor(i,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=i,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new l.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:l.MOUSE.ROTATE,MIDDLE:l.MOUSE.DOLLY,RIGHT:l.MOUSE.PAN},this.touches={ONE:l.TOUCH.ROTATE,TWO:l.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(c){c.addEventListener("keydown",Ye),this._domElementKeyEvents=c},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(re),e.update(),o=n.NONE},this.update=function(){const c=new l.Vector3,h=new l.Quaternion().setFromUnitVectors(i.up,new l.Vector3(0,1,0)),T=h.clone().invert(),j=new l.Vector3,k=new l.Quaternion,N=2*Math.PI;return function(){const Ke=e.object.position;c.copy(Ke).sub(e.target),c.applyQuaternion(h),m.setFromVector3(c),e.autoRotate&&o===n.NONE&&I(F()),e.enableDamping?(m.theta+=d.theta*e.dampingFactor,m.phi+=d.phi*e.dampingFactor):(m.theta+=d.theta,m.phi+=d.phi);let V=e.minAzimuthAngle,$=e.maxAzimuthAngle;return isFinite(V)&&isFinite($)&&(V<-Math.PI?V+=N:V>Math.PI&&(V-=N),$<-Math.PI?$+=N:$>Math.PI&&($-=N),V<=$?m.theta=Math.max(V,Math.min($,m.theta)):m.theta=m.theta>(V+$)/2?Math.max(V,m.theta):Math.min($,m.theta)),m.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=f,m.radius=Math.max(e.minDistance,Math.min(e.maxDistance,m.radius)),e.enableDamping===!0?e.target.addScaledVector(M,e.dampingFactor):e.target.add(M),c.setFromSpherical(m),c.applyQuaternion(T),Ke.copy(e.target).add(c),e.object.lookAt(e.target),e.enableDamping===!0?(d.theta*=1-e.dampingFactor,d.phi*=1-e.dampingFactor,M.multiplyScalar(1-e.dampingFactor)):(d.set(0,0,0),M.set(0,0,0)),f=1,p||j.distanceToSquared(e.object.position)>r||8*(1-k.dot(e.object.quaternion))>r?(e.dispatchEvent(re),j.copy(e.object.position),k.copy(e.object.quaternion),p=!1,!0):!1}}(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",Ze),e.domElement.removeEventListener("pointerdown",Ue),e.domElement.removeEventListener("pointercancel",Fe),e.domElement.removeEventListener("wheel",He),e.domElement.removeEventListener("pointermove",q),e.domElement.removeEventListener("pointerup",J),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",Ye)};const e=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=n.NONE;const r=1e-6,m=new l.Spherical,d=new l.Spherical;let f=1;const M=new l.Vector3;let p=!1;const w=new l.Vector2,u=new l.Vector2,y=new l.Vector2,g=new l.Vector2,E=new l.Vector2,P=new l.Vector2,x=new l.Vector2,S=new l.Vector2,O=new l.Vector2,b=[],R={};function F(){return 2*Math.PI/60/60*e.autoRotateSpeed}function G(){return Math.pow(.95,e.zoomSpeed)}function I(c){d.theta-=c}function C(c){d.phi-=c}const B=function(){const c=new l.Vector3;return function(T,j){c.setFromMatrixColumn(j,0),c.multiplyScalar(-T),M.add(c)}}(),Ge=function(){const c=new l.Vector3;return function(T,j){e.screenSpacePanning===!0?c.setFromMatrixColumn(j,1):(c.setFromMatrixColumn(j,0),c.crossVectors(e.object.up,c)),c.multiplyScalar(T),M.add(c)}}(),v=function(){const c=new l.Vector3;return function(T,j){const k=e.domElement;if(e.object.isPerspectiveCamera){const N=e.object.position;c.copy(N).sub(e.target);let Z=c.length();Z*=Math.tan(e.object.fov/2*Math.PI/180),B(2*T*Z/k.clientHeight,e.object.matrix),Ge(2*j*Z/k.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?(B(T*(e.object.right-e.object.left)/e.object.zoom/k.clientWidth,e.object.matrix),Ge(j*(e.object.top-e.object.bottom)/e.object.zoom/k.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}}();function K(c){e.object.isPerspectiveCamera?f/=c:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom*c)),e.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function ze(c){e.object.isPerspectiveCamera?f*=c:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/c)),e.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function Be(c){w.set(c.clientX,c.clientY)}function At(c){x.set(c.clientX,c.clientY)}function ke(c){g.set(c.clientX,c.clientY)}function Lt(c){u.set(c.clientX,c.clientY),y.subVectors(u,w).multiplyScalar(e.rotateSpeed);const h=e.domElement;I(2*Math.PI*y.x/h.clientHeight),C(2*Math.PI*y.y/h.clientHeight),w.copy(u),e.update()}function Et(c){S.set(c.clientX,c.clientY),O.subVectors(S,x),O.y>0?K(G()):O.y<0&&ze(G()),x.copy(S),e.update()}function St(c){E.set(c.clientX,c.clientY),P.subVectors(E,g).multiplyScalar(e.panSpeed),v(P.x,P.y),g.copy(E),e.update()}function Ct(c){c.deltaY<0?ze(G()):c.deltaY>0&&K(G()),e.update()}function Ot(c){let h=!1;switch(c.code){case e.keys.UP:v(0,e.keyPanSpeed),h=!0;break;case e.keys.BOTTOM:v(0,-e.keyPanSpeed),h=!0;break;case e.keys.LEFT:v(e.keyPanSpeed,0),h=!0;break;case e.keys.RIGHT:v(-e.keyPanSpeed,0),h=!0;break}h&&(c.preventDefault(),e.update())}function Ve(){if(b.length===1)w.set(b[0].pageX,b[0].pageY);else{const c=.5*(b[0].pageX+b[1].pageX),h=.5*(b[0].pageY+b[1].pageY);w.set(c,h)}}function $e(){if(b.length===1)g.set(b[0].pageX,b[0].pageY);else{const c=.5*(b[0].pageX+b[1].pageX),h=.5*(b[0].pageY+b[1].pageY);g.set(c,h)}}function De(){const c=b[0].pageX-b[1].pageX,h=b[0].pageY-b[1].pageY,T=Math.sqrt(c*c+h*h);x.set(0,T)}function xt(){e.enableZoom&&De(),e.enablePan&&$e()}function Tt(){e.enableZoom&&De(),e.enableRotate&&Ve()}function Ie(c){if(b.length==1)u.set(c.pageX,c.pageY);else{const T=Q(c),j=.5*(c.pageX+T.x),k=.5*(c.pageY+T.y);u.set(j,k)}y.subVectors(u,w).multiplyScalar(e.rotateSpeed);const h=e.domElement;I(2*Math.PI*y.x/h.clientHeight),C(2*Math.PI*y.y/h.clientHeight),w.copy(u)}function ve(c){if(b.length===1)E.set(c.pageX,c.pageY);else{const h=Q(c),T=.5*(c.pageX+h.x),j=.5*(c.pageY+h.y);E.set(T,j)}P.subVectors(E,g).multiplyScalar(e.panSpeed),v(P.x,P.y),g.copy(E)}function Ne(c){const h=Q(c),T=c.pageX-h.x,j=c.pageY-h.y,k=Math.sqrt(T*T+j*j);S.set(0,k),O.set(0,Math.pow(S.y/x.y,e.zoomSpeed)),K(O.y),x.copy(S)}function jt(c){e.enableZoom&&Ne(c),e.enablePan&&ve(c)}function Rt(c){e.enableZoom&&Ne(c),e.enableRotate&&Ie(c)}function Ue(c){e.enabled!==!1&&(b.length===0&&(e.domElement.setPointerCapture(c.pointerId),e.domElement.addEventListener("pointermove",q),e.domElement.addEventListener("pointerup",J)),Vt(c),c.pointerType==="touch"?Bt(c):Gt(c))}function q(c){e.enabled!==!1&&(c.pointerType==="touch"?kt(c):zt(c))}function J(c){Xe(c),b.length===0&&(e.domElement.releasePointerCapture(c.pointerId),e.domElement.removeEventListener("pointermove",q),e.domElement.removeEventListener("pointerup",J)),e.dispatchEvent(ce),o=n.NONE}function Fe(c){Xe(c)}function Gt(c){let h;switch(c.button){case 0:h=e.mouseButtons.LEFT;break;case 1:h=e.mouseButtons.MIDDLE;break;case 2:h=e.mouseButtons.RIGHT;break;default:h=-1}switch(h){case l.MOUSE.DOLLY:if(e.enableZoom===!1)return;At(c),o=n.DOLLY;break;case l.MOUSE.ROTATE:if(c.ctrlKey||c.metaKey||c.shiftKey){if(e.enablePan===!1)return;ke(c),o=n.PAN}else{if(e.enableRotate===!1)return;Be(c),o=n.ROTATE}break;case l.MOUSE.PAN:if(c.ctrlKey||c.metaKey||c.shiftKey){if(e.enableRotate===!1)return;Be(c),o=n.ROTATE}else{if(e.enablePan===!1)return;ke(c),o=n.PAN}break;default:o=n.NONE}o!==n.NONE&&e.dispatchEvent(X)}function zt(c){if(e.enabled!==!1)switch(o){case n.ROTATE:if(e.enableRotate===!1)return;Lt(c);break;case n.DOLLY:if(e.enableZoom===!1)return;Et(c);break;case n.PAN:if(e.enablePan===!1)return;St(c);break}}function He(c){e.enabled===!1||e.enableZoom===!1||o!==n.NONE||(c.preventDefault(),e.dispatchEvent(X),Ct(c),e.dispatchEvent(ce))}function Ye(c){e.enabled===!1||e.enablePan===!1||Ot(c)}function Bt(c){switch(We(c),b.length){case 1:switch(e.touches.ONE){case l.TOUCH.ROTATE:if(e.enableRotate===!1)return;Ve(),o=n.TOUCH_ROTATE;break;case l.TOUCH.PAN:if(e.enablePan===!1)return;$e(),o=n.TOUCH_PAN;break;default:o=n.NONE}break;case 2:switch(e.touches.TWO){case l.TOUCH.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;xt(),o=n.TOUCH_DOLLY_PAN;break;case l.TOUCH.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Tt(),o=n.TOUCH_DOLLY_ROTATE;break;default:o=n.NONE}break;default:o=n.NONE}o!==n.NONE&&e.dispatchEvent(X)}function kt(c){switch(We(c),o){case n.TOUCH_ROTATE:if(e.enableRotate===!1)return;Ie(c),e.update();break;case n.TOUCH_PAN:if(e.enablePan===!1)return;ve(c),e.update();break;case n.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;jt(c),e.update();break;case n.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Rt(c),e.update();break;default:o=n.NONE}}function Ze(c){e.enabled!==!1&&c.preventDefault()}function Vt(c){b.push(c)}function Xe(c){delete R[c.pointerId];for(let h=0;h<b.length;h++)if(b[h].pointerId==c.pointerId){b.splice(h,1);return}}function We(c){let h=R[c.pointerId];h===void 0&&(h=new l.Vector2,R[c.pointerId]=h),h.set(c.pageX,c.pageY)}function Q(c){const h=c.pointerId===b[0].pointerId?b[1]:b[0];return R[h.pointerId]}e.domElement.addEventListener("contextmenu",Ze),e.domElement.addEventListener("pointerdown",Ue),e.domElement.addEventListener("pointercancel",Fe),e.domElement.addEventListener("wheel",He,{passive:!1}),this.update()}}const tt={name:"OrbitControls",render:()=>null},le=a.defineComponent({...tt,props:{enablePan:{type:Boolean,default:!0},enableRotate:{type:Boolean,default:!0},enableZoom:{type:Boolean,default:!0},minZoom:{default:0},maxZoom:{default:1/0},minDistance:{default:0},maxDistance:{default:1/0},minPolarAngle:{default:0},maxPolarAngle:{default:Math.PI},minAzimuthAngle:{default:1/0},maxAzimuthAngle:{default:1/0},target:{default:()=>[0,0,0]}},setup(s,{expose:i}){const t=s,e=a.ref(null);a.inject("addControls")(e);const n=a.inject("parentCamera"),o=a.inject("canvas");function r(){e.value!=null&&(e.value.enablePan=t.enablePan,e.value.enableRotate=t.enableRotate,e.value.enableZoom=t.enableZoom,e.value.minZoom=t.minZoom,e.value.maxZoom=t.maxZoom,e.value.minDistance=t.minDistance,e.value.maxDistance=t.maxDistance,e.value.minPolarAngle=t.minPolarAngle,e.value.maxPolarAngle=t.maxPolarAngle,e.value.minAzimuthAngle=t.minAzimuthAngle,e.value.maxAzimuthAngle=t.maxAzimuthAngle)}return a.watch(o,()=>{e.value=new et(n,o.value),r(),L(t,"target",e.value)}),r(),_(t,"enablePan",r),_(t,"enableRotate",r),_(t,"enableZoom",r),_(t,"minZoom",r),_(t,"maxZoom",r),_(t,"minDistance",r),_(t,"maxDistance",r),_(t,"minPolarAngle",r),_(t,"maxPolarAngle",r),_(t,"minAzimuthAngle",r),_(t,"maxAzimuthAngle",r),i({three:e}),{props:t,three:e,camera:n,canvas:o,applyProps:r}}}),me=a.defineComponent({__name:"Group",props:{enableRaycasting:{type:Boolean,default:!1},position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},emits:["click","mousemove","mouseenter","mouseleave"],setup(s,{expose:i,emit:t}){const e=s,n=new l.Group;return H(n),L(e,"position",n),L(e,"rotation",n),L(e,"scale",n),qe(n.children,e,t),a.provide("parent",n),i({three:n}),(o,r)=>a.renderSlot(o.$slots,"default")}}),de=a.defineComponent({__name:"LineSegments",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(s,{expose:i}){const t=s,e=a.inject("scene"),n=new l.BufferGeometry,o=new l.LineBasicMaterial({color:"black"}),r=new l.LineSegments(n,o);return H(r),L(t,"position",r),L(t,"rotation",r),L(t,"scale",r),a.onUnmounted(()=>{e.remove(r),U(r)}),a.provide("mesh",r),i({three:r}),(m,d)=>a.renderSlot(m.$slots,"default")}}),ue=a.defineComponent({__name:"Mesh",props:{castShadow:{type:Boolean,default:!1},position:{default:()=>[0,0,0]},receiveShadow:{type:Boolean,default:!1},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(s,{expose:i}){const t=s,e=a.inject("scene"),n=new l.BufferGeometry,o=new l.MeshBasicMaterial,r=new l.Mesh(n,o);r.castShadow=!0,r.receiveShadow=!0,H(r),L(t,"position",r),L(t,"rotation",r),L(t,"scale",r);function m(){r.castShadow=t.castShadow,r.receiveShadow=t.receiveShadow}return m(),_(t,"castShadow",m),_(t,"receiveShadow",m),a.onUnmounted(()=>{e.remove(r),U(r)}),a.provide("mesh",r),i({three:r}),(d,f)=>a.renderSlot(d.$slots,"default")}}),fe=a.defineComponent({__name:"Points",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(s,{expose:i}){const t=s,e=a.inject("scene"),n=new l.BufferGeometry,o=new l.PointsMaterial({color:"red",sizeAttenuation:!1,size:2}),r=new l.Points(n,o);return H(r),L(t,"position",r),L(t,"rotation",r),L(t,"scale",r),a.onUnmounted(()=>{e.remove(r),U(r)}),a.provide("mesh",r),i({three:r}),(m,d)=>a.renderSlot(m.$slots,"default")}}),nt=/^[og]\s*(.+)?/,ot=/^mtllib /,at=/^usemtl /,it=/^usemap /,pe=new l.Vector3,W=new l.Vector3,he=new l.Vector3,ge=new l.Vector3,z=new l.Vector3,Y=new l.Color;function st(){const s={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(i,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=i,this.object.fromDeclaration=t!==!1;return}const e=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:i||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(n,o){const r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);const m={index:this.materials.length,name:n||"",mtllib:Array.isArray(o)&&o.length>0?o[o.length-1]:"",smooth:r!==void 0?r.smooth:this.smooth,groupStart:r!==void 0?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(d){const f={index:typeof d=="number"?d:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return f.clone=this.clone.bind(f),f}};return this.materials.push(m),m},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(n){const o=this.currentMaterial();if(o&&o.groupEnd===-1&&(o.groupEnd=this.geometry.vertices.length/3,o.groupCount=o.groupEnd-o.groupStart,o.inherited=!1),n&&this.materials.length>1)for(let r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return n&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),o}},e&&e.name&&typeof e.clone=="function"){const n=e.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(i,t){const e=parseInt(i,10);return(e>=0?e-1:e+t/3)*3},parseNormalIndex:function(i,t){const e=parseInt(i,10);return(e>=0?e-1:e+t/3)*3},parseUVIndex:function(i,t){const e=parseInt(i,10);return(e>=0?e-1:e+t/2)*2},addVertex:function(i,t,e){const n=this.vertices,o=this.object.geometry.vertices;o.push(n[i+0],n[i+1],n[i+2]),o.push(n[t+0],n[t+1],n[t+2]),o.push(n[e+0],n[e+1],n[e+2])},addVertexPoint:function(i){const t=this.vertices;this.object.geometry.vertices.push(t[i+0],t[i+1],t[i+2])},addVertexLine:function(i){const t=this.vertices;this.object.geometry.vertices.push(t[i+0],t[i+1],t[i+2])},addNormal:function(i,t,e){const n=this.normals,o=this.object.geometry.normals;o.push(n[i+0],n[i+1],n[i+2]),o.push(n[t+0],n[t+1],n[t+2]),o.push(n[e+0],n[e+1],n[e+2])},addFaceNormal:function(i,t,e){const n=this.vertices,o=this.object.geometry.normals;pe.fromArray(n,i),W.fromArray(n,t),he.fromArray(n,e),z.subVectors(he,W),ge.subVectors(pe,W),z.cross(ge),z.normalize(),o.push(z.x,z.y,z.z),o.push(z.x,z.y,z.z),o.push(z.x,z.y,z.z)},addColor:function(i,t,e){const n=this.colors,o=this.object.geometry.colors;n[i]!==void 0&&o.push(n[i+0],n[i+1],n[i+2]),n[t]!==void 0&&o.push(n[t+0],n[t+1],n[t+2]),n[e]!==void 0&&o.push(n[e+0],n[e+1],n[e+2])},addUV:function(i,t,e){const n=this.uvs,o=this.object.geometry.uvs;o.push(n[i+0],n[i+1]),o.push(n[t+0],n[t+1]),o.push(n[e+0],n[e+1])},addDefaultUV:function(){const i=this.object.geometry.uvs;i.push(0,0),i.push(0,0),i.push(0,0)},addUVLine:function(i){const t=this.uvs;this.object.geometry.uvs.push(t[i+0],t[i+1])},addFace:function(i,t,e,n,o,r,m,d,f){const M=this.vertices.length;let p=this.parseVertexIndex(i,M),w=this.parseVertexIndex(t,M),u=this.parseVertexIndex(e,M);if(this.addVertex(p,w,u),this.addColor(p,w,u),m!==void 0&&m!==""){const y=this.normals.length;p=this.parseNormalIndex(m,y),w=this.parseNormalIndex(d,y),u=this.parseNormalIndex(f,y),this.addNormal(p,w,u)}else this.addFaceNormal(p,w,u);if(n!==void 0&&n!==""){const y=this.uvs.length;p=this.parseUVIndex(n,y),w=this.parseUVIndex(o,y),u=this.parseUVIndex(r,y),this.addUV(p,w,u),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(i){this.object.geometry.type="Points";const t=this.vertices.length;for(let e=0,n=i.length;e<n;e++){const o=this.parseVertexIndex(i[e],t);this.addVertexPoint(o),this.addColor(o)}},addLineGeometry:function(i,t){this.object.geometry.type="Line";const e=this.vertices.length,n=this.uvs.length;for(let o=0,r=i.length;o<r;o++)this.addVertexLine(this.parseVertexIndex(i[o],e));for(let o=0,r=t.length;o<r;o++)this.addUVLine(this.parseUVIndex(t[o],n))}};return s.startObject("",!1),s}class rt extends l.Loader{constructor(i){super(i),this.materials=null}load(i,t,e,n){const o=this,r=new l.FileLoader(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(i,function(m){try{t(o.parse(m))}catch(d){n?n(d):console.error(d),o.manager.itemError(i)}},e,n)}setMaterials(i){return this.materials=i,this}parse(i){const t=new st;i.indexOf(`\r
`)!==-1&&(i=i.replace(/\r\n/g,`
`)),i.indexOf(`\\
`)!==-1&&(i=i.replace(/\\\n/g,""));const e=i.split(`
`);let n="",o="",r=0,m=[];const d=typeof"".trimLeft=="function";for(let p=0,w=e.length;p<w;p++)if(n=e[p],n=d?n.trimLeft():n.trim(),r=n.length,r!==0&&(o=n.charAt(0),o!=="#"))if(o==="v"){const u=n.split(/\s+/);switch(u[0]){case"v":t.vertices.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])),u.length>=7?(Y.setRGB(parseFloat(u[4]),parseFloat(u[5]),parseFloat(u[6])).convertSRGBToLinear(),t.colors.push(Y.r,Y.g,Y.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]));break;case"vt":t.uvs.push(parseFloat(u[1]),parseFloat(u[2]));break}}else if(o==="f"){const y=n.slice(1).trim().split(/\s+/),g=[];for(let P=0,x=y.length;P<x;P++){const S=y[P];if(S.length>0){const O=S.split("/");g.push(O)}}const E=g[0];for(let P=1,x=g.length-1;P<x;P++){const S=g[P],O=g[P+1];t.addFace(E[0],S[0],O[0],E[1],S[1],O[1],E[2],S[2],O[2])}}else if(o==="l"){const u=n.substring(1).trim().split(" ");let y=[];const g=[];if(n.indexOf("/")===-1)y=u;else for(let E=0,P=u.length;E<P;E++){const x=u[E].split("/");x[0]!==""&&y.push(x[0]),x[1]!==""&&g.push(x[1])}t.addLineGeometry(y,g)}else if(o==="p"){const y=n.slice(1).trim().split(" ");t.addPointGeometry(y)}else if((m=nt.exec(n))!==null){const u=(" "+m[0].slice(1).trim()).slice(1);t.startObject(u)}else if(at.test(n))t.object.startMaterial(n.substring(7).trim(),t.materialLibraries);else if(ot.test(n))t.materialLibraries.push(n.substring(7).trim());else if(it.test(n))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(o==="s"){if(m=n.split(" "),m.length>1){const y=m[1].trim().toLowerCase();t.object.smooth=y!=="0"&&y!=="off"}else t.object.smooth=!0;const u=t.object.currentMaterial();u&&(u.smooth=t.object.smooth)}else{if(n==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+n+'"')}t.finalize();const f=new l.Group;if(f.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let p=0,w=t.objects.length;p<w;p++){const u=t.objects[p],y=u.geometry,g=u.materials,E=y.type==="Line",P=y.type==="Points";let x=!1;if(y.vertices.length===0)continue;const S=new l.BufferGeometry;S.setAttribute("position",new l.Float32BufferAttribute(y.vertices,3)),y.normals.length>0&&S.setAttribute("normal",new l.Float32BufferAttribute(y.normals,3)),y.colors.length>0&&(x=!0,S.setAttribute("color",new l.Float32BufferAttribute(y.colors,3))),y.hasUVIndices===!0&&S.setAttribute("uv",new l.Float32BufferAttribute(y.uvs,2));const O=[];for(let R=0,F=g.length;R<F;R++){const G=g[R],I=G.name+"_"+G.smooth+"_"+x;let C=t.materials[I];if(this.materials!==null){if(C=this.materials.create(G.name),E&&C&&!(C instanceof l.LineBasicMaterial)){const B=new l.LineBasicMaterial;l.Material.prototype.copy.call(B,C),B.color.copy(C.color),C=B}else if(P&&C&&!(C instanceof l.PointsMaterial)){const B=new l.PointsMaterial({size:10,sizeAttenuation:!1});l.Material.prototype.copy.call(B,C),B.color.copy(C.color),B.map=C.map,C=B}}C===void 0&&(E?C=new l.LineBasicMaterial:P?C=new l.PointsMaterial({size:1,sizeAttenuation:!1}):C=new l.MeshPhongMaterial,C.name=G.name,C.flatShading=!G.smooth,C.vertexColors=x,t.materials[I]=C),O.push(C)}let b;if(O.length>1){for(let R=0,F=g.length;R<F;R++){const G=g[R];S.addGroup(G.groupStart,G.groupCount,R)}E?b=new l.LineSegments(S,O):P?b=new l.Points(S,O):b=new l.Mesh(S,O)}else E?b=new l.LineSegments(S,O[0]):P?b=new l.Points(S,O[0]):b=new l.Mesh(S,O[0]);b.name=u.name,f.add(b)}else if(t.vertices.length>0){const p=new l.PointsMaterial({size:1,sizeAttenuation:!1}),w=new l.BufferGeometry;w.setAttribute("position",new l.Float32BufferAttribute(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(w.setAttribute("color",new l.Float32BufferAttribute(t.colors,3)),p.vertexColors=!0);const u=new l.Points(w,p);f.add(u)}return f}}const ye=a.defineComponent({__name:"OBJLoader",props:{castShadow:{type:Boolean,default:!1},position:{default:()=>[0,0,0]},receiveShadow:{type:Boolean,default:!1},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]},url:null},emits:["load","progress","error"],setup(s,{expose:i,emit:t}){const e=s,n=new rt,o=a.inject("scene"),r=new l.Group;r.castShadow=!0,r.receiveShadow=!0,o.add(r),L(e,"position",r),L(e,"rotation",r),L(e,"scale",r);function m(){n.load(e.url,function(d){for(const f of d.children)r.add(f),f.material=r.material,L(e,"position",r,!1),L(e,"rotation",r,!1),L(e,"scale",r,!1);t("load",d)},function(d){t("progress",d)},function(d){t("error",d)})}return m(),a.watch(()=>e.url,()=>m()),a.provide("mesh",r),i({three:r}),(d,f)=>a.renderSlot(d.$slots,"default")}}),we=a.defineComponent({__name:"AxesHelper",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},size:{default:1},scale:{default:()=>[1,1,1]}},setup(s,{expose:i}){const t=s,e=a.inject("scene"),n=new l.AxesHelper(t.size);return e.add(n),L(t,"position",n),L(t,"rotation",n),L(t,"scale",n),a.provide("mesh",n),i({three:n}),(o,r)=>a.renderSlot(o.$slots,"default")}}),ct={name:"BoxGeometry",render:()=>null},be=a.defineComponent({...ct,props:{name:{default:""},width:{default:1},height:{default:1},depth:{default:1},widthSegments:{default:1},heightSegments:{default:1},depthSegments:{default:1}},setup(s,{expose:i}){const t=s,e=a.inject("mesh");function n(d,f,M,p,w,u){return new l.BoxGeometry(d,f,M,p,w,u)}const o=a.reactive(new l.BufferGeometry);o.name=t.name,e.geometry=o;const r=a.inject("addGeometry");r(o);function m(){const d=n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments);D(o,d)}return m(),_(t,"name",()=>{o.name=t.name}),_(t,"width",m),_(t,"height",m),_(t,"depth",m),_(t,"widthSegments",m),_(t,"heightSegments",m),_(t,"depthSegments",m),i({three:o}),{props:t,mesh:e,makeBox:n,three:o,addGeometry:r,redoGeometry:m}}}),lt={name:"BufferGeometry",render:()=>null},_e=a.defineComponent({...lt,props:{name:{default:""},vertices:{default:()=>[]},faces:{default:()=>[]},uvs:{default:()=>[]}},setup(s,{expose:i}){const t=s,e=a.inject("mesh");function n(d,f,M){const p=new l.BufferGeometry,w=new Float32Array(d),u=new Float32Array(M);return p.setAttribute("position",new l.BufferAttribute(w,3)),p.setAttribute("uv",new l.BufferAttribute(u,2)),t.faces.length>0&&p.setIndex(f),p.computeVertexNormals(),p}const o=a.reactive(n(t.vertices,t.faces,t.uvs));o.name=t.name,e.geometry=o;const r=a.inject("addGeometry");r(o);function m(d,f,M){const p=n(d,f,M);D(o,p)}return a.watch(()=>t.vertices,d=>{m(d,t.faces,t.uvs)},{deep:!0,immediate:!0}),a.watch(()=>t.faces,d=>{m(t.vertices,d,t.uvs)},{deep:!0,immediate:!0}),i({three:o}),{props:t,mesh:e,makeGeometry:n,three:o,addGeometry:r,redoGeometry:m}}}),mt={name:"EdgesGeometry",render:()=>null},Me=a.defineComponent({...mt,props:{geometry:null},setup(s,{expose:i}){const t=s,e=a.inject("mesh"),n=a.reactive(new l.BufferGeometry);e.geometry=n;const o=a.inject("getGeometry"),r=a.inject("addGeometry");r(n);function m(){const M=new l.EdgesGeometry(o(t.geometry));D(n,M)}let d=a.watch(o(t.geometry),()=>{m()},{deep:!0,immediate:!0});_(t,"geometry",()=>{d(),d=a.watch(o(t.geometry),()=>{m()},{immediate:!0,deep:!0})});const f=()=>{o(t.geometry)===void 0?a.nextTick(()=>f):m()};return a.nextTick(()=>f),i({three:n}),{props:t,mesh:e,three:n,getGeometry:o,addGeometry:r,redoGeometry:m,get unwatch(){return d},set unwatch(M){d=M},waitUntilGeometryChanged:f}}}),dt={name:"PlaneGeometry",render:()=>null},Pe=a.defineComponent({...dt,props:{name:{default:""},width:{default:1},height:{default:1},widthSegments:{default:1},heightSegments:{default:1}},setup(s,{expose:i}){const t=s,e=a.inject("mesh");function n(d,f,M,p){return new l.PlaneGeometry(d,f,M,p)}const o=a.reactive(new l.BufferGeometry);o.name=t.name,e.geometry=o;const r=a.inject("addGeometry");r(o);function m(){const d=n(t.width,t.height,t.widthSegments,t.heightSegments);D(o,d)}return m(),_(t,"width",m),_(t,"height",m),_(t,"widthSegments",m),_(t,"heightSegments",m),i({three:o}),{props:t,mesh:e,makePlane:n,three:o,addGeometry:r,redoGeometry:m}}}),ut={name:"SphereGeometry",render:()=>null},Ae=a.defineComponent({...ut,props:{name:{default:""},radius:{default:1},widthSegments:{default:32},heightSegments:{default:16},phiStart:{default:0},phiLength:{default:2*Math.PI},thetaStart:{default:0},thetaLength:{default:Math.PI}},setup(s,{expose:i}){const t=s,e=a.inject("mesh");function n(d,f,M,p,w,u,y){return new l.SphereGeometry(d,f,M,p,w,u,y)}const o=a.reactive(new l.BufferGeometry);o.name=t.name,e.geometry=o;const r=a.inject("addGeometry");r(o);function m(){const d=n(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength);D(o,d)}return m(),_(t,"radius",m),_(t,"widthSegments",m),_(t,"heightSegments",m),_(t,"phiStart",m),_(t,"phiLength",m),_(t,"thetaStart",m),_(t,"thetaLength",m),i({three:o}),{props:t,mesh:e,makeSphere:n,three:o,addGeometry:r,redoGeometry:m}}}),ft={name:"WireframeGeometry",render:()=>null},Le=a.defineComponent({...ft,props:{geometry:null},setup(s,{expose:i}){const t=s,e=a.inject("mesh"),n=a.reactive(new l.BufferGeometry);e.geometry=n;const o=a.inject("getGeometry"),r=a.inject("addGeometry");r(n);function m(){const M=new l.WireframeGeometry(o(t.geometry));D(n,M)}let d=a.watch(o(t.geometry),()=>{m()},{deep:!0,immediate:!0});_(t,"geometry",()=>{d(),d=a.watch(o(t.geometry),()=>{m()},{immediate:!0,deep:!0})});const f=()=>{o(t.geometry)===void 0?a.nextTick(()=>f):m()};return a.nextTick(()=>f),i({three:n}),{props:t,mesh:e,three:n,getGeometry:o,addGeometry:r,redoGeometry:m,get unwatch(){return d},set unwatch(M){d=M},waitUntilGeometryChanged:f}}}),pt={name:"LineBasicMaterial",render:()=>null},Ee=a.defineComponent({...pt,props:{color:{default:16777215}},setup(s,{expose:i}){const t=s,e=a.inject("mesh"),n=new l.LineBasicMaterial({color:t.color});e.material=n;function o(r){r.color&&(n.color=new l.Color(r.color))}return o(t),a.watch(()=>t.color,()=>o(t)),a.provide("material",n),i({three:n}),{props:t,mesh:e,three:n,applyProps:o}}}),ht={name:"MeshBasicMaterial"},Se=a.defineComponent({...ht,props:{color:null,side:{default:l.FrontSide},opacity:{default:1},transparent:{type:Boolean,default:!1},vertexColors:{type:Boolean,default:!1}},setup(s,{expose:i}){const t=s,e=a.inject("mesh"),n=new l.MeshBasicMaterial;return e.material=n,a.watch(()=>t.color,()=>{t.color!==void 0&&(n.color=new l.Color(t.color))},{immediate:!0}),a.watch(()=>t.side,()=>{n.side=t.side},{immediate:!0}),a.watch(()=>t.opacity,()=>{n.opacity=t.opacity},{immediate:!0}),a.watch(()=>t.transparent,()=>{n.transparent=t.transparent},{immediate:!0}),a.watch(()=>t.vertexColors,()=>{n.vertexColors=t.vertexColors},{immediate:!0}),a.provide("material",n),i({three:n}),(o,r)=>a.renderSlot(o.$slots,"default")}}),gt={name:"MeshLambertMaterial"},Ce=a.defineComponent({...gt,props:{color:{default:16777215},side:{default:l.FrontSide},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(s,{expose:i}){const t=s,e=a.inject("mesh"),n=new l.MeshLambertMaterial;e.material=n;function o(r){r.color&&(n.color=new l.Color(r.color)),r.side&&(n.side=r.side)}return o(t),a.watch(()=>t.color,()=>o(t)),a.watch(()=>t.side,()=>o(t)),a.watch(()=>t.opacity,()=>{n.opacity=t.opacity},{immediate:!0}),a.watch(()=>t.transparent,()=>{n.transparent=t.transparent},{immediate:!0}),a.provide("material",n),i({three:n}),(r,m)=>a.renderSlot(r.$slots,"default")}}),yt={name:"PointsMaterial",render:()=>null},Oe=a.defineComponent({...yt,props:{color:{default:16777215},sizeAttenuation:{type:Boolean,default:!0},size:{default:1}},setup(s,{expose:i}){const t=s,e=a.inject("mesh"),n=new l.PointsMaterial({color:t.color,sizeAttenuation:t.sizeAttenuation,size:t.size});e.material=n;function o(r){r.color&&(n.color=new l.Color(r.color)),r.size&&(n.size=r.size),r.sizeAttenuation!==void 0&&(n.sizeAttenuation=r.sizeAttenuation)}return o(t),a.watch(()=>t.color,()=>o(t)),a.watch(()=>t.size,()=>o(t)),a.watch(()=>t.sizeAttenuation,()=>o(t)),a.provide("material",n),i({three:n}),{props:t,mesh:e,three:n,applyProps:o}}}),wt={name:"MeshNormalMaterial"},xe=a.defineComponent({...wt,props:{side:{default:l.FrontSide},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(s,{expose:i}){const t=s,e=a.inject("mesh"),n=new l.MeshNormalMaterial;return e.material=n,a.watch(()=>t.side,()=>{n.side=t.side},{immediate:!0}),a.watch(()=>t.opacity,()=>{n.opacity=t.opacity},{immediate:!0}),a.watch(()=>t.transparent,()=>{n.transparent=t.transparent},{immediate:!0}),a.provide("material",n),i({three:n}),(o,r)=>a.renderSlot(o.$slots,"default")}}),bt={name:"AmbientLight",render:()=>null},Te=a.defineComponent({...bt,props:{color:{default:16777215},intensity:{default:1}},setup(s,{expose:i}){const t=s,e=a.inject("scene"),n=new l.AmbientLight;e.add(n);function o(r){n.color=new l.Color(r.color),n.intensity=r.intensity}return o(t),a.watch(()=>t.color,()=>o(t)),a.watch(()=>t.intensity,()=>o(t)),i({three:n}),{props:t,scene:e,three:n,applyProps:o}}}),_t={name:"PointLight",render:()=>null},je=a.defineComponent({..._t,props:{castShadow:{type:Boolean,default:!1},color:{default:16777215},intensity:{default:1},position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(s,{expose:i}){const t=s,e=a.inject("scene"),n=new l.PointLight;e.add(n),L(t,"position",n),L(t,"rotation",n),L(t,"scale",n);function o(r){n.color=new l.Color(r.color),n.intensity=r.intensity,n.castShadow=r.castShadow}return o(t),a.watch(()=>t.color,()=>o(t)),a.watch(()=>t.intensity,()=>o(t)),a.watch(()=>t.castShadow,()=>o(t)),i({three:n}),{props:t,scene:e,three:n,applyProps:o}}}),Mt={name:"TextureLoader",render:()=>null},Re=a.defineComponent({...Mt,props:{url:null},setup(s,{expose:i}){const t=s,e=a.inject("material"),n=a.ref(new l.Texture);function o(r){"map"in e&&(e.map=new l.TextureLoader().load(r.url))}return o(t),a.watch(()=>t.url,()=>o(t)),i({three:n}),{props:t,material:e,three:n,applyProps:o}}});function Pt(s){s.component("Renderer",oe),s.component("Scene",ae),s.component("PerspectiveCamera",ie),s.component("OrthographicCamera",se),s.component("OrbitControls",le),s.component("Group",me),s.component("LineSegments",de),s.component("Mesh",ue),s.component("Points",fe),s.component("OBJLoader",ye),s.component("AxesHelper",we),s.component("BoxGeometry",be),s.component("BufferGeometry",_e),s.component("EdgesGeometry",Me),s.component("PlaneGeometry",Pe),s.component("SphereGeometry",Ae),s.component("WireframeGeometry",Le),s.component("LineBasicMaterial",Ee),s.component("MeshBasicMaterial",Se),s.component("MeshLambertMaterial",Ce),s.component("PointsMaterial",Oe),s.component("MeshNormalMaterial",xe),s.component("AmbientLight",Te),s.component("PointLight",je),s.component("TextureLoader",Re)}A.AmbientLight=Te,A.AxesHelper=we,A.BoxGeometry=be,A.BufferGeometry=_e,A.EdgesGeometry=Me,A.Group=me,A.LineBasicMaterial=Ee,A.LineSegments=de,A.Mesh=ue,A.MeshBasicMaterial=Se,A.MeshLambertMaterial=Ce,A.MeshNormalMaterial=xe,A.OBJLoader=ye,A.OrbitControls=le,A.OrthographicCamera=se,A.PerspectiveCamera=ie,A.PlaneGeometry=Pe,A.PointLight=je,A.Points=fe,A.PointsMaterial=Oe,A.Renderer=oe,A.Scene=ae,A.SphereGeometry=Ae,A.TextureLoader=Re,A.WireframeGeometry=Le,A.install=Pt,Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})});
