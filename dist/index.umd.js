(function(C,i){typeof exports=="object"&&typeof module<"u"?i(exports,require("vue"),require("three")):typeof define=="function"&&define.amd?define(["exports","vue","three"],i):(C=typeof globalThis<"u"?globalThis:C||self,i(C["@janvorisek/drie"]={},C.Vue,C.three))})(this,function(C,i,l){"use strict";const Le=r=>r===void 0?new l.Vector3(0,0,0):"x"in r?new l.Vector3(r.x,r.y,r.z):new l.Vector3(r[0],r[1],r[2]),Ce=(r,s,t)=>{t[r].isVector3?t[r].set(s.x,s.y,s.z):"isEuler"in t[r]&&t[r].setFromVector3(s)},O=(r,s,t,e=!0)=>{if(t!==null){if(r[s]!==void 0){const n=Le(r[s]);Ce(s,n,t)}e&&i.watch(()=>r[s],()=>{if(r[s]!==void 0){const n=Le(r[s]);Ce(s,n,t)}})}},p=(r,s,t)=>{i.watch(()=>r[s],()=>{t()})};function v(r,s){s.hasAttribute("position")&&(r.setAttribute("position",s.getAttribute("position")),r.attributes.position.needsUpdate=!0,r.computeVertexNormals(),r.computeBoundingBox(),r.computeBoundingSphere()),s.hasAttribute("normal")&&(r.setAttribute("normal",s.getAttribute("normal")),r.attributes.normal.needsUpdate=!0),s.hasAttribute("uv")&&(r.setAttribute("uv",s.getAttribute("uv")),r.attributes.uv.needsUpdate=!0),r.setIndex(s.getIndex())}function q(r){if(r.children.length>0)for(let s=r.children.length-1;s>=0;s--)q(r.children[s]);if(r.geometry&&r.geometry.dispose(),r.material)if(r.material.length)for(let s=0;s<r.material.length;++s)r.material[s].map&&r.material[s].map.dispose(),r.material[s].lightMap&&r.material[s].lightMap.dispose(),r.material[s].bumpMap&&r.material[s].bumpMap.dispose(),r.material[s].normalMap&&r.material[s].normalMap.dispose(),r.material[s].specularMap&&r.material[s].specularMap.dispose(),r.material[s].envMap&&r.material[s].envMap.dispose(),r.material[s].dispose();else r.material.map&&r.material.map.dispose(),r.material.lightMap&&r.material.lightMap.dispose(),r.material.bumpMap&&r.material.bumpMap.dispose(),r.material.normalMap&&r.material.normalMap.dispose(),r.material.specularMap&&r.material.specularMap.dispose(),r.material.envMap&&r.material.envMap.dispose(),r.material.dispose();return r.removeFromParent(),!0}function W(r){const s=i.inject("scene"),t=i.inject("parent",void 0);i.onMounted(()=>{t?t.add(r):s.add(r)}),i.onUnmounted(()=>{t?t.remove(r):s.remove(r)})}function Et(r,s,t){const e=i.inject("camera"),n=i.inject("canvas");i.inject("scene");const a=f=>{const g=new l.Raycaster,y=je(f);g.setFromCamera(y,e.value);const M=g.intersectObjects(r);M.length>0&&t("click",M,y)};let o=!1,c=[];const m=f=>{const g=new l.Raycaster,y=je(f);g.setFromCamera(y,e.value);const M=g.intersectObjects(r);M.length>0?(c=M,o===!1&&t("mouseenter",M,y),o=!0,t("mousemove",M,y)):(o&&t("mouseleave",c,y),o=!1,c=[])};i.onMounted(()=>{if(s.enableRaycasting){if((n==null?void 0:n.value)==null)return;n==null||n.value.addEventListener("click",a),n==null||n.value.addEventListener("mousemove",m)}}),i.onUnmounted(()=>{if(s.enableRaycasting){if((n==null?void 0:n.value)==null)return;n==null||n.value.removeEventListener("click",a),n==null||n.value.removeEventListener("mousemove",m)}}),i.watch(()=>s.enableRaycasting,f=>{f?(n==null||n.value.addEventListener("click",a),n==null||n.value.addEventListener("mousemove",m)):(n==null||n.value.removeEventListener("click",a),n==null||n.value.removeEventListener("mousemove",m))})}function je(r){const s=new l.Vector2,t=r.currentTarget.getBoundingClientRect();return s.x=(r.clientX-t.left)/t.width*2-1,s.y=-((r.clientY-t.top)/t.height)*2+1,s}const Ae=i.defineComponent({__name:"Renderer",props:{alpha:{type:Boolean,default:!1},antialias:{type:Boolean,default:!1},autoResize:{type:Boolean,default:!0},camera:null,height:{default:0},frameLimit:{default:60},onBeforeRender:{type:Function,default:()=>{}},shadowMapEnabled:{type:Boolean,default:!1},width:{default:0}},setup(r,{expose:s}){const t=r;let e=i.ref(null);const n=[],a=i.reactive([]),o=i.reactive([]);let c=i.ref(null);const m=i.ref([]),f=i.ref([]),g=i.ref();i.provide("canvas",g);let y=Date.now(),M=1e3/t.frameLimit;i.watch(()=>t.camera,w=>h(w));const h=w=>{if(w){const S=m.value.find(P=>P.name===w);S===void 0&&(c.value=null),c.value=S}else c.value=m.value[0]};function b(){e.value!==null&&(e.value.shadowMap.enabled=t.shadowMapEnabled,M=1e3/t.frameLimit,t.autoResize||e.value.setSize(t.width,t.height))}i.onMounted(()=>{e.value=new l.WebGLRenderer({canvas:g.value,antialias:t.antialias,alpha:t.alpha}),e.value.setSize(1,1),b(),h(t.camera),new ResizeObserver(S=>{S.forEach(P=>{e.value&&t.autoResize&&e.value.setSize(P.contentRect.width,P.contentRect.height)})}).observe(g.value.parentElement),E()}),i.onUnmounted(()=>{for(let w of n)q(w)});function E(){if(requestAnimationFrame(E),e.value===null)return;const w=Date.now(),S=w-y;if(!(M>-1&&S<M)){if(y=w-S%M,t.onBeforeRender&&t.onBeforeRender(),f.value.length>0&&c.value)for(const P of f.value)P.value!==null&&(P.value.object.uuid===c.value.uuid?(P.value.enabled=!0,P.value.update()):P.value.enabled=!1);if(c.value&&e)for(const P of n)e.value.render(P,c.value)}}return b(),i.watch(()=>t.shadowMapEnabled,()=>b()),i.watch(()=>t.frameLimit,()=>b()),i.watch(()=>t.width,()=>b()),i.watch(()=>t.height,()=>b()),i.provide("addCamera",w=>m.value.push(w)),i.provide("addScene",w=>n.push(w)),i.provide("addGeometry",w=>a.push(w)),i.provide("getGeometry",w=>a.find(S=>S.name===w)),i.provide("addMaterial",w=>o.push(w)),i.provide("getMaterial",w=>o.find(S=>S.name===w)),i.provide("addControls",w=>f.value.push(w)),i.provide("camera",c),s({three:e}),(w,S)=>(i.openBlock(),i.createElementBlock(i.Fragment,null,[i.renderSlot(w.$slots,"default"),i.createElementVNode("canvas",{ref_key:"canvas",ref:g},null,512)],64))}}),Oe=i.defineComponent({__name:"Scene",props:{background:{default:16777215}},setup(r,{expose:s}){const t=r,e=new l.Scene;i.provide("scene",e),i.inject("addScene")(e);function n(a){a.background&&(e.background=new l.Color(a.background))}return n(t),i.watch(()=>t.background,()=>n(t)),s({three:e}),(a,o)=>i.renderSlot(a.$slots,"default")}}),St={name:"PerspectiveCamera"},Te=i.defineComponent({...St,props:{aspect:{default:1},autoResize:{type:Boolean,default:!0},far:{default:2e3},lookAt:{default:()=>[0,0,0]},name:{default:""},near:{default:.1},position:{default:()=>[0,0,0]},up:{default:()=>[0,1,0]}},setup(r,{expose:s}){const t=r,e=new l.PerspectiveCamera(75,window.innerWidth/window.innerHeight*1e3,.1,1e3);i.inject("addCamera")(e);const n=i.inject("canvas");i.watch(n,()=>{new ResizeObserver(c=>{c.forEach(m=>{t.autoResize&&(e.aspect=m.contentRect.width/m.contentRect.height,e.updateProjectionMatrix())})}).observe(n.value)}),O(t,"position",e),O(t,"up",e),O(t,"lookAt",e);function a(){e.name=t.name,t.autoResize||(e.aspect=t.aspect),e.near=t.near,e.far=t.far,e.updateProjectionMatrix()}return a(),p(t,"name",a),p(t,"aspect",a),p(t,"near",a),p(t,"far",a),i.provide("parentCamera",e),s({three:e}),(o,c)=>i.renderSlot(o.$slots,"default")}}),Pt={name:"OrthographicCamera"},xe=i.defineComponent({...Pt,props:{far:{default:2e3},lookAt:{default:()=>[0,0,0]},name:{default:""},near:{default:.1},position:{default:()=>[0,0,0]},up:{default:()=>[0,1,0]}},setup(r,{expose:s}){const t=r,e=new l.OrthographicCamera(-10,10,10,-10,.1,1e3);e.lookAt(0,0,0),e.updateProjectionMatrix(),i.inject("addCamera")(e);const n=i.inject("canvas");i.watch(n,()=>{new ResizeObserver(c=>{c.forEach(m=>{const f=m.contentRect.width/m.contentRect.height;e.left=e.bottom*f,e.right=e.top*f,e.updateProjectionMatrix()})}).observe(n.value)}),O(t,"position",e),O(t,"up",e),O(t,"lookAt",e);function a(){e.name=t.name,e.near=t.near,e.far=t.far,e.updateProjectionMatrix()}return a(),p(t,"name",a),p(t,"near",a),p(t,"far",a),i.provide("parentCamera",e),s({three:e}),(o,c)=>i.renderSlot(o.$slots,"default")}}),Ge={type:"change"},ue={type:"start"},ke={type:"end"};class Lt extends l.EventDispatcher{constructor(s,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=s,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new l.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:l.MOUSE.ROTATE,MIDDLE:l.MOUSE.DOLLY,RIGHT:l.MOUSE.PAN},this.touches={ONE:l.TOUCH.ROTATE,TWO:l.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(d){d.addEventListener("keydown",gt),this._domElementKeyEvents=d},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(Ge),e.update(),a=n.NONE},this.update=function(){const d=new l.Vector3,L=new l.Quaternion().setFromUnitVectors(s.up,new l.Vector3(0,1,0)),R=L.clone().invert(),V=new l.Vector3,F=new l.Quaternion,ee=2*Math.PI;return function(){const _t=e.object.position;d.copy(_t).sub(e.target),d.applyQuaternion(L),c.setFromVector3(d),e.autoRotate&&a===n.NONE&&H(I()),e.enableDamping?(c.theta+=m.theta*e.dampingFactor,c.phi+=m.phi*e.dampingFactor):(c.theta+=m.theta,c.phi+=m.phi);let Z=e.minAzimuthAngle,X=e.maxAzimuthAngle;return isFinite(Z)&&isFinite(X)&&(Z<-Math.PI?Z+=ee:Z>Math.PI&&(Z-=ee),X<-Math.PI?X+=ee:X>Math.PI&&(X-=ee),Z<=X?c.theta=Math.max(Z,Math.min(X,c.theta)):c.theta=c.theta>(Z+X)/2?Math.max(Z,c.theta):Math.min(X,c.theta)),c.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=f,c.radius=Math.max(e.minDistance,Math.min(e.maxDistance,c.radius)),e.enableDamping===!0?e.target.addScaledVector(g,e.dampingFactor):e.target.add(g),d.setFromSpherical(c),d.applyQuaternion(R),_t.copy(e.target).add(d),e.object.lookAt(e.target),e.enableDamping===!0?(m.theta*=1-e.dampingFactor,m.phi*=1-e.dampingFactor,g.multiplyScalar(1-e.dampingFactor)):(m.set(0,0,0),g.set(0,0,0)),f=1,y||V.distanceToSquared(e.object.position)>o||8*(1-F.dot(e.object.quaternion))>o?(e.dispatchEvent(Ge),V.copy(e.object.position),F.copy(e.object.quaternion),y=!1,!0):!1}}(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",bt),e.domElement.removeEventListener("pointerdown",K),e.domElement.removeEventListener("pointercancel",ht),e.domElement.removeEventListener("wheel",yt),e.domElement.removeEventListener("pointermove",Ee),e.domElement.removeEventListener("pointerup",Se),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",gt)};const e=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=n.NONE;const o=1e-6,c=new l.Spherical,m=new l.Spherical;let f=1;const g=new l.Vector3;let y=!1;const M=new l.Vector2,h=new l.Vector2,b=new l.Vector2,E=new l.Vector2,w=new l.Vector2,S=new l.Vector2,P=new l.Vector2,A=new l.Vector2,T=new l.Vector2,_=[],z={};function I(){return 2*Math.PI/60/60*e.autoRotateSpeed}function G(){return Math.pow(.95,e.zoomSpeed)}function H(d){m.theta-=d}function x(d){m.phi-=d}const B=function(){const d=new l.Vector3;return function(R,V){d.setFromMatrixColumn(V,0),d.multiplyScalar(-R),g.add(d)}}(),te=function(){const d=new l.Vector3;return function(R,V){e.screenSpacePanning===!0?d.setFromMatrixColumn(V,1):(d.setFromMatrixColumn(V,0),d.crossVectors(e.object.up,d)),d.multiplyScalar(R),g.add(d)}}(),U=function(){const d=new l.Vector3;return function(R,V){const F=e.domElement;if(e.object.isPerspectiveCamera){const ee=e.object.position;d.copy(ee).sub(e.target);let me=d.length();me*=Math.tan(e.object.fov/2*Math.PI/180),B(2*R*me/F.clientHeight,e.object.matrix),te(2*V*me/F.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?(B(R*(e.object.right-e.object.left)/e.object.zoom/F.clientWidth,e.object.matrix),te(V*(e.object.top-e.object.bottom)/e.object.zoom/F.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}}();function J(d){e.object.isPerspectiveCamera?f/=d:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom*d)),e.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function re(d){e.object.isPerspectiveCamera?f*=d:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/d)),e.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function ce(d){M.set(d.clientX,d.clientY)}function ge(d){P.set(d.clientX,d.clientY)}function ne(d){E.set(d.clientX,d.clientY)}function be(d){h.set(d.clientX,d.clientY),b.subVectors(h,M).multiplyScalar(e.rotateSpeed);const L=e.domElement;H(2*Math.PI*b.x/L.clientHeight),x(2*Math.PI*b.y/L.clientHeight),M.copy(h),e.update()}function we(d){A.set(d.clientX,d.clientY),T.subVectors(A,P),T.y>0?J(G()):T.y<0&&re(G()),P.copy(A),e.update()}function Me(d){w.set(d.clientX,d.clientY),S.subVectors(w,E).multiplyScalar(e.panSpeed),U(S.x,S.y),E.copy(w),e.update()}function le(d){d.deltaY<0?re(G()):d.deltaY>0&&J(G()),e.update()}function _e(d){let L=!1;switch(d.code){case e.keys.UP:U(0,e.keyPanSpeed),L=!0;break;case e.keys.BOTTOM:U(0,-e.keyPanSpeed),L=!0;break;case e.keys.LEFT:U(e.keyPanSpeed,0),L=!0;break;case e.keys.RIGHT:U(-e.keyPanSpeed,0),L=!0;break}L&&(d.preventDefault(),e.update())}function oe(){if(_.length===1)M.set(_[0].pageX,_[0].pageY);else{const d=.5*(_[0].pageX+_[1].pageX),L=.5*(_[0].pageY+_[1].pageY);M.set(d,L)}}function ae(){if(_.length===1)E.set(_[0].pageX,_[0].pageY);else{const d=.5*(_[0].pageX+_[1].pageX),L=.5*(_[0].pageY+_[1].pageY);E.set(d,L)}}function de(){const d=_[0].pageX-_[1].pageX,L=_[0].pageY-_[1].pageY,R=Math.sqrt(d*d+L*L);P.set(0,R)}function u(){e.enableZoom&&de(),e.enablePan&&ae()}function j(){e.enableZoom&&de(),e.enableRotate&&oe()}function k(d){if(_.length==1)h.set(d.pageX,d.pageY);else{const R=Pe(d),V=.5*(d.pageX+R.x),F=.5*(d.pageY+R.y);h.set(V,F)}b.subVectors(h,M).multiplyScalar(e.rotateSpeed);const L=e.domElement;H(2*Math.PI*b.x/L.clientHeight),x(2*Math.PI*b.y/L.clientHeight),M.copy(h)}function D(d){if(_.length===1)w.set(d.pageX,d.pageY);else{const L=Pe(d),R=.5*(d.pageX+L.x),V=.5*(d.pageY+L.y);w.set(R,V)}S.subVectors(w,E).multiplyScalar(e.panSpeed),U(S.x,S.y),E.copy(w)}function N(d){const L=Pe(d),R=d.pageX-L.x,V=d.pageY-L.y,F=Math.sqrt(R*R+V*V);A.set(0,F),T.set(0,Math.pow(A.y/P.y,e.zoomSpeed)),J(T.y),P.copy(A)}function Y(d){e.enableZoom&&N(d),e.enablePan&&D(d)}function ft(d){e.enableZoom&&N(d),e.enableRotate&&k(d)}function K(d){e.enabled!==!1&&(_.length===0&&(e.domElement.setPointerCapture(d.pointerId),e.domElement.addEventListener("pointermove",Ee),e.domElement.addEventListener("pointerup",Se)),rn(d),d.pointerType==="touch"?an(d):nn(d))}function Ee(d){e.enabled!==!1&&(d.pointerType==="touch"?sn(d):on(d))}function Se(d){wt(d),_.length===0&&(e.domElement.releasePointerCapture(d.pointerId),e.domElement.removeEventListener("pointermove",Ee),e.domElement.removeEventListener("pointerup",Se)),e.dispatchEvent(ke),a=n.NONE}function ht(d){wt(d)}function nn(d){let L;switch(d.button){case 0:L=e.mouseButtons.LEFT;break;case 1:L=e.mouseButtons.MIDDLE;break;case 2:L=e.mouseButtons.RIGHT;break;default:L=-1}switch(L){case l.MOUSE.DOLLY:if(e.enableZoom===!1)return;ge(d),a=n.DOLLY;break;case l.MOUSE.ROTATE:if(d.ctrlKey||d.metaKey||d.shiftKey){if(e.enablePan===!1)return;ne(d),a=n.PAN}else{if(e.enableRotate===!1)return;ce(d),a=n.ROTATE}break;case l.MOUSE.PAN:if(d.ctrlKey||d.metaKey||d.shiftKey){if(e.enableRotate===!1)return;ce(d),a=n.ROTATE}else{if(e.enablePan===!1)return;ne(d),a=n.PAN}break;default:a=n.NONE}a!==n.NONE&&e.dispatchEvent(ue)}function on(d){if(e.enabled!==!1)switch(a){case n.ROTATE:if(e.enableRotate===!1)return;be(d);break;case n.DOLLY:if(e.enableZoom===!1)return;we(d);break;case n.PAN:if(e.enablePan===!1)return;Me(d);break}}function yt(d){e.enabled===!1||e.enableZoom===!1||a!==n.NONE||(d.preventDefault(),e.dispatchEvent(ue),le(d),e.dispatchEvent(ke))}function gt(d){e.enabled===!1||e.enablePan===!1||_e(d)}function an(d){switch(Mt(d),_.length){case 1:switch(e.touches.ONE){case l.TOUCH.ROTATE:if(e.enableRotate===!1)return;oe(),a=n.TOUCH_ROTATE;break;case l.TOUCH.PAN:if(e.enablePan===!1)return;ae(),a=n.TOUCH_PAN;break;default:a=n.NONE}break;case 2:switch(e.touches.TWO){case l.TOUCH.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;u(),a=n.TOUCH_DOLLY_PAN;break;case l.TOUCH.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;j(),a=n.TOUCH_DOLLY_ROTATE;break;default:a=n.NONE}break;default:a=n.NONE}a!==n.NONE&&e.dispatchEvent(ue)}function sn(d){switch(Mt(d),a){case n.TOUCH_ROTATE:if(e.enableRotate===!1)return;k(d),e.update();break;case n.TOUCH_PAN:if(e.enablePan===!1)return;D(d),e.update();break;case n.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;Y(d),e.update();break;case n.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;ft(d),e.update();break;default:a=n.NONE}}function bt(d){e.enabled!==!1&&d.preventDefault()}function rn(d){_.push(d)}function wt(d){delete z[d.pointerId];for(let L=0;L<_.length;L++)if(_[L].pointerId==d.pointerId){_.splice(L,1);return}}function Mt(d){let L=z[d.pointerId];L===void 0&&(L=new l.Vector2,z[d.pointerId]=L),L.set(d.pageX,d.pageY)}function Pe(d){const L=d.pointerId===_[0].pointerId?_[1]:_[0];return z[L.pointerId]}e.domElement.addEventListener("contextmenu",bt),e.domElement.addEventListener("pointerdown",K),e.domElement.addEventListener("pointercancel",ht),e.domElement.addEventListener("wheel",yt,{passive:!1}),this.update()}}const Ct={name:"OrbitControls",render:()=>null},ze=i.defineComponent({...Ct,props:{enablePan:{type:Boolean,default:!0},enableRotate:{type:Boolean,default:!0},enableZoom:{type:Boolean,default:!0},minZoom:{default:0},maxZoom:{default:1/0},minDistance:{default:0},maxDistance:{default:1/0},minPolarAngle:{default:0},maxPolarAngle:{default:Math.PI},minAzimuthAngle:{default:1/0},maxAzimuthAngle:{default:1/0},target:{default:()=>[0,0,0]}},setup(r,{expose:s}){const t=r,e=i.ref(null);i.inject("addControls")(e);const n=i.inject("parentCamera"),a=i.inject("canvas");function o(){e.value!=null&&(e.value.enablePan=t.enablePan,e.value.enableRotate=t.enableRotate,e.value.enableZoom=t.enableZoom,e.value.minZoom=t.minZoom,e.value.maxZoom=t.maxZoom,e.value.minDistance=t.minDistance,e.value.maxDistance=t.maxDistance,e.value.minPolarAngle=t.minPolarAngle,e.value.maxPolarAngle=t.maxPolarAngle,e.value.minAzimuthAngle=t.minAzimuthAngle,e.value.maxAzimuthAngle=t.maxAzimuthAngle)}let c=!1;const m=()=>{a.value&&(c||(e.value=new Lt(n,a.value),o(),O(t,"target",e.value),c=!0))};return i.watch(a,()=>{m()}),o(),p(t,"enablePan",o),p(t,"enableRotate",o),p(t,"enableZoom",o),p(t,"minZoom",o),p(t,"maxZoom",o),p(t,"minDistance",o),p(t,"maxDistance",o),p(t,"minPolarAngle",o),p(t,"maxPolarAngle",o),p(t,"minAzimuthAngle",o),p(t,"maxAzimuthAngle",o),s({three:e}),{props:t,three:e,camera:n,canvas:a,applyProps:o,get boundCamera(){return c},set boundCamera(f){c=f},tryBindCamera:m}}}),pe={type:"change"},fe={type:"start"},he={type:"end"};class jt extends l.EventDispatcher{constructor(s,t){super(),t===void 0&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');const e=this,n={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=s,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:l.MOUSE.ROTATE,MIDDLE:l.MOUSE.DOLLY,RIGHT:l.MOUSE.PAN},this.target=new l.Vector3;const a=1e-6,o=new l.Vector3;let c=1,m=n.NONE,f=n.NONE,g=0,y=0,M=0;const h=new l.Vector3,b=new l.Vector2,E=new l.Vector2,w=new l.Vector3,S=new l.Vector2,P=new l.Vector2,A=new l.Vector2,T=new l.Vector2,_=[],z={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const u=e.domElement.getBoundingClientRect(),j=e.domElement.ownerDocument.documentElement;e.screen.left=u.left+window.pageXOffset-j.clientLeft,e.screen.top=u.top+window.pageYOffset-j.clientTop,e.screen.width=u.width,e.screen.height=u.height};const I=function(){const u=new l.Vector2;return function(k,D){return u.set((k-e.screen.left)/e.screen.width,(D-e.screen.top)/e.screen.height),u}}(),G=function(){const u=new l.Vector2;return function(k,D){return u.set((k-e.screen.width*.5-e.screen.left)/(e.screen.width*.5),(e.screen.height+2*(e.screen.top-D))/e.screen.width),u}}();this.rotateCamera=function(){const u=new l.Vector3,j=new l.Quaternion,k=new l.Vector3,D=new l.Vector3,N=new l.Vector3,Y=new l.Vector3;return function(){Y.set(E.x-b.x,E.y-b.y,0);let K=Y.length();K?(h.copy(e.object.position).sub(e.target),k.copy(h).normalize(),D.copy(e.object.up).normalize(),N.crossVectors(D,k).normalize(),D.setLength(E.y-b.y),N.setLength(E.x-b.x),Y.copy(D.add(N)),u.crossVectors(Y,h).normalize(),K*=e.rotateSpeed,j.setFromAxisAngle(u,K),h.applyQuaternion(j),e.object.up.applyQuaternion(j),w.copy(u),M=K):!e.staticMoving&&M&&(M*=Math.sqrt(1-e.dynamicDampingFactor),h.copy(e.object.position).sub(e.target),j.setFromAxisAngle(w,M),h.applyQuaternion(j),e.object.up.applyQuaternion(j)),b.copy(E)}}(),this.zoomCamera=function(){let u;m===n.TOUCH_ZOOM_PAN?(u=g/y,g=y,e.object.isPerspectiveCamera?h.multiplyScalar(u):e.object.isOrthographicCamera?(e.object.zoom/=u,e.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(u=1+(P.y-S.y)*e.zoomSpeed,u!==1&&u>0&&(e.object.isPerspectiveCamera?h.multiplyScalar(u):e.object.isOrthographicCamera?(e.object.zoom/=u,e.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),e.staticMoving?S.copy(P):S.y+=(P.y-S.y)*this.dynamicDampingFactor)},this.panCamera=function(){const u=new l.Vector2,j=new l.Vector3,k=new l.Vector3;return function(){if(u.copy(T).sub(A),u.lengthSq()){if(e.object.isOrthographicCamera){const N=(e.object.right-e.object.left)/e.object.zoom/e.domElement.clientWidth,Y=(e.object.top-e.object.bottom)/e.object.zoom/e.domElement.clientWidth;u.x*=N,u.y*=Y}u.multiplyScalar(h.length()*e.panSpeed),k.copy(h).cross(e.object.up).setLength(u.x),k.add(j.copy(e.object.up).setLength(u.y)),e.object.position.add(k),e.target.add(k),e.staticMoving?A.copy(T):A.add(u.subVectors(T,A).multiplyScalar(e.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!e.noZoom||!e.noPan)&&(h.lengthSq()>e.maxDistance*e.maxDistance&&(e.object.position.addVectors(e.target,h.setLength(e.maxDistance)),S.copy(P)),h.lengthSq()<e.minDistance*e.minDistance&&(e.object.position.addVectors(e.target,h.setLength(e.minDistance)),S.copy(P)))},this.update=function(){h.subVectors(e.object.position,e.target),e.noRotate||e.rotateCamera(),e.noZoom||e.zoomCamera(),e.noPan||e.panCamera(),e.object.position.addVectors(e.target,h),e.object.isPerspectiveCamera?(e.checkDistances(),e.object.lookAt(e.target),o.distanceToSquared(e.object.position)>a&&(e.dispatchEvent(pe),o.copy(e.object.position))):e.object.isOrthographicCamera?(e.object.lookAt(e.target),(o.distanceToSquared(e.object.position)>a||c!==e.object.zoom)&&(e.dispatchEvent(pe),o.copy(e.object.position),c=e.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){m=n.NONE,f=n.NONE,e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.up.copy(e.up0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),h.subVectors(e.object.position,e.target),e.object.lookAt(e.target),e.dispatchEvent(pe),o.copy(e.object.position),c=e.object.zoom};function H(u){e.enabled!==!1&&(_.length===0&&(e.domElement.setPointerCapture(u.pointerId),e.domElement.addEventListener("pointermove",x),e.domElement.addEventListener("pointerup",B)),_e(u),u.pointerType==="touch"?be(u):re(u))}function x(u){e.enabled!==!1&&(u.pointerType==="touch"?we(u):ce(u))}function B(u){e.enabled!==!1&&(u.pointerType==="touch"?Me(u):ge(),oe(u),_.length===0&&(e.domElement.releasePointerCapture(u.pointerId),e.domElement.removeEventListener("pointermove",x),e.domElement.removeEventListener("pointerup",B)))}function te(u){oe(u)}function U(u){e.enabled!==!1&&(window.removeEventListener("keydown",U),f===n.NONE&&(u.code===e.keys[n.ROTATE]&&!e.noRotate?f=n.ROTATE:u.code===e.keys[n.ZOOM]&&!e.noZoom?f=n.ZOOM:u.code===e.keys[n.PAN]&&!e.noPan&&(f=n.PAN)))}function J(){e.enabled!==!1&&(f=n.NONE,window.addEventListener("keydown",U))}function re(u){if(m===n.NONE)switch(u.button){case e.mouseButtons.LEFT:m=n.ROTATE;break;case e.mouseButtons.MIDDLE:m=n.ZOOM;break;case e.mouseButtons.RIGHT:m=n.PAN;break}const j=f!==n.NONE?f:m;j===n.ROTATE&&!e.noRotate?(E.copy(G(u.pageX,u.pageY)),b.copy(E)):j===n.ZOOM&&!e.noZoom?(S.copy(I(u.pageX,u.pageY)),P.copy(S)):j===n.PAN&&!e.noPan&&(A.copy(I(u.pageX,u.pageY)),T.copy(A)),e.dispatchEvent(fe)}function ce(u){const j=f!==n.NONE?f:m;j===n.ROTATE&&!e.noRotate?(b.copy(E),E.copy(G(u.pageX,u.pageY))):j===n.ZOOM&&!e.noZoom?P.copy(I(u.pageX,u.pageY)):j===n.PAN&&!e.noPan&&T.copy(I(u.pageX,u.pageY))}function ge(){m=n.NONE,e.dispatchEvent(he)}function ne(u){if(e.enabled!==!1&&e.noZoom!==!0){switch(u.preventDefault(),u.deltaMode){case 2:S.y-=u.deltaY*.025;break;case 1:S.y-=u.deltaY*.01;break;default:S.y-=u.deltaY*25e-5;break}e.dispatchEvent(fe),e.dispatchEvent(he)}}function be(u){switch(ae(u),_.length){case 1:m=n.TOUCH_ROTATE,E.copy(G(_[0].pageX,_[0].pageY)),b.copy(E);break;default:m=n.TOUCH_ZOOM_PAN;const j=_[0].pageX-_[1].pageX,k=_[0].pageY-_[1].pageY;y=g=Math.sqrt(j*j+k*k);const D=(_[0].pageX+_[1].pageX)/2,N=(_[0].pageY+_[1].pageY)/2;A.copy(I(D,N)),T.copy(A);break}e.dispatchEvent(fe)}function we(u){switch(ae(u),_.length){case 1:b.copy(E),E.copy(G(u.pageX,u.pageY));break;default:const j=de(u),k=u.pageX-j.x,D=u.pageY-j.y;y=Math.sqrt(k*k+D*D);const N=(u.pageX+j.x)/2,Y=(u.pageY+j.y)/2;T.copy(I(N,Y));break}}function Me(u){switch(_.length){case 0:m=n.NONE;break;case 1:m=n.TOUCH_ROTATE,E.copy(G(u.pageX,u.pageY)),b.copy(E);break;case 2:m=n.TOUCH_ZOOM_PAN,E.copy(G(u.pageX-b.x,u.pageY-b.y)),b.copy(E);break}e.dispatchEvent(he)}function le(u){e.enabled!==!1&&u.preventDefault()}function _e(u){_.push(u)}function oe(u){delete z[u.pointerId];for(let j=0;j<_.length;j++)if(_[j].pointerId==u.pointerId){_.splice(j,1);return}}function ae(u){let j=z[u.pointerId];j===void 0&&(j=new l.Vector2,z[u.pointerId]=j),j.set(u.pageX,u.pageY)}function de(u){const j=u.pointerId===_[0].pointerId?_[1]:_[0];return z[j.pointerId]}this.dispose=function(){e.domElement.removeEventListener("contextmenu",le),e.domElement.removeEventListener("pointerdown",H),e.domElement.removeEventListener("pointercancel",te),e.domElement.removeEventListener("wheel",ne),e.domElement.removeEventListener("pointermove",x),e.domElement.removeEventListener("pointerup",B),window.removeEventListener("keydown",U),window.removeEventListener("keyup",J)},this.domElement.addEventListener("contextmenu",le),this.domElement.addEventListener("pointerdown",H),this.domElement.addEventListener("pointercancel",te),this.domElement.addEventListener("wheel",ne,{passive:!1}),window.addEventListener("keydown",U),window.addEventListener("keyup",J),this.handleResize(),this.update()}}const At={name:"TrackballControls",render:()=>null},Re=i.defineComponent({...At,props:{minDistance:{default:0},maxDistance:{default:1/0},panSpeed:{default:.3},rotateSpeed:{default:1},zoomSpeed:{default:1.2}},setup(r,{expose:s}){const t=r,e=i.ref(null);i.inject("addControls")(e);const n=i.inject("parentCamera"),a=i.inject("canvas");function o(){e.value!=null&&(e.value.rotateSpeed=t.rotateSpeed,e.value.zoomSpeed=t.zoomSpeed,e.value.panSpeed=t.panSpeed,e.value.minDistance=t.minDistance,e.value.maxDistance=t.maxDistance)}let c=!1;const m=()=>{a.value&&(c||(e.value=new jt(n,a.value),o(),c=!0))};return i.watch(a,()=>{m()}),o(),p(t,"panSpeed",o),p(t,"rotateSpeed",o),p(t,"zoomSpeed",o),p(t,"minDistance",o),p(t,"maxDistance",o),s({three:e}),{props:t,three:e,camera:n,canvas:a,applyProps:o,get boundCamera(){return c},set boundCamera(f){c=f},tryBindCamera:m}}}),De=i.defineComponent({__name:"Group",props:{enableRaycasting:{type:Boolean,default:!1},position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},emits:["click","mousemove","mouseenter","mouseleave"],setup(r,{expose:s,emit:t}){const e=r,n=new l.Group;return W(n),O(e,"position",n),O(e,"rotation",n),O(e,"scale",n),Et(n.children,e,t),i.provide("parent",n),s({three:n}),(a,o)=>i.renderSlot(a.$slots,"default")}}),Ve=i.defineComponent({__name:"InstancedMesh",props:{castShadow:{type:Boolean,default:!1},count:null,geometry:{default:null},material:{default:null},receiveShadow:{type:Boolean,default:!1}},setup(r,{expose:s}){const t=r,e=i.inject("scene"),n=new l.BufferGeometry,a=new l.MeshBasicMaterial,o=new l.InstancedMesh(n,a,t.count);o.castShadow=!0,o.receiveShadow=!0,W(o);function c(){o.castShadow=t.castShadow,o.receiveShadow=t.receiveShadow}c(),p(t,"castShadow",c),p(t,"receiveShadow",c);const m=i.inject("getGeometry"),f=i.inject("getMaterial");return i.onMounted(()=>{if(t.geometry){const g=m(t.geometry);o.geometry=g}if(t.material){const g=f(t.material);o.material=g}}),i.onUnmounted(()=>{e.remove(o),q(o)}),i.provide("mesh",o),s({three:o}),(g,y)=>i.renderSlot(g.$slots,"default")}}),Be=i.defineComponent({__name:"Line",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(r,{expose:s}){const t=r,e=i.inject("scene"),n=new l.BufferGeometry,a=new l.LineBasicMaterial({color:"black"}),o=new l.Line(n,a);return W(o),O(t,"position",o),O(t,"rotation",o),O(t,"scale",o),i.onUnmounted(()=>{e.remove(o),q(o)}),i.provide("mesh",o),s({three:o}),(c,m)=>i.renderSlot(c.$slots,"default")}}),$e=i.defineComponent({__name:"LineLoop",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(r,{expose:s}){const t=r,e=i.inject("scene"),n=new l.BufferGeometry,a=new l.LineBasicMaterial({color:"black"}),o=new l.LineLoop(n,a);return W(o),O(t,"position",o),O(t,"rotation",o),O(t,"scale",o),i.onUnmounted(()=>{e.remove(o),q(o)}),i.provide("mesh",o),s({three:o}),(c,m)=>i.renderSlot(c.$slots,"default")}}),Ie=i.defineComponent({__name:"LineSegments",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(r,{expose:s}){const t=r,e=i.inject("scene"),n=new l.BufferGeometry,a=new l.LineBasicMaterial({color:"black"}),o=new l.LineSegments(n,a);return W(o),O(t,"position",o),O(t,"rotation",o),O(t,"scale",o),i.onUnmounted(()=>{e.remove(o),q(o)}),i.provide("mesh",o),s({three:o}),(c,m)=>i.renderSlot(c.$slots,"default")}}),Ne=i.defineComponent({__name:"Mesh",props:{castShadow:{type:Boolean,default:!1},geometry:{default:null},material:{default:null},position:{default:()=>[0,0,0]},receiveShadow:{type:Boolean,default:!1},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(r,{expose:s}){const t=r,e=i.inject("scene"),n=new l.BufferGeometry,a=new l.MeshBasicMaterial,o=new l.Mesh(n,a);o.castShadow=!0,o.receiveShadow=!0,W(o),O(t,"position",o),O(t,"rotation",o),O(t,"scale",o);function c(){o.castShadow=t.castShadow,o.receiveShadow=t.receiveShadow}c(),p(t,"castShadow",c),p(t,"receiveShadow",c);const m=i.inject("getGeometry"),f=i.inject("getMaterial");return i.onMounted(()=>{if(t.geometry){const g=m(t.geometry);o.geometry=g}if(t.material){const g=f(t.material);o.material=g}}),i.onUnmounted(()=>{e.remove(o),q(o)}),i.provide("mesh",o),s({three:o}),(g,y)=>i.renderSlot(g.$slots,"default")}}),ve=i.defineComponent({__name:"Points",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(r,{expose:s}){const t=r,e=i.inject("scene"),n=new l.BufferGeometry,a=new l.PointsMaterial({color:"red",sizeAttenuation:!1,size:2}),o=new l.Points(n,a);return W(o),O(t,"position",o),O(t,"rotation",o),O(t,"scale",o),i.onUnmounted(()=>{e.remove(o),q(o)}),i.provide("mesh",o),s({three:o}),(c,m)=>i.renderSlot(c.$slots,"default")}}),Ot=/^[og]\s*(.+)?/,Tt=/^mtllib /,xt=/^usemtl /,Gt=/^usemap /,Ue=new l.Vector3,ye=new l.Vector3,Fe=new l.Vector3,Ye=new l.Vector3,$=new l.Vector3,se=new l.Color;function kt(){const r={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(s,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=s,this.object.fromDeclaration=t!==!1;return}const e=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:s||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(n,a){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const c={index:this.materials.length,name:n||"",mtllib:Array.isArray(a)&&a.length>0?a[a.length-1]:"",smooth:o!==void 0?o.smooth:this.smooth,groupStart:o!==void 0?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(m){const f={index:typeof m=="number"?m:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return f.clone=this.clone.bind(f),f}};return this.materials.push(c),c},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(n){const a=this.currentMaterial();if(a&&a.groupEnd===-1&&(a.groupEnd=this.geometry.vertices.length/3,a.groupCount=a.groupEnd-a.groupStart,a.inherited=!1),n&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return n&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),a}},e&&e.name&&typeof e.clone=="function"){const n=e.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(s,t){const e=parseInt(s,10);return(e>=0?e-1:e+t/3)*3},parseNormalIndex:function(s,t){const e=parseInt(s,10);return(e>=0?e-1:e+t/3)*3},parseUVIndex:function(s,t){const e=parseInt(s,10);return(e>=0?e-1:e+t/2)*2},addVertex:function(s,t,e){const n=this.vertices,a=this.object.geometry.vertices;a.push(n[s+0],n[s+1],n[s+2]),a.push(n[t+0],n[t+1],n[t+2]),a.push(n[e+0],n[e+1],n[e+2])},addVertexPoint:function(s){const t=this.vertices;this.object.geometry.vertices.push(t[s+0],t[s+1],t[s+2])},addVertexLine:function(s){const t=this.vertices;this.object.geometry.vertices.push(t[s+0],t[s+1],t[s+2])},addNormal:function(s,t,e){const n=this.normals,a=this.object.geometry.normals;a.push(n[s+0],n[s+1],n[s+2]),a.push(n[t+0],n[t+1],n[t+2]),a.push(n[e+0],n[e+1],n[e+2])},addFaceNormal:function(s,t,e){const n=this.vertices,a=this.object.geometry.normals;Ue.fromArray(n,s),ye.fromArray(n,t),Fe.fromArray(n,e),$.subVectors(Fe,ye),Ye.subVectors(Ue,ye),$.cross(Ye),$.normalize(),a.push($.x,$.y,$.z),a.push($.x,$.y,$.z),a.push($.x,$.y,$.z)},addColor:function(s,t,e){const n=this.colors,a=this.object.geometry.colors;n[s]!==void 0&&a.push(n[s+0],n[s+1],n[s+2]),n[t]!==void 0&&a.push(n[t+0],n[t+1],n[t+2]),n[e]!==void 0&&a.push(n[e+0],n[e+1],n[e+2])},addUV:function(s,t,e){const n=this.uvs,a=this.object.geometry.uvs;a.push(n[s+0],n[s+1]),a.push(n[t+0],n[t+1]),a.push(n[e+0],n[e+1])},addDefaultUV:function(){const s=this.object.geometry.uvs;s.push(0,0),s.push(0,0),s.push(0,0)},addUVLine:function(s){const t=this.uvs;this.object.geometry.uvs.push(t[s+0],t[s+1])},addFace:function(s,t,e,n,a,o,c,m,f){const g=this.vertices.length;let y=this.parseVertexIndex(s,g),M=this.parseVertexIndex(t,g),h=this.parseVertexIndex(e,g);if(this.addVertex(y,M,h),this.addColor(y,M,h),c!==void 0&&c!==""){const b=this.normals.length;y=this.parseNormalIndex(c,b),M=this.parseNormalIndex(m,b),h=this.parseNormalIndex(f,b),this.addNormal(y,M,h)}else this.addFaceNormal(y,M,h);if(n!==void 0&&n!==""){const b=this.uvs.length;y=this.parseUVIndex(n,b),M=this.parseUVIndex(a,b),h=this.parseUVIndex(o,b),this.addUV(y,M,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(s){this.object.geometry.type="Points";const t=this.vertices.length;for(let e=0,n=s.length;e<n;e++){const a=this.parseVertexIndex(s[e],t);this.addVertexPoint(a),this.addColor(a)}},addLineGeometry:function(s,t){this.object.geometry.type="Line";const e=this.vertices.length,n=this.uvs.length;for(let a=0,o=s.length;a<o;a++)this.addVertexLine(this.parseVertexIndex(s[a],e));for(let a=0,o=t.length;a<o;a++)this.addUVLine(this.parseUVIndex(t[a],n))}};return r.startObject("",!1),r}class zt extends l.Loader{constructor(s){super(s),this.materials=null}load(s,t,e,n){const a=this,o=new l.FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(s,function(c){try{t(a.parse(c))}catch(m){n?n(m):console.error(m),a.manager.itemError(s)}},e,n)}setMaterials(s){return this.materials=s,this}parse(s){const t=new kt;s.indexOf(`\r
`)!==-1&&(s=s.replace(/\r\n/g,`
`)),s.indexOf(`\\
`)!==-1&&(s=s.replace(/\\\n/g,""));const e=s.split(`
`);let n="",a="",o=0,c=[];const m=typeof"".trimLeft=="function";for(let y=0,M=e.length;y<M;y++)if(n=e[y],n=m?n.trimLeft():n.trim(),o=n.length,o!==0&&(a=n.charAt(0),a!=="#"))if(a==="v"){const h=n.split(/\s+/);switch(h[0]){case"v":t.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(se.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6])).convertSRGBToLinear(),t.colors.push(se.r,se.g,se.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":t.uvs.push(parseFloat(h[1]),parseFloat(h[2]));break}}else if(a==="f"){const b=n.slice(1).trim().split(/\s+/),E=[];for(let S=0,P=b.length;S<P;S++){const A=b[S];if(A.length>0){const T=A.split("/");E.push(T)}}const w=E[0];for(let S=1,P=E.length-1;S<P;S++){const A=E[S],T=E[S+1];t.addFace(w[0],A[0],T[0],w[1],A[1],T[1],w[2],A[2],T[2])}}else if(a==="l"){const h=n.substring(1).trim().split(" ");let b=[];const E=[];if(n.indexOf("/")===-1)b=h;else for(let w=0,S=h.length;w<S;w++){const P=h[w].split("/");P[0]!==""&&b.push(P[0]),P[1]!==""&&E.push(P[1])}t.addLineGeometry(b,E)}else if(a==="p"){const b=n.slice(1).trim().split(" ");t.addPointGeometry(b)}else if((c=Ot.exec(n))!==null){const h=(" "+c[0].slice(1).trim()).slice(1);t.startObject(h)}else if(xt.test(n))t.object.startMaterial(n.substring(7).trim(),t.materialLibraries);else if(Tt.test(n))t.materialLibraries.push(n.substring(7).trim());else if(Gt.test(n))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(a==="s"){if(c=n.split(" "),c.length>1){const b=c[1].trim().toLowerCase();t.object.smooth=b!=="0"&&b!=="off"}else t.object.smooth=!0;const h=t.object.currentMaterial();h&&(h.smooth=t.object.smooth)}else{if(n==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+n+'"')}t.finalize();const f=new l.Group;if(f.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let y=0,M=t.objects.length;y<M;y++){const h=t.objects[y],b=h.geometry,E=h.materials,w=b.type==="Line",S=b.type==="Points";let P=!1;if(b.vertices.length===0)continue;const A=new l.BufferGeometry;A.setAttribute("position",new l.Float32BufferAttribute(b.vertices,3)),b.normals.length>0&&A.setAttribute("normal",new l.Float32BufferAttribute(b.normals,3)),b.colors.length>0&&(P=!0,A.setAttribute("color",new l.Float32BufferAttribute(b.colors,3))),b.hasUVIndices===!0&&A.setAttribute("uv",new l.Float32BufferAttribute(b.uvs,2));const T=[];for(let z=0,I=E.length;z<I;z++){const G=E[z],H=G.name+"_"+G.smooth+"_"+P;let x=t.materials[H];if(this.materials!==null){if(x=this.materials.create(G.name),w&&x&&!(x instanceof l.LineBasicMaterial)){const B=new l.LineBasicMaterial;l.Material.prototype.copy.call(B,x),B.color.copy(x.color),x=B}else if(S&&x&&!(x instanceof l.PointsMaterial)){const B=new l.PointsMaterial({size:10,sizeAttenuation:!1});l.Material.prototype.copy.call(B,x),B.color.copy(x.color),B.map=x.map,x=B}}x===void 0&&(w?x=new l.LineBasicMaterial:S?x=new l.PointsMaterial({size:1,sizeAttenuation:!1}):x=new l.MeshPhongMaterial,x.name=G.name,x.flatShading=!G.smooth,x.vertexColors=P,t.materials[H]=x),T.push(x)}let _;if(T.length>1){for(let z=0,I=E.length;z<I;z++){const G=E[z];A.addGroup(G.groupStart,G.groupCount,z)}w?_=new l.LineSegments(A,T):S?_=new l.Points(A,T):_=new l.Mesh(A,T)}else w?_=new l.LineSegments(A,T[0]):S?_=new l.Points(A,T[0]):_=new l.Mesh(A,T[0]);_.name=h.name,f.add(_)}else if(t.vertices.length>0){const y=new l.PointsMaterial({size:1,sizeAttenuation:!1}),M=new l.BufferGeometry;M.setAttribute("position",new l.Float32BufferAttribute(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(M.setAttribute("color",new l.Float32BufferAttribute(t.colors,3)),y.vertexColors=!0);const h=new l.Points(M,y);f.add(h)}return f}}const He=i.defineComponent({__name:"OBJLoader",props:{castShadow:{type:Boolean,default:!1},position:{default:()=>[0,0,0]},receiveShadow:{type:Boolean,default:!1},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]},url:null},emits:["load","progress","error"],setup(r,{expose:s,emit:t}){const e=r,n=new zt,a=i.inject("scene"),o=new l.Group;o.castShadow=!0,o.receiveShadow=!0,a.add(o),O(e,"position",o),O(e,"rotation",o),O(e,"scale",o);function c(){n.load(e.url,function(m){for(const f of m.children)o.add(f),f.material=o.material,O(e,"position",o,!1),O(e,"rotation",o,!1),O(e,"scale",o,!1);t("load",m)},function(m){t("progress",m)},function(m){t("error",m)})}return c(),i.watch(()=>e.url,()=>c()),i.provide("mesh",o),s({three:o}),(m,f)=>i.renderSlot(m.$slots,"default")}}),Ze=i.defineComponent({__name:"AxesHelper",props:{position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},size:{default:1},scale:{default:()=>[1,1,1]}},setup(r,{expose:s}){const t=r,e=i.inject("scene"),n=new l.AxesHelper(t.size);return e.add(n),O(t,"position",n),O(t,"rotation",n),O(t,"scale",n),i.provide("mesh",n),s({three:n}),(a,o)=>i.renderSlot(a.$slots,"default")}}),Rt={name:"BoxGeometry",render:()=>null},Xe=i.defineComponent({...Rt,props:{name:{default:""},width:{default:1},height:{default:1},depth:{default:1},widthSegments:{default:1},heightSegments:{default:1},depthSegments:{default:1}},setup(r,{expose:s}){const t=r;function e(m,f,g,y,M,h){return new l.BoxGeometry(m,f,g,y,M,h)}const n=i.reactive(new l.BufferGeometry);n.name=t.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const m=e(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments);v(n,m)}return c(),p(t,"name",()=>{n.name=t.name}),p(t,"width",c),p(t,"height",c),p(t,"depth",c),p(t,"widthSegments",c),p(t,"heightSegments",c),p(t,"depthSegments",c),s({three:n}),{props:t,makeBox:e,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),Dt={name:"BufferGeometry",render:()=>null},qe=i.defineComponent({...Dt,props:{name:{default:""},vertices:{default:()=>[]},faces:{default:()=>[]},uvs:{default:()=>[]}},setup(r,{expose:s}){const t=r;function e(m,f,g){const y=new l.BufferGeometry,M=new Float32Array(m),h=new Float32Array(g);return y.setAttribute("position",new l.BufferAttribute(M,3)),y.setAttribute("uv",new l.BufferAttribute(h,2)),t.faces.length>0&&y.setIndex(f),y}const n=i.reactive(e(t.vertices,t.faces,t.uvs));n.name=t.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(m,f,g){const y=e(m,f,g);v(n,y)}return i.watch(()=>t.vertices,m=>{c(m,t.faces,t.uvs)},{deep:!0,immediate:!0}),i.watch(()=>t.faces,m=>{c(t.vertices,m,t.uvs)},{deep:!0,immediate:!0}),s({three:n}),{props:t,makeGeometry:e,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),Vt={name:"CircleGeometry",render:()=>null},We=i.defineComponent({...Vt,props:{name:{default:""},radius:{default:1},segments:{default:32},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(r,{expose:s}){const t=r;function e(m,f,g,y){return new l.CircleGeometry(m,f,g,y)}const n=i.reactive(new l.BufferGeometry);n.name=t.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const m=e(t.radius,t.segments,t.thetaStart,t.thetaLength);v(n,m)}return c(),p(t,"radius",c),p(t,"segments",c),p(t,"thetaStart",c),p(t,"thetaLength",c),s({three:n}),{props:t,makeCircle:e,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),Bt={name:"ConeGeometry",render:()=>null},Ke=i.defineComponent({...Bt,props:{name:{default:""},radius:{default:1},height:{default:1},radialSegments:{default:32},heightSegments:{default:1},openEnded:{type:Boolean,default:!1},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(r,{expose:s}){const t=r;function e(m,f,g,y,M,h,b){return new l.ConeGeometry(m,f,g,y,M,h,b)}const n=i.reactive(new l.BufferGeometry);n.name=t.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const m=e(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength);v(n,m)}return c(),p(t,"radius",c),p(t,"height",c),p(t,"radialSegments",c),p(t,"heightSegments",c),p(t,"openEnded",c),p(t,"thetaStart",c),p(t,"thetaLength",c),s({three:n}),{props:t,makeCone:e,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),$t={name:"CylinderGeometry",render:()=>null},Qe=i.defineComponent({...$t,props:{name:{default:""},radiusTop:{default:1},radiusBottom:{default:1},height:{default:1},radialSegments:{default:32},heightSegments:{default:1},openEnded:{type:Boolean,default:!1},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(r,{expose:s}){const t=r;function e(m,f,g,y,M,h,b,E){return new l.CylinderGeometry(m,f,g,y,M,h,b,E)}const n=i.reactive(new l.BufferGeometry);n.name=t.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const m=e(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength);v(n,m)}return c(),p(t,"radiusTop",c),p(t,"radiusBottom",c),p(t,"height",c),p(t,"radialSegments",c),p(t,"heightSegments",c),p(t,"openEnded",c),p(t,"thetaStart",c),p(t,"thetaLength",c),s({three:n}),{props:t,makeCylinder:e,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),It={name:"EdgesGeometry",render:()=>null},Je=i.defineComponent({...It,props:{geometry:null},setup(r,{expose:s}){const t=r,e=i.reactive(new l.BufferGeometry),n=i.inject("mesh",null);n&&(n.geometry=e);const a=i.inject("getGeometry"),o=i.inject("addGeometry");o(e);function c(){const g=new l.EdgesGeometry(a(t.geometry));v(e,g);const y=n;"isLine"in y&&y.computeLineDistances()}let m=i.watch(a(t.geometry),()=>{c()},{deep:!0,immediate:!0});p(t,"geometry",()=>{m(),m=i.watch(a(t.geometry),()=>{c()},{immediate:!0,deep:!0})});const f=()=>{a(t.geometry)===void 0?i.nextTick(()=>f):c()};return i.nextTick(()=>f),s({three:e}),{props:t,three:e,mesh:n,getGeometry:a,addGeometry:o,redoGeometry:c,get unwatch(){return m},set unwatch(g){m=g},waitUntilGeometryChanged:f}}});class ie extends l.BufferGeometry{constructor(s=(n,a,o)=>o.set(n,a,Math.cos(n)*Math.sin(a)),t=8,e=8){super(),this.type="ParametricGeometry",this.parameters={func:s,slices:t,stacks:e};const n=[],a=[],o=[],c=[],m=1e-5,f=new l.Vector3,g=new l.Vector3,y=new l.Vector3,M=new l.Vector3,h=new l.Vector3;s.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const b=t+1;for(let E=0;E<=e;E++){const w=E/e;for(let S=0;S<=t;S++){const P=S/t;s(P,w,g),a.push(g.x,g.y,g.z),P-m>=0?(s(P-m,w,y),M.subVectors(g,y)):(s(P+m,w,y),M.subVectors(y,g)),w-m>=0?(s(P,w-m,y),h.subVectors(g,y)):(s(P,w+m,y),h.subVectors(y,g)),f.crossVectors(M,h).normalize(),o.push(f.x,f.y,f.z),c.push(P,w)}}for(let E=0;E<e;E++)for(let w=0;w<t;w++){const S=E*b+w,P=E*b+w+1,A=(E+1)*b+w+1,T=(E+1)*b+w;n.push(S,P,T),n.push(P,A,T)}this.setIndex(n),this.setAttribute("position",new l.Float32BufferAttribute(a,3)),this.setAttribute("normal",new l.Float32BufferAttribute(o,3)),this.setAttribute("uv",new l.Float32BufferAttribute(c,2))}}const Q={klein:function(r,s,t){s*=Math.PI,r*=2*Math.PI,s=s*2;let e,n;s<Math.PI?(e=3*Math.cos(s)*(1+Math.sin(s))+2*(1-Math.cos(s)/2)*Math.cos(s)*Math.cos(r),n=-8*Math.sin(s)-2*(1-Math.cos(s)/2)*Math.sin(s)*Math.cos(r)):(e=3*Math.cos(s)*(1+Math.sin(s))+2*(1-Math.cos(s)/2)*Math.cos(r+Math.PI),n=-8*Math.sin(s));const a=-2*(1-Math.cos(s)/2)*Math.sin(r);t.set(e,a,n)},plane:function(r,s){return function(t,e,n){const a=t*r,o=0,c=e*s;n.set(a,o,c)}},mobius:function(r,s,t){r=r-.5;const e=2*Math.PI*s,n=2,a=Math.cos(e)*(n+r*Math.cos(e/2)),o=Math.sin(e)*(n+r*Math.cos(e/2)),c=r*Math.sin(e/2);t.set(a,o,c)},mobius3d:function(r,s,t){r*=Math.PI,s*=2*Math.PI,r=r*2;const e=r/2,n=2.25,a=.125,o=.65;let c=a*Math.cos(s)*Math.cos(e)-o*Math.sin(s)*Math.sin(e);const m=a*Math.cos(s)*Math.sin(e)+o*Math.sin(s)*Math.cos(e),f=(n+c)*Math.sin(r);c=(n+c)*Math.cos(r),t.set(c,f,m)}};Q.TubeGeometry=class extends ie{constructor(s,t=64,e=1,n=8,a=!1){const o=t+1,c=s.computeFrenetFrames(t,a),m=c.tangents,f=c.normals,g=c.binormals,y=new l.Vector3;function M(h,b,E){b*=2*Math.PI;const w=Math.floor(h*(o-1));s.getPointAt(h,y);const S=f[w],P=g[w],A=-e*Math.cos(b),T=e*Math.sin(b);y.x+=A*S.x+T*P.x,y.y+=A*S.y+T*P.y,y.z+=A*S.z+T*P.z,E.copy(y)}super(M,t,n),this.tangents=m,this.normals=f,this.binormals=g,this.path=s,this.segments=t,this.radius=e,this.segmentsRadius=n,this.closed=a}},Q.TorusKnotGeometry=class extends Q.TubeGeometry{constructor(s=200,t=40,e=64,n=8,a=2,o=3){class c extends l.Curve{getPoint(M,h=new l.Vector3){const b=h;M*=Math.PI*2;const E=.5,w=(1+E*Math.cos(o*M))*Math.cos(a*M),S=(1+E*Math.cos(o*M))*Math.sin(a*M),P=E*Math.sin(o*M);return b.set(w,S,P).multiplyScalar(s)}}const m=e,f=n,g=new c;super(g,m,t,f,!0,!1),this.radius=s,this.tube=t,this.segmentsT=e,this.segmentsR=n,this.p=a,this.q=o}},Q.SphereGeometry=class extends ie{constructor(s,t,e){function n(a,o,c){a*=Math.PI,o*=2*Math.PI;const m=s*Math.sin(a)*Math.cos(o),f=s*Math.sin(a)*Math.sin(o),g=s*Math.cos(a);c.set(m,f,g)}super(n,t,e)}},Q.PlaneGeometry=class extends ie{constructor(s,t,e,n){function a(o,c,m){const f=o*s,g=0,y=c*t;m.set(f,g,y)}super(a,e,n)}};const Nt={name:"Parametriceometry",render:()=>null},et=i.defineComponent({...Nt,props:{name:{default:""},function:{type:Function,default:Q.klein},slices:{default:8},stacks:{default:8}},setup(r,{expose:s}){const t=r;function e(m,f,g){return new ie(m,f,g)}const n=i.reactive(new l.BufferGeometry);n.name=t.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const m=e(t.function,t.slices,t.stacks);v(n,m)}return c(),p(t,"function",c),p(t,"stacks",c),p(t,"slices",c),s({three:n}),{props:t,makePlane:e,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),vt={name:"PlaneGeometry",render:()=>null},tt=i.defineComponent({...vt,props:{name:{default:""},width:{default:1},height:{default:1},widthSegments:{default:1},heightSegments:{default:1}},setup(r,{expose:s}){const t=r;function e(m,f,g,y){return new l.PlaneGeometry(m,f,g,y)}const n=i.reactive(new l.BufferGeometry);n.name=t.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const m=e(t.width,t.height,t.widthSegments,t.heightSegments);v(n,m)}return c(),p(t,"width",c),p(t,"height",c),p(t,"widthSegments",c),p(t,"heightSegments",c),s({three:n}),{props:t,makePlane:e,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),Ut={name:"RingGeometry",render:()=>null},nt=i.defineComponent({...Ut,props:{name:{default:""},innerRadius:{default:.5},outerRadius:{default:1},thetaSegments:{default:32},phiSegments:{default:1},thetaStart:{default:0},thetaLength:{default:2*Math.PI}},setup(r,{expose:s}){const t=r;function e(m,f,g,y,M,h){return new l.RingGeometry(m,f,g,y,M,h)}const n=i.reactive(new l.BufferGeometry);n.name=t.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const m=e(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength);v(n,m)}return c(),p(t,"innerRadius",c),p(t,"outerRadius",c),p(t,"thetaSegments",c),p(t,"phiSegments",c),p(t,"thetaStart",c),p(t,"thetaLength",c),s({three:n}),{props:t,makeRing:e,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),Ft={name:"SphereGeometry",render:()=>null},ot=i.defineComponent({...Ft,props:{name:{default:""},radius:{default:1},widthSegments:{default:32},heightSegments:{default:16},phiStart:{default:0},phiLength:{default:2*Math.PI},thetaStart:{default:0},thetaLength:{default:Math.PI}},setup(r,{expose:s}){const t=r;function e(m,f,g,y,M,h,b){return new l.SphereGeometry(m,f,g,y,M,h,b)}const n=i.reactive(new l.BufferGeometry);n.name=t.name;const a=i.inject("mesh",null);a&&(a.geometry=n);const o=i.inject("addGeometry");o(n);function c(){const m=e(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength);v(n,m)}return c(),p(t,"radius",c),p(t,"widthSegments",c),p(t,"heightSegments",c),p(t,"phiStart",c),p(t,"phiLength",c),p(t,"thetaStart",c),p(t,"thetaLength",c),s({three:n}),{props:t,makeSphere:e,three:n,mesh:a,addGeometry:o,redoGeometry:c}}}),Yt={name:"WireframeGeometry",render:()=>null},at=i.defineComponent({...Yt,props:{geometry:null},setup(r,{expose:s}){const t=r,e=i.reactive(new l.BufferGeometry),n=i.inject("mesh",null);n&&(n.geometry=e);const a=i.inject("getGeometry"),o=i.inject("addGeometry");o(e);function c(){const g=new l.WireframeGeometry(a(t.geometry));v(e,g);const y=n;"isLine"in y&&y.computeLineDistances()}let m=i.watch(a(t.geometry),()=>{c()},{deep:!0,immediate:!0});p(t,"geometry",()=>{m(),m=i.watch(a(t.geometry),()=>{c()},{immediate:!0,deep:!0})});const f=()=>{a(t.geometry)===void 0?i.nextTick(()=>f):c()};return i.nextTick(()=>f),s({three:e}),{props:t,three:e,mesh:n,getGeometry:a,addGeometry:o,redoGeometry:c,get unwatch(){return m},set unwatch(g){m=g},waitUntilGeometryChanged:f}}}),Ht={name:"LineBasicMaterial",render:()=>null},st=i.defineComponent({...Ht,props:{color:{default:16777215},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(r,{expose:s}){const t=r,e=new l.LineBasicMaterial({color:t.color});e.name=t.name;const n=i.inject("addMaterial");n(e);const a=i.inject("mesh",null);a&&(a.material=e);function o(){t.color&&(e.color=new l.Color(t.color)),e.opacity=t.opacity,e.transparent=t.transparent,e.needsUpdate=!0}return o(),p(t,"color",o),p(t,"opacity",o),p(t,"transparent",o),i.provide("material",e),s({three:e}),{props:t,three:e,addMaterial:n,mesh:a,applyProps:o}}}),Zt={name:"LineDashedMaterial",render:()=>null},it=i.defineComponent({...Zt,props:{color:{default:16777215},scale:{default:1},dashSize:{default:3},gapSize:{default:1},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(r,{expose:s}){const t=r,e=new l.LineDashedMaterial({color:t.color});e.name=t.name;const n=i.inject("addMaterial");n(e);const a=i.inject("mesh",null);a&&(a.material=e);function o(){e.color=new l.Color(t.color),e.scale=t.scale,e.dashSize=t.dashSize,e.gapSize=t.gapSize,e.opacity=t.opacity,e.transparent=t.transparent,e.needsUpdate=!0}return o(),p(t,"color",o),p(t,"scale",o),p(t,"dashSize",o),p(t,"gapSize",o),p(t,"opacity",o),p(t,"transparent",o),i.provide("material",e),s({three:e}),{props:t,three:e,addMaterial:n,mesh:a,applyProps:o}}}),Xt={name:"MeshBasicMaterial"},rt=i.defineComponent({...Xt,props:{color:null,side:{default:l.FrontSide},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1},vertexColors:{type:Boolean,default:!1}},setup(r,{expose:s}){const t=r,e=new l.MeshBasicMaterial;e.name=t.name,i.inject("addMaterial")(e);const a=i.inject("mesh",null);a&&(a.material=e);function o(){t.color!==void 0&&(e.color=new l.Color(t.color)),e.side=t.side,e.opacity=t.opacity,e.transparent=t.transparent,e.vertexColors=t.vertexColors,e.needsUpdate=!0}return o(),i.provide("material",e),p(t,"color",o),p(t,"side",o),p(t,"opacity",o),p(t,"transparent",o),p(t,"vertexColors",o),s({three:e}),(c,m)=>i.renderSlot(c.$slots,"default")}}),qt={name:"MeshLambertMaterial"},ct=i.defineComponent({...qt,props:{color:{default:16777215},name:{default:""},side:{default:l.FrontSide},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(r,{expose:s}){const t=r,e=new l.MeshLambertMaterial;e.name=t.name,i.inject("addMaterial")(e);const a=i.inject("mesh",null);a&&(a.material=e);function o(c){c.color&&(e.color=new l.Color(c.color)),c.side&&(e.side=c.side)}return o(t),i.watch(()=>t.color,()=>o(t)),i.watch(()=>t.side,()=>o(t)),i.watch(()=>t.opacity,()=>{e.opacity=t.opacity},{immediate:!0}),i.watch(()=>t.transparent,()=>{e.transparent=t.transparent},{immediate:!0}),i.provide("material",e),s({three:e}),(c,m)=>i.renderSlot(c.$slots,"default")}}),Wt={name:"PointsMaterial",render:()=>null},lt=i.defineComponent({...Wt,props:{color:{default:16777215},sizeAttenuation:{type:Boolean,default:!0},name:{default:""},size:{default:1},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(r,{expose:s}){const t=r,e=new l.PointsMaterial({color:t.color,sizeAttenuation:t.sizeAttenuation,size:t.size});e.name=t.name;const n=i.inject("mesh",null),a=i.inject("addMaterial");a(e),n&&(n.material=e);function o(){e.color=new l.Color(t.color),e.size=t.size,e.sizeAttenuation=t.sizeAttenuation,e.opacity=t.opacity,e.transparent=t.transparent,e.needsUpdate=!0}return o(),p(t,"color",o),p(t,"size",o),p(t,"sizeAttenuation",o),p(t,"opacity",o),p(t,"transparent",o),i.provide("material",e),s({three:e}),{props:t,three:e,mesh:n,addMaterial:a,applyProps:o}}}),Kt={name:"MeshNormalMaterial"},dt=i.defineComponent({...Kt,props:{side:{default:l.FrontSide},name:{default:""},opacity:{default:1},transparent:{type:Boolean,default:!1}},setup(r,{expose:s}){const t=r,e=new l.MeshNormalMaterial;e.name=t.name,i.inject("addMaterial")(e);const a=i.inject("mesh",null);return a&&(a.material=e),i.watch(()=>t.side,()=>{e.side=t.side},{immediate:!0}),i.watch(()=>t.opacity,()=>{e.opacity=t.opacity},{immediate:!0}),i.watch(()=>t.transparent,()=>{e.transparent=t.transparent},{immediate:!0}),i.provide("material",e),s({three:e}),(o,c)=>i.renderSlot(o.$slots,"default")}}),Qt={name:"AmbientLight",render:()=>null},mt=i.defineComponent({...Qt,props:{color:{default:16777215},intensity:{default:1}},setup(r,{expose:s}){const t=r,e=i.inject("scene"),n=new l.AmbientLight;e.add(n);function a(o){n.color=new l.Color(o.color),n.intensity=o.intensity}return a(t),i.watch(()=>t.color,()=>a(t)),i.watch(()=>t.intensity,()=>a(t)),s({three:n}),{props:t,scene:e,three:n,applyProps:a}}}),Jt={name:"PointLight",render:()=>null},ut=i.defineComponent({...Jt,props:{castShadow:{type:Boolean,default:!1},color:{default:16777215},intensity:{default:1},position:{default:()=>[0,0,0]},rotation:{default:()=>[0,0,0]},scale:{default:()=>[1,1,1]}},setup(r,{expose:s}){const t=r,e=i.inject("scene"),n=new l.PointLight;e.add(n),O(t,"position",n),O(t,"rotation",n),O(t,"scale",n);function a(o){n.color=new l.Color(o.color),n.intensity=o.intensity,n.castShadow=o.castShadow}return a(t),i.watch(()=>t.color,()=>a(t)),i.watch(()=>t.intensity,()=>a(t)),i.watch(()=>t.castShadow,()=>a(t)),s({three:n}),{props:t,scene:e,three:n,applyProps:a}}}),en={name:"TextureLoader",render:()=>null},pt=i.defineComponent({...en,props:{url:null,wrapS:{default:l.ClampToEdgeWrapping},wrapT:{default:l.ClampToEdgeWrapping}},setup(r,{expose:s}){const t=r,e=i.inject("material"),n=i.ref(new l.Texture);function a(){new l.TextureLoader().loadAsync(t.url).then(c=>{n.value=c,"map"in e&&(e.map=n.value,e.needsUpdate=!0),o()})}function o(){n.value.wrapS=t.wrapS,n.value.wrapT=t.wrapT,n.value.needsUpdate=!0}return a(),p(t,"url",a),p(t,"wrapS",o),p(t,"wrapT",o),s({three:n}),{props:t,material:e,three:n,load:a,applyProps:o}}});function tn(r){r.component("Renderer",Ae),r.component("Scene",Oe),r.component("PerspectiveCamera",Te),r.component("OrthographicCamera",xe),r.component("OrbitControls",ze),r.component("TrackballControls",Re),r.component("Group",De),r.component("InstancedMesh",Ve),r.component("Line",Be),r.component("LineLoop",$e),r.component("LineSegments",Ie),r.component("Mesh",Ne),r.component("Points",ve),r.component("OBJLoader",He),r.component("AxesHelper",Ze),r.component("BoxGeometry",Xe),r.component("BufferGeometry",qe),r.component("CircleGeometry",We),r.component("ConeGeometry",Ke),r.component("CylinderGeometry",Qe),r.component("EdgesGeometry",Je),r.component("ParametricGeometry",et),r.component("PlaneGeometry",tt),r.component("RingGeometry",nt),r.component("SphereGeometry",ot),r.component("WireframeGeometry",at),r.component("LineBasicMaterial",st),r.component("LineDashedMaterial",it),r.component("MeshBasicMaterial",rt),r.component("MeshLambertMaterial",ct),r.component("PointsMaterial",lt),r.component("MeshNormalMaterial",dt),r.component("AmbientLight",mt),r.component("PointLight",ut),r.component("TextureLoader",pt)}C.AmbientLight=mt,C.AxesHelper=Ze,C.BoxGeometry=Xe,C.BufferGeometry=qe,C.CircleGeometry=We,C.ConeGeometry=Ke,C.CylinderGeometry=Qe,C.EdgesGeometry=Je,C.Group=De,C.InstancedMesh=Ve,C.Line=Be,C.LineBasicMaterial=st,C.LineDashedMaterial=it,C.LineLoop=$e,C.LineSegments=Ie,C.Mesh=Ne,C.MeshBasicMaterial=rt,C.MeshLambertMaterial=ct,C.MeshNormalMaterial=dt,C.OBJLoader=He,C.OrbitControls=ze,C.OrthographicCamera=xe,C.ParametricGeometry=et,C.PerspectiveCamera=Te,C.PlaneGeometry=tt,C.PointLight=ut,C.Points=ve,C.PointsMaterial=lt,C.Renderer=Ae,C.RingGeometry=nt,C.Scene=Oe,C.SphereGeometry=ot,C.TextureLoader=pt,C.TrackballControls=Re,C.WireframeGeometry=at,C.install=tn,Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})});
